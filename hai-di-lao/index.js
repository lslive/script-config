/**************************************

脚本名称：支付宝小程序 海底捞 签到 只持单账号
脚本兼容：Surge、QuantumultX、Loon、Shadowrocket、Node.js
只测试过圈X，其它环境请自行尝试

******************************************/
// env.js 全局
const $ = new Env("海底捞");//脚本名称
const ckName = "hdl_data";//环境变量声明
//-------------------- 一般不动变量区域 -------------------------------------
const Notify = 1;//0为关闭通知,1为打开通知,默认为1
let envSplitor = ["@"]; //多账号分隔符
let userCookie = ($.isNode() ? process.env[ckName] : $.getdata(ckName)) || '';//获取环境变量
let userList = [];//用于存储多账号列表
let userIdx = 0;//用于判断账号下标
let userCount = 0;//统计多账号数量


var _0xodA='jsjiami.com.v7';const _0x4fda9c=_0x444b;(function(_0x39efe8,_0x601d86,_0x24da42,_0x487b9b,_0x281cff,_0xeb72d3,_0x5a9b55){return _0x39efe8=_0x39efe8>>0x2,_0xeb72d3='hs',_0x5a9b55='hs',function(_0x51d0f1,_0x82f545,_0x1d74ea,_0x1375d1,_0x2dd96e){const _0x3ffdb4=_0x444b;_0x1375d1='tfi',_0xeb72d3=_0x1375d1+_0xeb72d3,_0x2dd96e='up',_0x5a9b55+=_0x2dd96e,_0xeb72d3=_0x1d74ea(_0xeb72d3),_0x5a9b55=_0x1d74ea(_0x5a9b55),_0x1d74ea=0x0;const _0x30bebe=_0x51d0f1();while(!![]&&--_0x487b9b+_0x82f545){try{_0x1375d1=parseInt(_0x3ffdb4(0x134,'1[ks'))/0x1*(parseInt(_0x3ffdb4(0x1b9,'kDoo'))/0x2)+-parseInt(_0x3ffdb4(0x1b3,'8PC#'))/0x3*(-parseInt(_0x3ffdb4(0x1cb,'aDeD'))/0x4)+parseInt(_0x3ffdb4(0x155,'Dw9Q'))/0x5+-parseInt(_0x3ffdb4(0x1a2,'d6EU'))/0x6+parseInt(_0x3ffdb4(0xfd,'aDeD'))/0x7+-parseInt(_0x3ffdb4(0x108,'7ez!'))/0x8+-parseInt(_0x3ffdb4(0x1d3,'*%TC'))/0x9*(-parseInt(_0x3ffdb4(0x1ba,'V$g6'))/0xa);}catch(_0x2f0313){_0x1375d1=_0x1d74ea;}finally{_0x2dd96e=_0x30bebe[_0xeb72d3]();if(_0x39efe8<=_0x487b9b)_0x1d74ea?_0x281cff?_0x1375d1=_0x2dd96e:_0x281cff=_0x2dd96e:_0x1d74ea=_0x2dd96e;else{if(_0x1d74ea==_0x281cff['replace'](/[dfygbhPwHNuQKCBFkEWUA=]/g,'')){if(_0x1375d1===_0x82f545){_0x30bebe['un'+_0xeb72d3](_0x2dd96e);break;}_0x30bebe[_0x5a9b55](_0x2dd96e);}}}}}(_0x24da42,_0x601d86,function(_0x4ae7de,_0x4a6ba9,_0x1752e8,_0x36be11,_0x57f334,_0x480f62,_0x495854){return _0x4a6ba9='\x73\x70\x6c\x69\x74',_0x4ae7de=arguments[0x0],_0x4ae7de=_0x4ae7de[_0x4a6ba9](''),_0x1752e8='\x72\x65\x76\x65\x72\x73\x65',_0x4ae7de=_0x4ae7de[_0x1752e8]('\x76'),_0x36be11='\x6a\x6f\x69\x6e',(0x179dbd,_0x4ae7de[_0x36be11](''));});}(0x324,0xe43ad,_0x1ded,0xcb),_0x1ded)&&(_0xodA=0xcb);$[_0x4fda9c(0x1a5,'eMR5')]=($[_0x4fda9c(0x1c9,'ocIw')]()?process['env']['IS_DEDUG']:$[_0x4fda9c(0x119,'w6HI')]('is_debug'))||_0x4fda9c(0x128,'*JKP'),$[_0x4fda9c(0x137,'YAlF')]=[],$[_0x4fda9c(0x184,'$7&Z')]=($[_0x4fda9c(0x136,'IEGQ')]()?process[_0x4fda9c(0x18d,'*%TC')][_0x4fda9c(0x132,'tBB#')]:$[_0x4fda9c(0x149,'*%TC')]('bark_key'))||'';async function main(){const _0x24902e=_0x4fda9c,_0x536953={'LWHqN':function(_0x5bbe2a,_0x1e2ef3){return _0x5bbe2a===_0x1e2ef3;},'TrTlw':_0x24902e(0xfe,'tBB#'),'YTdRx':function(_0x1d3827,_0x4afc04){return _0x1d3827==_0x4afc04;},'KKLjA':function(_0x1565db,_0x3919d7){return _0x1565db==_0x3919d7;},'lyZGv':_0x24902e(0x169,'E(#E'),'wnxyX':_0x24902e(0x1b2,'24O6'),'EmeZg':function(_0x12c913,_0xe1d8c4){return _0x12c913===_0xe1d8c4;},'KMriV':'pnsqA'};console['log'](_0x536953[_0x24902e(0x10e,'1[ks')]),taskall=[];for(let _0x3f70c0 of userList){if(_0x3f70c0[_0x24902e(0x1d2,'cNRP')]){const _0x508fe7=_0x536953[_0x24902e(0x12d,'Dy@%')]['split']('|');let _0xa0e023=0x0;while(!![]){switch(_0x508fe7[_0xa0e023++]){case'0':await $[_0x24902e(0x141,'EZc%')](_0x3f70c0[_0x24902e(0x1d7,'E(#E')]());continue;case'1':DoubleLog(_0x24902e(0x101,'a71%')+_0x3f70c0[_0x24902e(0x11a,'iJIR')]+_0x24902e(0x188,'Dw9Q'));continue;case'2':taskall['push'](await _0x3f70c0[_0x24902e(0x14c,'1[ks')]());continue;case'3':console[_0x24902e(0x11c,'UXYR')]('随机延迟'+_0x3f70c0[_0x24902e(0x161,'1[ks')]()+'ms');continue;case'4':await $[_0x24902e(0x125,'ocIw')](_0x3f70c0['getRandomTime']());continue;case'5':taskall[_0x24902e(0x150,'*JKP')](await _0x3f70c0['signin']());continue;}break;}}else{if(_0x536953['EmeZg'](_0x24902e(0x140,'V$g6'),_0x536953[_0x24902e(0x16e,'aDeD')]))$[_0x24902e(0x10d,'V$g6')][_0x24902e(0x1db,'W!@W')](_0x24902e(0x105,'YAlF')+_0x3f70c0[_0x24902e(0x12b,'24O6')]+_0x24902e(0x15f,'24O6'));else{if(_0x536953[_0x24902e(0x18a,'iJIR')](_0x360cae[_0x24902e(0x1b5,'JP^G')],_0x536953[_0x24902e(0x189,'iJIR')])){if(_0x536953['YTdRx'](typeof _0x502430,'string'))_0x46c57f[_0x24902e(0x1d8,'ocIw')](_0x45d198);else _0x536953[_0x24902e(0x17a,'EZc%')](typeof _0xd6d9c3,_0x24902e(0x190,'w6HI'))&&_0x81984b['log'](_0x5c6664[_0x24902e(0x1ce,'I[e0')](_0x26ca49));}}}}await Promise[_0x24902e(0x126,'W!@W')](taskall);}function _0x1ded(){const _0x1a3034=(function(){return[_0xodA,'UWjkFNsFgjhfBiaQmiE.cdoKmbuw.PyvU7bEHdCA==','qCkoWOdcISkm','WPu2hSoFDq','W63cVuTdjG','DCoLW7CcW4a','W4FcU8kNW7lcLSoEW6tcKbZdLSoNuhT9br52W7/dSa','bmo6vuS8','x8kSWOtcOSkffCoiWPrLW5PZwmk7','5ywN5OQh5yIM','xL7dQ8k4hSkRF0y3','W6DZwCkVaSo1WPVcU8oAESolWP8mW4S2dSkmA8oHW4GSWP3dGqS/W5hcMCkZiCkDkCoPW61dtSobW6Odb17dVSoPWR/dOXRdMmkoBblcNHjrWRlcLCk1W5ddHZ3cO8ktWO3cHmkfuSkSWQ4wWRlcVHmakeNcNSkRbYJcM8oPcMHsWOruk8owzSkIjqGTf8kTkSkWiSkYeZtcUgJcQwNcJCk3W5CDW6XHrSkgWRbQuCk9BSkmWORdLmkHqCo9qXm','WQNcQx8','WPnVnCoVW5q','WQSHW5BdGa','r8oYqayAW5NcLmkyW7WknCkSBtK','W609w8kMWPTsEL54W65CW7FcIrfuW7hdUCkwW43dM+s5HUwkSCkAW6NdIHOCWQunfmoxW63cQCociKCeW7n/b8ktW4C','rCoOW77dQ8oV','W6FcNM9Tdx4','W6ZcICkterBcTCkgBI5sWRzCW7JdQvm5WPJdVM/cJmoDhSkxW5BcTvxcN8oiW749aYPrWPuiWPxdGSkxzbFdPCotW6ldV1xcJSk6cepcOsyvWQRcSXVdHCkLWQlcGMVdPmokd8o4jcG','5PYj5OQg5yUpoJm','WPyQrSoWWQu','W4nHqHtdLSkcCSkaWRZcVSo7rx4','WPlcS8kUbmoo','W5dcTSkTW6FdO8kfWRpcMHZcMCokAJq','imkikmo5','WQ4RW5VdMLLqFCo0W5u','pJeZW4mZegS','WQRcKmkTcSolWR0T','k8ksnCo/W6BdLt7dV2ZcQCkxzIW','jgerlI8','WRhcGCkThSozW7nJW5TQjeBdK8kyW5LGEJuZxmofW4dcVv8qW4/cVHVdUfdcTmoVW7KjDu07DMpdHCkSdJddMCkeFZ7dGSo9W7rxs8oBWOqprmkRga','WQhcPCoEkwq','W5XLzeaP','oZmoW5y+cgFdJa','FqRdQ8oHFmka','yqtdNhnGWP4','WQBcRuSMhSowEry','WQawm8oTEq','cCo9W4NdH8ost8kDW4TmW6jUCCkhtq','W7xcMM1OcNO9kCoTW53cJKLQW49vqa','6i6F5y2K56YQ5yI3W5uUW6NcUgpcPUAjTEwlVVc9N4W','mNZcVCor','WRTNW7xcJ8k1DCox','4P635P295QkZ5RwQ5yUFW5iT77+G6kYk5Rsw5yIO546E5Akw5y+C6ys7','qetdRmk5','WPvHcmo/W4Kc','neFcM8kUs8krvCouymoRySofshG','WPq2W7VdN0G','WOWtW6FdGNe','cCo4tKuw','s8o5lSkspW','bG4P','f8omqCkDDW','W4CRcXBcKWGNxa','aL16WQ7dV8kA','WRddUJKFs0NdMCo4WO5Xpv8vmXhdIbzgWRCwhCouWOZcNCohWPqIwspcIrf+imkxWRZcU8oXE8ouasTRW71xiqfnAqb+oCoYW4rFyG7cU8kvWPFdNrNcGI9npSouW40mCh88lSovr8o2WRxdLh4zWPBcMCkaiCkEtKC4dmkGu8oJySoceqNcQcPfW456vclcSxmJcN3dJr0xW4dcTSkpWRySyCoSxmoMk8k8DSklWPNdHbRdHZ1uW4FcNYHym0JcM8klW4tdJMVcTX3cJSodo8ouktJcHCooWQNcMGzwWPnEWQyXW4ePWRpdNSoJW5VcJrZdICkBo8kdlLfFd8k1qCoQeSk7s8kOWRn/WQ3dM0qvW6BdNZJdMmkMWOStrYhcT8oviCoxWPn4FSklx2mtCmk2ohm6W7hdJKBcLSo8W58KxCoscuBdMmkZWRTuW7hdISkYyweqWPJdTmkzaX0VzLpcKwfGWPhcO8otx3mRW7TnBSk6rCkummkgWR8hEd3cMLDsCKvyW7JcP2nNE8olW7/cGmk2WQXLWQXGWOpdGhNcPSkyxJZcMW3cRHNcJmk5wt9IwKJdRCoRWRHezSo1iqhdKSk1WQuLW4OWWRmvWRpcHmodvCksWOSgW6FcRZKfoWNdHa','WRpcMSkWaa','u8keWOxcUSkv','uI5+W7pdQG','WRGwpW','W6ZcMmkgbqddVCoA','tmkDW6pdG0a','EmkyE8op','6zsa6kY46iYq5yYR562j5yMUscqlW5yUpEwLK+I3Jq','mcWPW5iSrJ3cKdFcJmk+WORdUCodEdqLi8kqqSkrESo4W5VdPXGVWQlcQmkvW4ZcLrngaSoBW7nzW4H5v8omsXtcS8oNW4XZwCosW6m+W7u1WPtdGMZcNWVcNx/dMSoaW6rDWOCmgbr+WO9lyW','wvS6vmkq','zCk/vCofWRy','aCkFWQRcRSoV','kmoIuCkgCa','dHm4','kg7cP8oFAq','bK3cOSoqsq','yY4KpCkpWPHEW4pdVSoODmoTEG','W7JcHxO','lcSQW4Kv','WQZcTuC2gSoaEqi','WOG2hKtdGSoEnmkfWPRcHmoM','d3btCZq','W5eUW6FcIhG','buTKWRVdR8ouW4OFymk/W4tdQbaQtWldMCkKzmovAcTFnSkpWRBdTGnMz8kTWR5FrCksW6qaW5VcUbO4WP09DYVdJa0dAmowoMC5W6vSpJFdHSosW7ruhSoRW75VFL1jWRCdWO4BW4xdJmo6W5u+F8kAW5O9A8k0WPlcPCofW4tcTNuldSk0W4uTW4LUW7/cGCkVW5fEcSkHW7vOW6NcISkTzCopC8k1CH7dHMNdPSonmmolW4hcNwlcSW'].concat((function(){return['W5RcQh98cW','W6DSr0SJ','iJapW67dJW','WOlcGhaRhG','4P+C566l5yUP5OM+5yI1','fwyNaba','vxFdMCk4hG','l3JcPmoqqMhcPW','W5BdUCkQWQ7dOmokWRhcJ0xcISkW','WR0XgCoTsmo4W4ddMmoKv8odWRS','oSoOCSkNWQK','W4mCWPPwjCkwWRWp','D8oycmkQoq','WQRcNmk+amoNWROR','kmozuSkbEq','k8kWW5tcPumlwG','aCoDWQNdOKNdT8kqWORdKmooW5PZCSk1','W79YxSk3','WP9YW7hcQmkV','ueq7x8kO','hmkonCosW7W','WPuRW5FdUxe','xuldUa','ymkaW7ZdG20','pmoQBa','hSowBhyO','W55Fs8k6aq','xYzVW6pdTSofW4W','WQhdSCoVWP7cHa','W6j0sG','W45Dsa','W40ZfG3cLHK','WOJdP8oZWRFcTSoc','W6XrEmoJWQddQHxcHq','6zsv6k6o6iYF5y+n562X5yUkWQ0bW6PQomkx5AwX6lA7','DCk4W4a','W5DbFhxdSW','W7LBrey','WOhdGCkcrG','56g154Iq8koxIa','FCoDp8k7imkxr8os','wIexW7pcLICY','4PYx6ls+5y+I','WPhcGmkCdmoL','ymk/WOyHmG','WObLeSojW4CbiWWOWOCiWQFdKq','W4GVpW','zmo0i8khiW','rdahiNlcKmkgW7bBmmosW40','wmohj28','WQ/dOqa/FG','WPtcICo5gfvcW6mPWRhcMw7cL8kWWPFcUaRcOunk','WPBcN2izoa','wCokc8kllbJdRSoq','bWfximoIs8o5WPNcV38HWQVdMq','zaZdLSoM','mw7cTW','WOzWfSo3W48mjHCSWRWpW6xdNL8gWQi','WQvQmSodW6C','W68WW6tcPg8','W7FcRhvDnq','dfZcKSomCq','dmo+rCkAEW','W4vyuuGc','tmkbWR7cH8k3','WQVcQwW7gCoBqry8','W6PuamkSW4xcJ1pcHCo4jJnuW4y','lSoBqCk2','W4ZcOW8mDhpdJmk+','d8oTASkOWRLXWQ8gdmkaWPVcKSkTESktjmkjWRVdUW','8lQxNEI0U+wpSW','WOZdLCkAsCkB','p3H/WOddMq','WPFdUIOy','4PYW6lsM5y+i','aL1WuCoJ','ESkwCq','bazBiSoHsSo0W6pcGvKOWOhdN04','WRyiEmoHWR8','zf4dwCkh','W6JcKSka'].concat((function(){return['sCogpCkfjW','xSkgW6tcVbNcUSoSW4NdSW','vmkWWQRcT8ks','rx7dMSk/oW','WRZdMHyBzq','W4/cTSkImti','pSoTwvq','W6JcMmkjbHhdPW','W6XKF8kwjG','EgzJWOi8fhFdNc/dMCkTWOtcQ8ohEJzNiCoe','WOmYW6ZdUxq','vCk0W6ldLKC','W6xcJCkxdqZdRmointriWQGwW6ddU0WNWPNcRM7cI8oja8oBWOJcSL3cGCohW79Ptgyt','cLPKWQ/dVCkAWOq','WQKQW4VdLKC','l8k4xSo/WOVdISki','t8kxWPG','4PY1uSo3WRqBWRKsrIvuW5JdG8ossmkf','WQVcMSkSamoo','W4LHrXpdLSkgmSkGWRdcTCoWCa','W6uZlWZcPa','W5FLVitLIl7LHza','W7FcGNHNca','xf7dUa','6i+A5y+P562U5yU7W5/cGCkkw3RcR+AkPowiKVcNR4i','W5mHmry','sCoEoa','W5mKWOLqeq','b08fbcy','BCoFc8kHdmkqvq','wCk5WOdcNmkngmonWO9HW6f0gSk0ESk6W5KQW5tdGbr6W5umW5ZcQSk0WQq7WOJdHufUcq','WO7dQ8o9WRFcRq','WRfJW6BcGmkBySoD','A8oLW6SEW6a','ASoegCkQ','sSkXW5lcMWK','C8oxha','bmoWW47cMmkLrSkV','omoirSk4y2XlnW','sCovkSkwiWVdSSofW5G','amo5W4JdImowqSokWQ9GW4TRqq','W6TIACk1eW','WR0kfSoNC8o1','eM9lCYBdKmkTW5Du','wmkmW7hcSrRcSCos','c8k0WQVcL8o3dSk2','hubmuCoo','WOL1b8opW6S','W7tcKSkodXe','ow9vyXG','W54aWQ5xlG','bWeRW4C','qmkhW6pcPd4','W6bpqv4','WR7dTCk/tmkR','imo5r1K','zWZdLCoRASkermowoCk7ymoivNPHAw7cHhNcLmomW5ynW786uGpdQmoZ','amo7ELOS','jCkXimoVW6G','W41pqMq','WPRcICo8bvm','bauRW4lcMXyb','ndC6','D8kzWQtcUCkRnCo/','smkMWPNcNSkq','WRacr8oQWPldMWq','rCobmW','dLbIWRG','evSAhW','WPfjxfNdTCkDW7C','jmo5C3Gt','eg9y','mSoEx8kxDa','jKRcNmk+kmoqaCoSECkKvmopsa','zCkqCCoeWQRdVmk9','aCkHnSo9W60','WPtdPG0zq0a','kmk8WQJcMW','rCk5W7xdMhbfaa'];}()));}()));}());_0x1ded=function(){return _0x1a3034;};return _0x1ded();}function _0x444b(_0x58b660,_0x1b6eed){const _0x1ded3a=_0x1ded();return _0x444b=function(_0x444b10,_0x3eb026){_0x444b10=_0x444b10-0xef;let _0x3f5d15=_0x1ded3a[_0x444b10];if(_0x444b['eINTJZ']===undefined){var _0x1dd630=function(_0x1f5534){const _0x1c96f0='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x425fb4='',_0x173eb0='';for(let _0x14ec7a=0x0,_0xe1f5fd,_0x5e0c20,_0x41cc21=0x0;_0x5e0c20=_0x1f5534['charAt'](_0x41cc21++);~_0x5e0c20&&(_0xe1f5fd=_0x14ec7a%0x4?_0xe1f5fd*0x40+_0x5e0c20:_0x5e0c20,_0x14ec7a++%0x4)?_0x425fb4+=String['fromCharCode'](0xff&_0xe1f5fd>>(-0x2*_0x14ec7a&0x6)):0x0){_0x5e0c20=_0x1c96f0['indexOf'](_0x5e0c20);}for(let _0x108ddd=0x0,_0x50f9da=_0x425fb4['length'];_0x108ddd<_0x50f9da;_0x108ddd++){_0x173eb0+='%'+('00'+_0x425fb4['charCodeAt'](_0x108ddd)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x173eb0);};const _0x448a07=function(_0x5d3ad9,_0x34d7d5){let _0x4add19=[],_0x329242=0x0,_0x5ee190,_0x173d24='';_0x5d3ad9=_0x1dd630(_0x5d3ad9);let _0x48b0b1;for(_0x48b0b1=0x0;_0x48b0b1<0x100;_0x48b0b1++){_0x4add19[_0x48b0b1]=_0x48b0b1;}for(_0x48b0b1=0x0;_0x48b0b1<0x100;_0x48b0b1++){_0x329242=(_0x329242+_0x4add19[_0x48b0b1]+_0x34d7d5['charCodeAt'](_0x48b0b1%_0x34d7d5['length']))%0x100,_0x5ee190=_0x4add19[_0x48b0b1],_0x4add19[_0x48b0b1]=_0x4add19[_0x329242],_0x4add19[_0x329242]=_0x5ee190;}_0x48b0b1=0x0,_0x329242=0x0;for(let _0x17b454=0x0;_0x17b454<_0x5d3ad9['length'];_0x17b454++){_0x48b0b1=(_0x48b0b1+0x1)%0x100,_0x329242=(_0x329242+_0x4add19[_0x48b0b1])%0x100,_0x5ee190=_0x4add19[_0x48b0b1],_0x4add19[_0x48b0b1]=_0x4add19[_0x329242],_0x4add19[_0x329242]=_0x5ee190,_0x173d24+=String['fromCharCode'](_0x5d3ad9['charCodeAt'](_0x17b454)^_0x4add19[(_0x4add19[_0x48b0b1]+_0x4add19[_0x329242])%0x100]);}return _0x173d24;};_0x444b['nftetO']=_0x448a07,_0x58b660=arguments,_0x444b['eINTJZ']=!![];}const _0x1e5fca=_0x1ded3a[0x0],_0x2e8999=_0x444b10+_0x1e5fca,_0x20d0a9=_0x58b660[_0x2e8999];return!_0x20d0a9?(_0x444b['CvlGcA']===undefined&&(_0x444b['CvlGcA']=!![]),_0x3f5d15=_0x444b['nftetO'](_0x3f5d15,_0x3eb026),_0x58b660[_0x2e8999]=_0x3f5d15):_0x3f5d15=_0x20d0a9,_0x3f5d15;},_0x444b(_0x58b660,_0x1b6eed);};class UserInfo{constructor(_0x543e74){const _0x18df71=_0x4fda9c;this[_0x18df71(0x15e,'Dy@%')]=++userIdx,this['token']=_0x543e74,this[_0x18df71(0x18f,'ocIw')]=!![],this[_0x18df71(0x12c,'$7&Z')]={'Authorization':this['token'],'Content-Type':_0x18df71(0xf4,'E(#E')};}['getRandomTime'](){const _0x24d2db=_0x4fda9c,_0x2e5171={'jmyft':function(_0x2de4e4,_0x29f224,_0x32673e){return _0x2de4e4(_0x29f224,_0x32673e);}};return _0x2e5171[_0x24d2db(0x1b4,'Ppe)')](randomInt,0x3e8,0xbb8);}async[_0x4fda9c(0x13c,'XORn')](){const _0xe7f4c2=_0x4fda9c,_0x503348={'yKLbQ':'superapp-public.kiwa-tech.com','hwkDH':_0xe7f4c2(0x1d0,'G(sf'),'GBoPY':_0xe7f4c2(0x181,'a71%'),'deDjb':_0xe7f4c2(0x191,'meHS'),'cxtmR':_0xe7f4c2(0x1ac,'*%TC'),'TvazE':'https://superapp-public.kiwa-tech.com','hwwib':'com.tencent.mm','pBoaK':'cors','jDFXU':_0xe7f4c2(0x194,'kSQ%'),'bptgL':function(_0x3be9c9,_0x4b0126){return _0x3be9c9(_0x4b0126);},'kMuJq':function(_0x15a945,_0x239582){return _0x15a945==_0x239582;},'BjTXA':function(_0x14e964,_0x53cbf4){return _0x14e964===_0x53cbf4;},'VnsoW':_0xe7f4c2(0x1be,'4&]4'),'Vsmkh':function(_0x4cf6ae,_0x2d0108){return _0x4cf6ae(_0x2d0108);}};try{let _0x4db6ce={'url':_0xe7f4c2(0x19a,'3#SU'),'headers':{'Host':_0x503348[_0xe7f4c2(0x127,'JP^G')],'deviceid':_0x503348[_0xe7f4c2(0x154,'tBB#')],'accept':_0xe7f4c2(0x12a,'1[ks'),'Content-Type':_0x503348[_0xe7f4c2(0x19d,'7uNF')],'user-agent':_0x503348[_0xe7f4c2(0x135,'8PC#')],'reqtype':_0x503348[_0xe7f4c2(0x117,'4E8m')],'_haidilao_app_token':this[_0xe7f4c2(0x13e,'JP^G')],'origin':_0x503348[_0xe7f4c2(0x160,'nR&X')],'x-requested-with':_0x503348[_0xe7f4c2(0xf6,'B(yS')],'sec-fetch-site':'same-origin','sec-fetch-mode':_0x503348[_0xe7f4c2(0x1ab,'EZc%')],'sec-fetch-dest':_0x503348[_0xe7f4c2(0x179,'f@c*')],'referer':_0xe7f4c2(0x164,'8PC#')},'body':''},_0x67420e=await httpRequest(_0x4db6ce);_0x503348['bptgL'](debug,_0x67420e);if(_0x503348[_0xe7f4c2(0x193,'1[ks')](_0x67420e[_0xe7f4c2(0x15a,'4E8m')],!![])){if(_0x503348[_0xe7f4c2(0xf5,'E(#E')](_0x503348['VnsoW'],_0xe7f4c2(0x1a8,'B(yS')))_0x503348['Vsmkh'](DoubleLog,this[_0xe7f4c2(0x129,'cNRP')]+',当前共'+_0x67420e[_0xe7f4c2(0x13f,'*%TC')]['total']+'碎片🧩'),this[_0xe7f4c2(0xf0,'lh!1')]=!![];else{if(_0x41a295['isNode']()){}else _0x170299[_0xe7f4c2(0x19f,'*%TC')](_0x10124c[_0xe7f4c2(0x159,'7uNF')],'',_0x14d2b1);}}else _0x503348['bptgL'](debug,_0x67420e);}catch(_0x4b00dc){console['log'](_0x4b00dc);}}async['signin'](){const _0x598fc6=_0x4fda9c,_0x3c66fc={'zBOHb':_0x598fc6(0x118,'XORn'),'rKeUL':'application/json','cFhYV':'https://superapp-public.kiwa-tech.com','ZBxyQ':_0x598fc6(0x168,'6F)t'),'sFCoQ':_0x598fc6(0x14f,'w6HI'),'CGyXJ':'empty','NBbxh':_0x598fc6(0x1a9,'w6HI'),'ccRIW':_0x598fc6(0x139,'7uNF'),'VWqIG':function(_0x2d493f,_0x314caa){return _0x2d493f(_0x314caa);},'zXBNv':function(_0x3dc9b5,_0x798873){return _0x3dc9b5==_0x798873;},'evUOz':function(_0x137426,_0x4640d2){return _0x137426===_0x4640d2;},'OlEsY':'uPvRv','Rvybj':_0x598fc6(0x1a1,'$vT@')};let _0xc69681={'url':_0x598fc6(0x16c,'XORn'),'headers':{'Host':_0x598fc6(0x144,'Dw9Q'),'deviceid':_0x598fc6(0x1cf,'EZc%'),'accept':_0x3c66fc[_0x598fc6(0x1d9,'cNRP')],'Content-Type':_0x3c66fc[_0x598fc6(0x19e,'tBB#')],'user-agent':'Mozilla/5.0\x20(Linux;\x20Android\x2010;\x20MI\x208\x20Lite\x20Build/QKQ1.190910.002;\x20wv)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Version/4.0\x20Chrome/86.0.4240.99\x20XWEB/4435\x20MMWEBSDK/20221206\x20Mobile\x20Safari/537.36\x20MMWEBID/2585\x20MicroMessenger/8.0.32.2300(0x2800205D)\x20WeChat/arm64\x20Weixin\x20NetType/WIFI\x20Language/zh_CN\x20ABI/arm64\x20miniProgram/wx1ddeb67115f30d1a','reqtype':'APPH5','_haidilao_app_token':this[_0x598fc6(0x17f,'IEGQ')],'origin':_0x3c66fc[_0x598fc6(0xf7,'a71%')],'x-requested-with':_0x3c66fc['ZBxyQ'],'sec-fetch-site':_0x598fc6(0x1a6,'u*%3'),'sec-fetch-mode':_0x3c66fc[_0x598fc6(0x19c,'v(qb')],'sec-fetch-dest':_0x3c66fc[_0x598fc6(0x1d6,'UXYR')],'referer':_0x3c66fc[_0x598fc6(0x1aa,'a71%')]},'body':JSON[_0x598fc6(0x133,'lh!1')]({'signinSource':_0x3c66fc[_0x598fc6(0x114,'8PC#')]})},_0xeb0ec7=await _0x3c66fc[_0x598fc6(0xf9,'tBB#')](httpRequest,_0xc69681);debug(_0xeb0ec7),_0x3c66fc[_0x598fc6(0x12f,'V$g6')](_0xeb0ec7[_0x598fc6(0x15a,'4E8m')],!![])?_0x3c66fc[_0x598fc6(0x1bd,'7ez!')](_0x3c66fc['OlEsY'],_0x3c66fc[_0x598fc6(0xfa,'EZc%')])?(_0x3689b8[_0x598fc6(0x165,'eMR5')](''+_0x64bbc6),_0x1b6673['notifyMsg'][_0x598fc6(0xf2,'Dw9Q')](''+_0x283b45)):this[_0x598fc6(0x156,'v(qb')]=_0x598fc6(0x1ae,'QkMd'):this[_0x598fc6(0x1b7,'QkMd')]='❌'+_0xeb0ec7?.[_0x598fc6(0x19f,'*%TC')];}async[_0x4fda9c(0x122,'a71%')](){const _0x10598d=_0x4fda9c,_0xfa5a4e={'UoxJN':function(_0x22b7fd,_0x3ee422){return _0x22b7fd==_0x3ee422;},'rMrve':function(_0x4fbaf6,_0x25b722){return _0x4fbaf6!==_0x25b722;},'FtvLQ':'KlShu'};let _0x52a4fe={'url':_0x10598d(0x178,'QkMd'),'headers':this[_0x10598d(0x1c5,'kSQ%')]},_0x30696d=await httpRequest(_0x52a4fe);_0xfa5a4e[_0x10598d(0x1bf,'iJIR')](_0x30696d?.['code'],0x0)?_0xfa5a4e['rMrve'](_0xfa5a4e[_0x10598d(0x1c6,'24O6')],_0xfa5a4e[_0x10598d(0x1bc,'$7&Z')])?_0x320aed[_0x10598d(0x107,'v(qb')](_0x5867ff):console[_0x10598d(0x1a3,'a71%')](_0x10598d(0x11d,'4*I#')):(this['ckStatus']=![],console[_0x10598d(0x14a,'3#SU')](_0x10598d(0x1d4,'d6EU')+this['index']+_0x10598d(0x115,'3#SU')));}}async function getCookie(){const _0xc7215e=_0x4fda9c,_0x1b0616={'ipFTl':function(_0x4757e1,_0x979f9){return _0x4757e1!=_0x979f9;},'EOxYl':function(_0x2c89a6,_0xbc8f89){return _0x2c89a6===_0xbc8f89;},'rpfRE':'KqNCB','RtCIY':_0xc7215e(0x116,'iJIR'),'gqnAl':_0xc7215e(0x100,'Ppe)'),'zyDby':_0xc7215e(0x182,'W!@W')};if($request&&_0x1b0616['ipFTl']($request[_0xc7215e(0x17d,'J&yd')],_0xc7215e(0x14b,'1[ks'))){if(_0x1b0616[_0xc7215e(0x177,'*JKP')](_0x1b0616[_0xc7215e(0x1b8,'tBB#')],_0x1b0616[_0xc7215e(0x1dc,'meHS')]))_0x4f50ab[_0xc7215e(0x123,'4*I#')](_0x4e66c5);else{const _0x2f252a=$request['headers'][_0x1b0616['gqnAl']]||$request[_0xc7215e(0x138,'V$g6')]['authorization'];_0x2f252a?($['setdata'](_0x2f252a,ckName),$[_0xc7215e(0x1c7,'8PC#')]($['name'],'',_0x1b0616['zyDby'])):$[_0xc7215e(0x1c8,'I[e0')]($[_0xc7215e(0x147,'I[e0')],'',_0xc7215e(0x199,'kDoo'));}}}!(async()=>{const _0x243225=_0x4fda9c,_0x5e94c5={'PABxR':'undefined','HuEbO':function(_0x36ac7d){return _0x36ac7d();},'GFhya':function(_0x504f35,_0x59298a){return _0x504f35>_0x59298a;},'VLjxx':_0x243225(0x13a,'d6EU'),'qXvmr':_0x243225(0x197,'4E8m')};if(typeof $request!=_0x5e94c5[_0x243225(0xf8,'$vT@')]){await _0x5e94c5[_0x243225(0x1d5,'QkMd')](getCookie);return;}if(!await _0x5e94c5['HuEbO'](checkEnv))throw new Error('❌未检测到ck，请添加环境变量');;if(_0x5e94c5[_0x243225(0x1ad,'eMR5')](userList[_0x243225(0x113,'XORn')],0x0)){if(_0x5e94c5[_0x243225(0x1c1,'4E8m')]!==_0x5e94c5[_0x243225(0x18c,'lh!1')])await main();else throw new _0x2cbf06(_0x243225(0x185,'u*%3'));}})()[_0x4fda9c(0x102,'G(sf')](_0xa4e7cb=>$[_0x4fda9c(0xfc,'eMR5')][_0x4fda9c(0x186,'4*I#')](_0xa4e7cb[_0x4fda9c(0x14d,'aDeD')]||_0xa4e7cb))[_0x4fda9c(0x174,'3#SU')](async()=>{const _0x1e26c8=_0x4fda9c,_0x536fd6={'QlmIU':'application/json','WKtAR':function(_0xac528c,_0x1b546a){return _0xac528c!==_0x1b546a;},'tswkJ':'yBVnp','Qhdtb':function(_0x15eba8,_0x4e3c22,_0x869453,_0x20ac67,_0x3fba85){return _0x15eba8(_0x4e3c22,_0x869453,_0x20ac67,_0x3fba85);},'koLxL':function(_0x4e77ba,_0x1c2e70){return _0x4e77ba(_0x1c2e70);}};$['barkKey']&&(_0x536fd6['WKtAR'](_0x536fd6[_0x1e26c8(0x1a4,'3#SU')],_0x536fd6[_0x1e26c8(0x1a0,'$vT@')])?(this[_0x1e26c8(0x1b6,'cNRP')]=++_0xe1f5fd,this['token']=_0x5e0c20,this[_0x1e26c8(0x17e,'eMR5')]=!![],this[_0x1e26c8(0x196,'XORn')]={'Authorization':this['token'],'Content-Type':_0x536fd6[_0x1e26c8(0x10a,'7ez!')]}):await _0x536fd6[_0x1e26c8(0x148,'f@c*')](BarkNotify,$,$['barkKey'],$['name'],$['notifyMsg'][_0x1e26c8(0x104,'meHS')]('\x0a')));;await _0x536fd6[_0x1e26c8(0x109,'aDeD')](SendMsg,$['notifyMsg'][_0x1e26c8(0x172,'4&]4')]('\x0a')),$['done']();});function DoubleLog(_0x32e608){const _0x5deec9=_0x4fda9c,_0x47d4c0={'wgWkC':function(_0xc3ff71,_0x6c7ebc){return _0xc3ff71(_0x6c7ebc);},'yGpzh':_0x5deec9(0x124,'w6HI'),'Uwnmc':_0x5deec9(0x15c,'IEGQ'),'oVaxa':function(_0x3e5f73,_0x222c50){return _0x3e5f73!==_0x222c50;},'FCYAC':function(_0x30e874,_0x429e27){return _0x30e874===_0x429e27;},'tuGIj':_0x5deec9(0x10c,'lh!1')};$[_0x5deec9(0x17c,'Dw9Q')]()?_0x47d4c0['Uwnmc']!==_0x5deec9(0xef,'eMR5')?_0x32e608&&(_0x47d4c0[_0x5deec9(0x146,'4&]4')](_0x5deec9(0xfb,'1[ks'),_0x5deec9(0x1af,'*JKP'))?(_0x47d4c0['wgWkC'](_0x34d7d5,this['signMsg']+_0x5deec9(0x121,'u*%3')+_0x4add19['data']['total']+_0x5deec9(0x1d1,'u*%3')),this[_0x5deec9(0x17b,'3#SU')]=!![]):(console[_0x5deec9(0x10b,'XORn')](''+_0x32e608),$[_0x5deec9(0x163,'4*I#')][_0x5deec9(0x143,'nR&X')](''+_0x32e608))):_0x5f5d93[_0x5deec9(0x1cd,'kDoo')](_0x22ee02):_0x47d4c0['FCYAC'](_0x47d4c0[_0x5deec9(0x152,'nR&X')],_0x47d4c0['tuGIj'])?(console['log'](''+_0x32e608),$[_0x5deec9(0x173,'iJIR')][_0x5deec9(0x1bb,'8PC#')](''+_0x32e608)):(_0x157e22[_0x5deec9(0x1b1,'$vT@')](_0x3aea38,_0x1462b0),_0x183195[_0x5deec9(0x14e,'W!@W')](_0x45282b[_0x5deec9(0x198,'v(qb')],'',_0x47d4c0[_0x5deec9(0x15b,'1[ks')]));}function toParams(_0x70edd7){const _0x900e36=_0x4fda9c,_0x60479e={'miXgd':function(_0x21e1dc,_0x36a08f){return _0x21e1dc+_0x36a08f;},'RGoKE':function(_0xdc6133,_0x1c9c4a){return _0xdc6133(_0x1c9c4a);}};var _0x8df52e=Object[_0x900e36(0x167,'iJIR')](_0x70edd7)[_0x900e36(0x130,'cNRP')](function(_0x1eb4b4){const _0x75cfae=_0x900e36;return _0x60479e['miXgd'](_0x60479e[_0x75cfae(0x103,'w6HI')](encodeURIComponent,_0x1eb4b4)+'=',encodeURIComponent(_0x70edd7[_0x1eb4b4]));})[_0x900e36(0x192,'QkMd')]('&');return _0x8df52e;}async function checkEnv(){const _0x4bd5c9=_0x4fda9c,_0x2adce4={'AOUmB':function(_0x21dc93,_0x5da057){return _0x21dc93+_0x5da057;},'YEeYU':function(_0x284f39,_0x7d977c){return _0x284f39>_0x7d977c;},'KFwjd':'Dgldi','eFFif':_0x4bd5c9(0x16d,'UXYR')};if(userCookie){let _0x5dfb2a=envSplitor[0x0];for(let _0x44142d of envSplitor)if(_0x2adce4[_0x4bd5c9(0x106,'d6EU')](userCookie[_0x4bd5c9(0x131,'YGAI')](_0x44142d),-0x1)){_0x5dfb2a=_0x44142d;break;}for(let _0xe9cad7 of userCookie[_0x4bd5c9(0x1a7,'YAlF')](_0x5dfb2a))_0xe9cad7&&userList[_0x4bd5c9(0x150,'*JKP')](new UserInfo(_0xe9cad7));userCount=userList['length'];}else{if(_0x2adce4[_0x4bd5c9(0x157,'4&]4')]===_0x2adce4[_0x4bd5c9(0x170,'QkMd')]){console[_0x4bd5c9(0x153,'YAlF')](_0x2adce4[_0x4bd5c9(0x1b0,'4*I#')]);return;}else return _0x2adce4[_0x4bd5c9(0x110,'meHS')](_0x5520e3(_0x2bbbbc),'=')+_0x9b958f(_0x5e021f[_0x440427]);}return console[_0x4bd5c9(0x1c2,'Ppe)')](_0x4bd5c9(0x162,'v(qb')+userCount+'个账号'),!![];}function randomInt(_0x30234c,_0xd7a40b){const _0x57e581=_0x4fda9c,_0x12313e={'hIPwi':function(_0xbda01f,_0x5e21b4){return _0xbda01f+_0x5e21b4;},'ieHUA':function(_0x427313,_0x24f034){return _0x427313*_0x24f034;}};return Math[_0x57e581(0x11e,'QkMd')](_0x12313e[_0x57e581(0x16a,'gT!Q')](_0x12313e['ieHUA'](Math[_0x57e581(0x187,'E(#E')](),_0xd7a40b-_0x30234c),_0x30234c));}async function SendMsg(_0x423500){const _0x241250=_0x4fda9c,_0x14a3c2={'QXfep':function(_0x2670b2,_0x3ba12d){return _0x2670b2(_0x3ba12d);},'nuaTM':function(_0x1d95bd,_0x7e83ed){return _0x1d95bd===_0x7e83ed;},'liTDB':_0x241250(0x10f,'4*I#')};if(!_0x423500)return;if(Notify>0x0){if($[_0x241250(0x158,'meHS')]()){}else _0x14a3c2[_0x241250(0x13b,'E(#E')](_0x14a3c2[_0x241250(0x19b,'7ez!')],'PlQRY')?_0x14a3c2[_0x241250(0x1c4,'8PC#')](_0x173d24,_0x48b0b1):$['msg']($['name'],'',_0x423500);}else console['log'](_0x423500);}function debug(_0x36fd2e){const _0x149ae5=_0x4fda9c,_0x5ae33d={'deMCt':function(_0x198aad,_0x3df62d,_0x1c070f){return _0x198aad(_0x3df62d,_0x1c070f);},'yWVGE':_0x149ae5(0x1dd,'f@c*'),'dFkxR':'获取签到Cookie成功🎉','cBWrD':_0x149ae5(0x1cc,'J&yd'),'bQryl':function(_0x355920,_0x3fb66d){return _0x355920===_0x3fb66d;},'AswnV':_0x149ae5(0x12e,'cNRP'),'DeULe':function(_0x36a167,_0x5acf68){return _0x36a167===_0x5acf68;},'EojyX':_0x149ae5(0x18b,'nR&X'),'BMKIz':_0x149ae5(0x18e,'tBB#'),'PwNkU':_0x149ae5(0x16b,'a71%'),'KKEPW':_0x149ae5(0x1ca,'24O6'),'QAQfX':_0x149ae5(0x1c3,'nR&X')};if(_0x5ae33d['bQryl']($[_0x149ae5(0x1b5,'JP^G')],_0x5ae33d[_0x149ae5(0x120,'ocIw')])){if(_0x5ae33d['DeULe'](_0x5ae33d[_0x149ae5(0x13d,'YAlF')],_0x5ae33d['BMKIz']))return _0x5ae33d['deMCt'](_0x108ddd,0x3e8,0xbb8);else{if(typeof _0x36fd2e==_0x5ae33d[_0x149ae5(0x145,'nR&X')])console['log'](_0x36fd2e);else{if(typeof _0x36fd2e==_0x5ae33d[_0x149ae5(0x111,'XORn')]){if(_0x5ae33d['QAQfX']!==_0x5ae33d[_0x149ae5(0x142,'G(sf')]){const _0x41d525=_0x233912['headers'][_0x5ae33d[_0x149ae5(0x15d,'a71%')]]||_0x4983bd['headers'][_0x149ae5(0x176,'4&]4')];_0x41d525?(_0xb1898b[_0x149ae5(0x175,'QkMd')](_0x41d525,_0x41972b),_0x228193[_0x149ae5(0x1c0,'4*I#')](_0x5f25ae[_0x149ae5(0x112,'nR&X')],'',_0x5ae33d['dFkxR'])):_0x36c09d[_0x149ae5(0xf3,'$vT@')](_0x42b235[_0x149ae5(0x183,'$vT@')],'',_0x5ae33d['cBWrD']);}else console[_0x149ae5(0x195,'IEGQ')]($[_0x149ae5(0x166,'E(#E')](_0x36fd2e));}}}}}var version_ = 'jsjiami.com.v7';







//请求函数函数二次封装
function httpRequest(options, method) { typeof (method) === 'undefined' ? ('body' in options ? method = 'post' : method = 'get') : method = method; return new Promise((resolve) => { $[method](options, (err, resp, data) => { try { if (err) { console.log(`${method}请求失败`); $.logErr(err) } else { if (data) { typeof JSON.parse(data) == 'object' ? data = JSON.parse(data) : data = data; resolve(data) } else { console.log(`请求api返回数据为空，请检查自身原因`) } } } catch (e) { $.logErr(e, resp) } finally { resolve() } }) }) }

function Env(t,e){class s{constructor(t){this.env=t}send(t,e="GET"){t="string"==typeof t?{url:t}:t;let s=this.get;"POST"===e&&(s=this.post);const i=new Promise(((e,i)=>{s.call(this,t,((t,s,o)=>{t?i(t):e(s)}))}));return t.timeout?((t,e=1e3)=>Promise.race([t,new Promise(((t,s)=>{setTimeout((()=>{s(new Error("请求超时"))}),e)}))]))(i,t.timeout):i}get(t){return this.send.call(this.env,t)}post(t){return this.send.call(this.env,t,"POST")}}return new class{constructor(t,e){this.logLevels={debug:0,info:1,warn:2,error:3},this.logLevelPrefixs={debug:"[DEBUG] ",info:"[INFO] ",warn:"[WARN] ",error:"[ERROR] "},this.logLevel="info",this.name=t,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.encoding="utf-8",this.startTime=(new Date).getTime(),Object.assign(this,e),this.log("",`🔔${this.name}, 开始!`)}getEnv(){return"undefined"!=typeof $environment&&$environment["surge-version"]?"Surge":"undefined"!=typeof $environment&&$environment["stash-version"]?"Stash":"undefined"!=typeof module&&module.exports?"Node.js":"undefined"!=typeof $task?"Quantumult X":"undefined"!=typeof $loon?"Loon":"undefined"!=typeof $rocket?"Shadowrocket":void 0}isNode(){return"Node.js"===this.getEnv()}isQuanX(){return"Quantumult X"===this.getEnv()}isSurge(){return"Surge"===this.getEnv()}isLoon(){return"Loon"===this.getEnv()}isShadowrocket(){return"Shadowrocket"===this.getEnv()}isStash(){return"Stash"===this.getEnv()}toObj(t,e=null){try{return JSON.parse(t)}catch{return e}}toStr(t,e=null,...s){try{return JSON.stringify(t,...s)}catch{return e}}getjson(t,e){let s=e;if(this.getdata(t))try{s=JSON.parse(this.getdata(t))}catch{}return s}setjson(t,e){try{return this.setdata(JSON.stringify(t),e)}catch{return!1}}getScript(t){return new Promise((e=>{this.get({url:t},((t,s,i)=>e(i)))}))}runScript(t,e){return new Promise((s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let o=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");o=o?1*o:20,o=e&&e.timeout?e.timeout:o;const[r,a]=i.split("@"),n={url:`http://${a}/v1/scripting/evaluate`,body:{script_text:t,mock_type:"cron",timeout:o},headers:{"X-Key":r,Accept:"*/*"},policy:"DIRECT",timeout:o};this.post(n,((t,e,i)=>s(i)))})).catch((t=>this.logErr(t)))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e);if(!s&&!i)return{};{const i=s?t:e;try{return JSON.parse(this.fs.readFileSync(i))}catch(t){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const t=this.path.resolve(this.dataFile),e=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(t),i=!s&&this.fs.existsSync(e),o=JSON.stringify(this.data);s?this.fs.writeFileSync(t,o):i?this.fs.writeFileSync(e,o):this.fs.writeFileSync(t,o)}}lodash_get(t,e,s){const i=e.replace(/\[(\d+)\]/g,".$1").split(".");let o=t;for(const t of i)if(o=Object(o)[t],void 0===o)return s;return o}lodash_set(t,e,s){return Object(t)!==t||(Array.isArray(e)||(e=e.toString().match(/[^.[\]]+/g)||[]),e.slice(0,-1).reduce(((t,s,i)=>Object(t[s])===t[s]?t[s]:t[s]=Math.abs(e[i+1])>>0==+e[i+1]?[]:{}),t)[e[e.length-1]]=s),t}getdata(t){let e=this.getval(t);if(/^@/.test(t)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(t),o=s?this.getval(s):"";if(o)try{const t=JSON.parse(o);e=t?this.lodash_get(t,i,""):e}catch(t){e=""}}return e}setdata(t,e){let s=!1;if(/^@/.test(e)){const[,i,o]=/^@(.*?)\.(.*?)$/.exec(e),r=this.getval(i),a=i?"null"===r?null:r||"{}":"{}";try{const e=JSON.parse(a);this.lodash_set(e,o,t),s=this.setval(JSON.stringify(e),i)}catch(e){const r={};this.lodash_set(r,o,t),s=this.setval(JSON.stringify(r),i)}}else s=this.setval(t,e);return s}getval(t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.read(t);case"Quantumult X":return $prefs.valueForKey(t);case"Node.js":return this.data=this.loaddata(),this.data[t];default:return this.data&&this.data[t]||null}}setval(t,e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.write(t,e);case"Quantumult X":return $prefs.setValueForKey(t,e);case"Node.js":return this.data=this.loaddata(),this.data[e]=t,this.writedata(),!0;default:return this.data&&this.data[e]||null}}initGotEnv(t){this.got=this.got?this.got:require("got"),this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,t&&(t.headers=t.headers?t.headers:{},t&&(t.headers=t.headers?t.headers:{},void 0===t.headers.cookie&&void 0===t.headers.Cookie&&void 0===t.cookieJar&&(t.cookieJar=this.ckjar)))}get(t,e=(()=>{})){switch(t.headers&&(delete t.headers["Content-Type"],delete t.headers["Content-Length"],delete t.headers["content-type"],delete t.headers["content-length"]),t.params&&(t.url+="?"+this.queryStr(t.params)),void 0===t.followRedirect||t.followRedirect||((this.isSurge()||this.isLoon())&&(t["auto-redirect"]=!1),this.isQuanX()&&(t.opts?t.opts.redirection=!1:t.opts={redirection:!1})),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(t,((t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),e(t,s,i)}));break;case"Quantumult X":this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then((t=>{const{statusCode:s,statusCode:i,headers:o,body:r,bodyBytes:a}=t;e(null,{status:s,statusCode:i,headers:o,body:r,bodyBytes:a},r,a)}),(t=>e(t&&t.error||"UndefinedError")));break;case"Node.js":let s=require("iconv-lite");this.initGotEnv(t),this.got(t).on("redirect",((t,e)=>{try{if(t.headers["set-cookie"]){const s=t.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),e.cookieJar=this.ckjar}}catch(t){this.logErr(t)}})).then((t=>{const{statusCode:i,statusCode:o,headers:r,rawBody:a}=t,n=s.decode(a,this.encoding);e(null,{status:i,statusCode:o,headers:r,rawBody:a,body:n},n)}),(t=>{const{message:i,response:o}=t;e(i,o,o&&s.decode(o.rawBody,this.encoding))}));break}}post(t,e=(()=>{})){const s=t.method?t.method.toLocaleLowerCase():"post";switch(t.body&&t.headers&&!t.headers["Content-Type"]&&!t.headers["content-type"]&&(t.headers["content-type"]="application/x-www-form-urlencoded"),t.headers&&(delete t.headers["Content-Length"],delete t.headers["content-length"]),void 0===t.followRedirect||t.followRedirect||((this.isSurge()||this.isLoon())&&(t["auto-redirect"]=!1),this.isQuanX()&&(t.opts?t.opts.redirection=!1:t.opts={redirection:!1})),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(t.headers=t.headers||{},Object.assign(t.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient[s](t,((t,s,i)=>{!t&&s&&(s.body=i,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),e(t,s,i)}));break;case"Quantumult X":t.method=s,this.isNeedRewrite&&(t.opts=t.opts||{},Object.assign(t.opts,{hints:!1})),$task.fetch(t).then((t=>{const{statusCode:s,statusCode:i,headers:o,body:r,bodyBytes:a}=t;e(null,{status:s,statusCode:i,headers:o,body:r,bodyBytes:a},r,a)}),(t=>e(t&&t.error||"UndefinedError")));break;case"Node.js":let i=require("iconv-lite");this.initGotEnv(t);const{url:o,...r}=t;this.got[s](o,r).then((t=>{const{statusCode:s,statusCode:o,headers:r,rawBody:a}=t,n=i.decode(a,this.encoding);e(null,{status:s,statusCode:o,headers:r,rawBody:a,body:n},n)}),(t=>{const{message:s,response:o}=t;e(s,o,o&&i.decode(o.rawBody,this.encoding))}));break}}time(t,e=null){const s=e?new Date(e):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}queryStr(t){let e="";for(const s in t){let i=t[s];null!=i&&""!==i&&("object"==typeof i&&(i=JSON.stringify(i)),e+=`${s}=${i}&`)}return e=e.substring(0,e.length-1),e}msg(e=t,s="",i="",o={}){const r=t=>{const{$open:e,$copy:s,$media:i,$mediaMime:o}=t;switch(typeof t){case void 0:return t;case"string":switch(this.getEnv()){case"Surge":case"Stash":default:return{url:t};case"Loon":case"Shadowrocket":return t;case"Quantumult X":return{"open-url":t};case"Node.js":return}case"object":switch(this.getEnv()){case"Surge":case"Stash":case"Shadowrocket":default:{const r={};let a=t.openUrl||t.url||t["open-url"]||e;a&&Object.assign(r,{action:"open-url",url:a});let n=t["update-pasteboard"]||t.updatePasteboard||s;if(n&&Object.assign(r,{action:"clipboard",text:n}),i){let t,e,s;if(i.startsWith("http"))t=i;else if(i.startsWith("data:")){const[t]=i.split(";"),[,o]=i.split(",");e=o,s=t.replace("data:","")}else{e=i,s=(t=>{const e={JVBERi0:"application/pdf",R0lGODdh:"image/gif",R0lGODlh:"image/gif",iVBORw0KGgo:"image/png","/9j/":"image/jpg"};for(var s in e)if(0===t.indexOf(s))return e[s];return null})(i)}Object.assign(r,{"media-url":t,"media-base64":e,"media-base64-mime":o??s})}return Object.assign(r,{"auto-dismiss":t["auto-dismiss"],sound:t.sound}),r}case"Loon":{const s={};let o=t.openUrl||t.url||t["open-url"]||e;o&&Object.assign(s,{openUrl:o});let r=t.mediaUrl||t["media-url"];return i?.startsWith("http")&&(r=i),r&&Object.assign(s,{mediaUrl:r}),console.log(JSON.stringify(s)),s}case"Quantumult X":{const o={};let r=t["open-url"]||t.url||t.openUrl||e;r&&Object.assign(o,{"open-url":r});let a=t["media-url"]||t.mediaUrl;i?.startsWith("http")&&(a=i),a&&Object.assign(o,{"media-url":a});let n=t["update-pasteboard"]||t.updatePasteboard||s;return n&&Object.assign(o,{"update-pasteboard":n}),console.log(JSON.stringify(o)),o}case"Node.js":return}default:return}};if(!this.isMute)switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:$notification.post(e,s,i,r(o));break;case"Quantumult X":$notify(e,s,i,r(o));break;case"Node.js":break}if(!this.isMuteLog){let t=["","==============📣系统通知📣=============="];t.push(e),s&&t.push(s),i&&t.push(i),console.log(t.join("\n")),this.logs=this.logs.concat(t)}}debug(...t){this.logLevels[this.logLevel]<=this.logLevels.debug&&(t.length>0&&(this.logs=[...this.logs,...t]),console.log(`${this.logLevelPrefixs.debug}${t.map((t=>t??String(t))).join(this.logSeparator)}`))}info(...t){this.logLevels[this.logLevel]<=this.logLevels.info&&(t.length>0&&(this.logs=[...this.logs,...t]),console.log(`${this.logLevelPrefixs.info}${t.map((t=>t??String(t))).join(this.logSeparator)}`))}warn(...t){this.logLevels[this.logLevel]<=this.logLevels.warn&&(t.length>0&&(this.logs=[...this.logs,...t]),console.log(`${this.logLevelPrefixs.warn}${t.map((t=>t??String(t))).join(this.logSeparator)}`))}error(...t){this.logLevels[this.logLevel]<=this.logLevels.error&&(t.length>0&&(this.logs=[...this.logs,...t]),console.log(`${this.logLevelPrefixs.error}${t.map((t=>t??String(t))).join(this.logSeparator)}`))}log(...t){t.length>0&&(this.logs=[...this.logs,...t]),console.log(t.map((t=>t??String(t))).join(this.logSeparator))}logErr(t,e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:this.log("",`❗️${this.name}, 错误!`,e,t);break;case"Node.js":this.log("",`❗️${this.name}, 错误!`,e,void 0!==t.message?t.message:t,t.stack);break}}wait(t){return new Promise((e=>setTimeout(e,t)))}done(t={}){const e=((new Date).getTime()-this.startTime)/1e3;switch(this.log("",`🔔${this.name}, 结束! 🕛 ${e} 秒`),this.log(),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:$done(t);break;case"Node.js":process.exit(1)}}}(t,e)}

