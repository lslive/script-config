/**
Title: Longfor 国补
Nomination / Category: Surge、QuantumultX、Loon、Shadowrocket、Node.js
Written by: lslive
Date: 2025-09-12
Draft Version: 0.1
Contact Info: https://github.com/lslive
Notes: 只测试过圈X，其它环境请自行尝试 电视卷，未开发其他卷包
*/

var _0xodM='jsjiami.com.v7';const _0x10b8f6=_0x95fa;(function(_0x3f1919,_0xf7562a,_0x488f04,_0x2c81a,_0x3f4364,_0x41b63e,_0x52e1b2){return _0x3f1919=_0x3f1919>>0x2,_0x41b63e='hs',_0x52e1b2='hs',function(_0x3bfe3e,_0x159ab7,_0x39a294,_0x3f9b53,_0x38c093){const _0x5c10c4=_0x95fa;_0x3f9b53='tfi',_0x41b63e=_0x3f9b53+_0x41b63e,_0x38c093='up',_0x52e1b2+=_0x38c093,_0x41b63e=_0x39a294(_0x41b63e),_0x52e1b2=_0x39a294(_0x52e1b2),_0x39a294=0x0;const _0x179e4f=_0x3bfe3e();while(!![]&&--_0x2c81a+_0x159ab7){try{_0x3f9b53=-parseInt(_0x5c10c4(0x272,'vDNK'))/0x1*(-parseInt(_0x5c10c4(0x262,'K8M6'))/0x2)+-parseInt(_0x5c10c4(0x264,'wKkw'))/0x3+parseInt(_0x5c10c4(0x1d8,'U4Nw'))/0x4+-parseInt(_0x5c10c4(0x25e,'mR6T'))/0x5+parseInt(_0x5c10c4(0x1da,'UCbQ'))/0x6+parseInt(_0x5c10c4(0x258,'D!l5'))/0x7+parseInt(_0x5c10c4(0x1ab,'6w$x'))/0x8;}catch(_0x1c2974){_0x3f9b53=_0x39a294;}finally{_0x38c093=_0x179e4f[_0x41b63e]();if(_0x3f1919<=_0x2c81a)_0x39a294?_0x3f4364?_0x3f9b53=_0x38c093:_0x3f4364=_0x38c093:_0x39a294=_0x38c093;else{if(_0x39a294==_0x3f4364['replace'](/[QTfXgnFJUbGrMdCwEVWN=]/g,'')){if(_0x3f9b53===_0x159ab7){_0x179e4f['un'+_0x41b63e](_0x38c093);break;}_0x179e4f[_0x52e1b2](_0x38c093);}}}}}(_0x488f04,_0xf7562a,function(_0x5b9997,_0x561edf,_0x5a4fc1,_0x3bd085,_0x506bf8,_0x321775,_0x320ff9){return _0x561edf='\x73\x70\x6c\x69\x74',_0x5b9997=arguments[0x0],_0x5b9997=_0x5b9997[_0x561edf](''),_0x5a4fc1='\x72\x65\x76\x65\x72\x73\x65',_0x5b9997=_0x5b9997[_0x5a4fc1]('\x76'),_0x3bd085='\x6a\x6f\x69\x6e',(0x1baa2e,_0x5b9997[_0x3bd085](''));});}(0x314,0x99fc7,_0x4bee,0xc7),_0x4bee)&&(_0xodM=_0x10b8f6(0x1c2,'iSda'));const _0x81fc74=(function(){const _0x183528=_0x10b8f6,_0x303031={'getYK':function(_0x341d64,_0x30a38d){return _0x341d64!==_0x30a38d;},'VSENd':'dcmlU','LgaoO':_0x183528(0x233,'7kg(')};let _0x3299ed=!![];return function(_0x1229ef,_0x16bfe2){const _0x1e01cb=_0x183528;if(_0x303031[_0x1e01cb(0x243,'tzt0')](_0x303031[_0x1e01cb(0x1ac,'y4PI')],_0x303031[_0x1e01cb(0x1c1,'XuYb')])){const _0x34b3a9=_0x3299ed?function(){if(_0x16bfe2){const _0x1ecda9=_0x16bfe2['apply'](_0x1229ef,arguments);return _0x16bfe2=null,_0x1ecda9;}}:function(){};return _0x3299ed=![],_0x34b3a9;}else{if(_0x32e859){const _0x13440f=_0x3d4cb5[_0x1e01cb(0x1c5,'^WPU')](_0x78a8e3,arguments);return _0x193b65=null,_0x13440f;}}};}());(function(){const _0xd053f6=_0x10b8f6,_0x594dbd={'lvNoB':_0xd053f6(0x23f,'4T#p'),'yZNcl':_0xd053f6(0x1f3,'A$K!'),'aVSvB':_0xd053f6(0x1f2,'UCbQ'),'JIlRo':_0xd053f6(0x235,'jd@b'),'SYUOE':function(_0x46136c,_0x4f2f22){return _0x46136c!==_0x4f2f22;},'iBOVr':'WKVau','gyzho':'\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','xhRFJ':function(_0x328ec8,_0x4d08ee){return _0x328ec8(_0x4d08ee);},'MfwMh':'init','ngvIt':'chain','LNciH':function(_0x443881,_0x37b443){return _0x443881===_0x37b443;},'zjuTh':'tnyoF','qOkXX':function(_0x9418c,_0x5c6c5c){return _0x9418c(_0x5c6c5c);},'aftzk':function(_0x1a1c30){return _0x1a1c30();}};_0x81fc74(this,function(){const _0x2bdbbe=_0xd053f6,_0x7b80d5={'BKRPG':_0x594dbd['lvNoB'],'ZzwxM':_0x594dbd[_0x2bdbbe(0x269,'1kwi')],'kTxlv':_0x594dbd[_0x2bdbbe(0x26d,'NN](')],'IetAN':_0x594dbd[_0x2bdbbe(0x206,'vDNK')]};if(_0x594dbd[_0x2bdbbe(0x1eb,'UPk&')](_0x594dbd['iBOVr'],_0x2bdbbe(0x22b,'ujFN')))while(!![]){}else{const _0x715e0a=new RegExp('function\x20*\x5c(\x20*\x5c)'),_0x3fd956=new RegExp(_0x594dbd['gyzho'],'i'),_0x5979e3=_0x594dbd[_0x2bdbbe(0x255,'y4PI')](_0x116f78,_0x594dbd[_0x2bdbbe(0x263,'@OwX')]);if(!_0x715e0a['test'](_0x5979e3+_0x594dbd[_0x2bdbbe(0x219,'1k^y')])||!_0x3fd956[_0x2bdbbe(0x204,'QT2y')](_0x5979e3+_0x2bdbbe(0x225,'ujFN'))){if(_0x594dbd['LNciH'](_0x2bdbbe(0x1a8,'agJx'),_0x594dbd['zjuTh']))_0x594dbd[_0x2bdbbe(0x1cd,'xUU)')](_0x5979e3,'0');else try{return{'Content-Type':'application/json','User-Agent':_0x1960ee[_0x2bdbbe(0x1c9,'yqiN')],'channelNo':_0x36ad22[_0x7b80d5[_0x2bdbbe(0x1d7,'#)9m')]],'token':_0x3552e5[_0x7b80d5['ZzwxM']],'Cookie':_0x33e143[_0x7b80d5[_0x2bdbbe(0x1e5,'NN](')]],'Referer':_0x2bdbbe(0x1e7,'UEt['),'appNo':_0x4d17fa[_0x2bdbbe(0x247,'PA(T')]};}catch(_0x571a59){return _0x36cbe8[_0x2bdbbe(0x1d3,'1k^y')](_0x7b80d5[_0x2bdbbe(0x1f0,'UEt[')]),{};}}else _0x594dbd[_0x2bdbbe(0x1f4,'Qubt')](_0x116f78);}})();}());const _0x106c29=(function(){const _0x4ad870=_0x10b8f6,_0xddddbf={'EUcTC':function(_0x4acce8,_0x331b9f){return _0x4acce8!==_0x331b9f;},'qditZ':'lRuam','sQuDX':_0x4ad870(0x1ec,'UEt['),'OhOKM':_0x4ad870(0x251,'ujFN'),'kBEpq':'token','IJjSV':_0x4ad870(0x1e9,'#)9m'),'qWDRR':function(_0x237406,_0x433497){return _0x237406===_0x433497;},'zpAXZ':'OhmDq'};let _0x44dd95=!![];return function(_0x28466f,_0x322538){const _0x3dd924=_0x4ad870,_0x47cc4a={'zYSUl':'UserAgent','KRuBw':_0xddddbf[_0x3dd924(0x1ed,'LJ(o')],'OROHK':_0xddddbf['kBEpq'],'gihPk':_0xddddbf[_0x3dd924(0x1c8,'cS[F')],'dOINI':_0x3dd924(0x259,'6w$x')};if(_0xddddbf[_0x3dd924(0x268,'mR6T')]('UiWYh',_0xddddbf[_0x3dd924(0x1f6,'^WPU')]))return{'Content-Type':_0x3dd924(0x205,'V5VY'),'User-Agent':_0x243588[_0x47cc4a[_0x3dd924(0x1b0,'vDNK')]],'channelNo':_0x4567a0[_0x47cc4a['KRuBw']],'token':_0x403a8d[_0x47cc4a[_0x3dd924(0x275,'K8M6')]],'Cookie':_0x15e102[_0x47cc4a[_0x3dd924(0x23a,'cS[F')]],'Referer':'https://scene.cup.com.cn/gsp_front/2025/index?appNo=YJHX044025048&channelNo=Q000101','appNo':_0x363564[_0x47cc4a[_0x3dd924(0x22d,'QT2y')]]};else{const _0x4e9b23=_0x44dd95?function(){const _0x2d7ded=_0x3dd924;if(_0xddddbf[_0x2d7ded(0x25b,'wKkw')](_0xddddbf[_0x2d7ded(0x1f9,'A5Pw')],_0xddddbf[_0x2d7ded(0x1be,'iSda')])){if(_0x322538){const _0x4996ef=_0x322538[_0x2d7ded(0x1fb,'vDNK')](_0x28466f,arguments);return _0x322538=null,_0x4996ef;}}else _0x5212bb[_0x2d7ded(0x201,'JAvh')](_0x2d7ded(0x26a,'WEvu')+_0x5d4988[_0x2d7ded(0x221,'(X7s')]);}:function(){};return _0x44dd95=![],_0x4e9b23;}};}()),_0x3ace36=_0x106c29(this,function(){const _0x39002e=_0x10b8f6,_0x11ec43={'lIXSJ':_0x39002e(0x1e4,'A5Pw'),'aZGxU':function(_0x189266,_0x3b33bf){return _0x189266===_0x3b33bf;},'MSGsl':'function','dYDtr':_0x39002e(0x1d2,'6w$x'),'xOubM':_0x39002e(0x267,'UCbQ'),'iyBru':_0x39002e(0x23b,'UPk&'),'gUYlD':_0x39002e(0x1f5,'9jFf'),'uoxqM':'table','VnMWl':function(_0x5b46b1,_0x4e0efa){return _0x5b46b1<_0x4e0efa;}},_0x4aa9b6=typeof window!==_0x11ec43['lIXSJ']?window:_0x11ec43['aZGxU'](typeof process,'object')&&typeof require===_0x11ec43[_0x39002e(0x1ea,'1k^y')]&&_0x11ec43[_0x39002e(0x1b2,'U4Nw')](typeof global,_0x39002e(0x1a6,'NN]('))?global:this,_0x838fe0=_0x4aa9b6['console']=_0x4aa9b6['console']||{},_0x1de9bf=[_0x11ec43['dYDtr'],_0x11ec43[_0x39002e(0x1ee,'D!l5')],_0x39002e(0x248,'cS[F'),_0x11ec43['iyBru'],_0x11ec43['gUYlD'],_0x11ec43[_0x39002e(0x213,'PA(T')],_0x39002e(0x228,'wKkw')];for(let _0x7badc7=0x0;_0x11ec43['VnMWl'](_0x7badc7,_0x1de9bf[_0x39002e(0x245,'UCbQ')]);_0x7badc7++){const _0x1f62fb=_0x106c29['constructor']['prototype']['bind'](_0x106c29),_0x592938=_0x1de9bf[_0x7badc7],_0x69a44d=_0x838fe0[_0x592938]||_0x1f62fb;_0x1f62fb['__proto__']=_0x106c29[_0x39002e(0x1f1,'UPk&')](_0x106c29),_0x1f62fb[_0x39002e(0x214,'UPk&')]=_0x69a44d[_0x39002e(0x240,'*2wH')][_0x39002e(0x20e,'iSda')](_0x69a44d),_0x838fe0[_0x592938]=_0x1f62fb;}});_0x3ace36();const $=new Env(_0x10b8f6(0x1fd,'vDNK')),ckName='YSF-GB-CK';function _0x95fa(_0x20be20,_0x1e6b45){const _0x4d10a2=_0x4bee();return _0x95fa=function(_0x3ace36,_0x106c29){_0x3ace36=_0x3ace36-0x1a5;let _0x1db1a4=_0x4d10a2[_0x3ace36];if(_0x95fa['DMCWme']===undefined){var _0x116f78=function(_0x242f50){const _0x214278='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x534710='',_0x3b1d1e='';for(let _0x186aed=0x0,_0x4671e7,_0x2d64f7,_0x1d3f47=0x0;_0x2d64f7=_0x242f50['charAt'](_0x1d3f47++);~_0x2d64f7&&(_0x4671e7=_0x186aed%0x4?_0x4671e7*0x40+_0x2d64f7:_0x2d64f7,_0x186aed++%0x4)?_0x534710+=String['fromCharCode'](0xff&_0x4671e7>>(-0x2*_0x186aed&0x6)):0x0){_0x2d64f7=_0x214278['indexOf'](_0x2d64f7);}for(let _0x37021a=0x0,_0x547fc1=_0x534710['length'];_0x37021a<_0x547fc1;_0x37021a++){_0x3b1d1e+='%'+('00'+_0x534710['charCodeAt'](_0x37021a)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x3b1d1e);};const _0x95fa44=function(_0x4a0a03,_0xbec153){let _0x1a9cc3=[],_0xb3dfb7=0x0,_0x395749,_0x285a63='';_0x4a0a03=_0x116f78(_0x4a0a03);let _0x1b2876;for(_0x1b2876=0x0;_0x1b2876<0x100;_0x1b2876++){_0x1a9cc3[_0x1b2876]=_0x1b2876;}for(_0x1b2876=0x0;_0x1b2876<0x100;_0x1b2876++){_0xb3dfb7=(_0xb3dfb7+_0x1a9cc3[_0x1b2876]+_0xbec153['charCodeAt'](_0x1b2876%_0xbec153['length']))%0x100,_0x395749=_0x1a9cc3[_0x1b2876],_0x1a9cc3[_0x1b2876]=_0x1a9cc3[_0xb3dfb7],_0x1a9cc3[_0xb3dfb7]=_0x395749;}_0x1b2876=0x0,_0xb3dfb7=0x0;for(let _0x211308=0x0;_0x211308<_0x4a0a03['length'];_0x211308++){_0x1b2876=(_0x1b2876+0x1)%0x100,_0xb3dfb7=(_0xb3dfb7+_0x1a9cc3[_0x1b2876])%0x100,_0x395749=_0x1a9cc3[_0x1b2876],_0x1a9cc3[_0x1b2876]=_0x1a9cc3[_0xb3dfb7],_0x1a9cc3[_0xb3dfb7]=_0x395749,_0x285a63+=String['fromCharCode'](_0x4a0a03['charCodeAt'](_0x211308)^_0x1a9cc3[(_0x1a9cc3[_0x1b2876]+_0x1a9cc3[_0xb3dfb7])%0x100]);}return _0x285a63;};_0x95fa['PKzjkK']=_0x95fa44,_0x20be20=arguments,_0x95fa['DMCWme']=!![];}const _0x81fc74=_0x4d10a2[0x0],_0x3d314f=_0x3ace36+_0x81fc74,_0x4bee34=_0x20be20[_0x3d314f];return!_0x4bee34?(_0x95fa['cUTXOd']===undefined&&(_0x95fa['cUTXOd']=!![]),_0x1db1a4=_0x95fa['PKzjkK'](_0x1db1a4,_0x106c29),_0x20be20[_0x3d314f]=_0x1db1a4):_0x1db1a4=_0x4bee34,_0x1db1a4;},_0x95fa(_0x20be20,_0x1e6b45);}let userCookie=$[_0x10b8f6(0x1e1,'Qubt')](ckName);const urlYSF=_0x10b8f6(0x1b9,'Qubt');(function(){const _0x1aa7ee=_0x10b8f6,_0x32fb65={'fuCBu':function(_0x3e20f6,_0x585aec){return _0x3e20f6!==_0x585aec;},'eIzQW':_0x1aa7ee(0x1e8,'agJx'),'NsDSP':_0x1aa7ee(0x1dc,'cS[F'),'ANSyV':function(_0x5c085d,_0x8da66a){return _0x5c085d===_0x8da66a;},'xcZIx':'function'},_0xfe9968=_0x32fb65[_0x1aa7ee(0x260,'jd@b')](typeof window,_0x32fb65[_0x1aa7ee(0x216,'Qubt')])?window:typeof process===_0x32fb65[_0x1aa7ee(0x20c,'V5VY')]&&_0x32fb65[_0x1aa7ee(0x244,'W*Xz')](typeof require,_0x32fb65[_0x1aa7ee(0x1b6,'@OwX')])&&_0x32fb65[_0x1aa7ee(0x207,'6YhW')](typeof global,_0x32fb65[_0x1aa7ee(0x1c6,'xUU)')])?global:this;_0xfe9968[_0x1aa7ee(0x239,'agJx')](_0x116f78,0x7d0);}());function headerData(){const _0x339707=_0x10b8f6,_0x52c8b4={'RiKgb':'channelNo','YLykD':'Cookie','aOGSA':_0x339707(0x1df,'ujFN'),'PwkLZ':_0x339707(0x203,'agJx')};try{return{'Content-Type':_0x339707(0x21c,'D!l5'),'User-Agent':userCookie[_0x339707(0x26c,'tzt0')],'channelNo':userCookie[_0x52c8b4[_0x339707(0x1c7,'ujFN')]],'token':userCookie[_0x339707(0x21a,'yqiN')],'Cookie':userCookie[_0x52c8b4['YLykD']],'Referer':'https://scene.cup.com.cn/gsp_front/2025/index?appNo=YJHX044025048&channelNo=Q000101','appNo':userCookie[_0x52c8b4['aOGSA']]};}catch(_0x1d82f0){if(_0x52c8b4['PwkLZ']===_0x52c8b4[_0x339707(0x1af,'yqiN')])return console['log'](_0x339707(0x25c,'UCbQ')),{};else{const _0x1c191f=_0x5c2189[_0x339707(0x1e3,'UCbQ')](_0x32da62,arguments);return _0x39344e=null,_0x1c191f;}}}function getCookie(){const _0x557fe5=_0x10b8f6,_0x1fc4b9={'WRzJI':_0x557fe5(0x241,'xUU)'),'sVDTf':_0x557fe5(0x24c,'^WPU'),'iaSHg':_0x557fe5(0x208,'QT2y'),'uxMFi':_0x557fe5(0x1d5,'vDNK'),'LalyH':_0x557fe5(0x227,'QT2y'),'SZNPl':_0x557fe5(0x24a,'@OwX'),'VZlED':function(_0x10ce82,_0x46457a){return _0x10ce82&&_0x46457a;},'FNryj':_0x557fe5(0x1bc,'QT2y'),'OvNCI':_0x557fe5(0x25f,'UCbQ')};if($request&&$request[_0x557fe5(0x21e,'%U7z')]!=_0x557fe5(0x22a,'WEvu')){const _0x2e9f70=$request[_0x1fc4b9[_0x557fe5(0x231,'JAvh')]][_0x1fc4b9[_0x557fe5(0x274,'Qubt')]],_0x397415=$request['headers'][_0x1fc4b9['iaSHg']],_0x1e3660=$request[_0x1fc4b9[_0x557fe5(0x23e,'UPk&')]][_0x1fc4b9['uxMFi']],_0x3ee49b=$request[_0x1fc4b9['WRzJI']][_0x1fc4b9[_0x557fe5(0x246,'&*Mo')]],_0x4612e3=$request[_0x1fc4b9[_0x557fe5(0x250,'4T#p')]][_0x1fc4b9[_0x557fe5(0x26f,'A$K!')]];_0x1fc4b9[_0x557fe5(0x21f,'WEvu')](_0x2e9f70,_0x397415)&&_0x1e3660?($[_0x557fe5(0x26b,'K8M6')]({'token':_0x2e9f70,'UserAgent':_0x397415,'Cookie':_0x1e3660,'channelNo':_0x3ee49b,'appNo':_0x4612e3},ckName),$[_0x557fe5(0x224,'xUU)')]($['name'],'',_0x1fc4b9[_0x557fe5(0x1fa,'vDNK')])):$[_0x557fe5(0x1cf,'cS[F')]($[_0x557fe5(0x212,'ujFN')],'',_0x1fc4b9[_0x557fe5(0x237,'@OwX')]);}$[_0x557fe5(0x1ff,'6w$x')]();}async function couponAcquire(_0x3d69d5){const _0x598c54=_0x10b8f6,_0x2e9dee={'oqVFh':function(_0x16b80f,_0x409b09){return _0x16b80f(_0x409b09);},'kCTqA':function(_0x291afa){return _0x291afa();},'eERlS':function(_0x59237f,_0x4a89d5){return _0x59237f===_0x4a89d5;},'ABnXD':function(_0x2bdbd5,_0x350a15){return _0x2bdbd5!==_0x350a15;},'KQRTW':'FqlTS','sBSOa':function(_0x21636f,_0x53f421){return _0x21636f===_0x53f421;},'SkjZB':_0x598c54(0x1c3,'W*Xz')},_0x3cca7c=_0x2e9dee[_0x598c54(0x1d1,'wKkw')](headerData),_0x583943=_0x598c54(0x1b1,'77Fx')+_0x3d69d5+'\x22,\x22activityId\x22:null,\x22engGrade\x22:null,\x22coordType\x22:\x22gcj02ll\x22,\x22gpsAreaCode\x22:\x22610113\x22}',_0x5f0c36={'url':urlYSF,'headers':_0x3cca7c,'body':_0x583943},_0x2c5ad0=await $[_0x598c54(0x229,'6w$x')][_0x598c54(0x202,'iSda')](_0x5f0c36);if(_0x2e9dee[_0x598c54(0x261,'jw3O')](_0x2c5ad0[_0x598c54(0x23d,'7kg(')],0xc8)){if(_0x2e9dee[_0x598c54(0x222,'jd@b')]('VNAqg',_0x2e9dee[_0x598c54(0x249,'^WPU')]))$[_0x598c54(0x230,'y4PI')](_0x598c54(0x25d,'cS[F')+_0x2c5ad0['body']);else{if(_0xedcd9){const _0x134eb4=_0xcfe82c[_0x598c54(0x1b5,'Qubt')](_0x405c42,arguments);return _0x21651a=null,_0x134eb4;}}}else _0x2e9dee['sBSOa'](_0x598c54(0x236,'XuYb'),_0x2e9dee[_0x598c54(0x22f,'*2wH')])?sTLPIu[_0x598c54(0x25a,'Ed&z')](_0x7eb57,'0'):$[_0x598c54(0x1a9,'B0P5')](_0x598c54(0x257,'LJ(o')+_0x2c5ad0['statusCode']+'\x0a'+_0x2c5ad0[_0x598c54(0x1e0,'W*Xz')]);}(async()=>{const _0x1b2cb3=_0x10b8f6,_0x2e71e4={'IGKFk':_0x1b2cb3(0x1c0,'#)9m'),'YsqFw':function(_0x20b67a,_0x431ddd){return _0x20b67a!=_0x431ddd;},'WFxYV':_0x1b2cb3(0x20b,'@OwX'),'hEzGl':function(_0x487179,_0x193281){return _0x487179!==_0x193281;},'RBcFA':_0x1b2cb3(0x254,'UPk&'),'WXnXG':'A03','LuiFt':_0x1b2cb3(0x273,'cS[F'),'hTfkr':_0x1b2cb3(0x26e,'V5VY'),'vceAf':'A0402','KLIWw':_0x1b2cb3(0x223,'Qubt'),'RnANG':_0x1b2cb3(0x232,'(X7s'),'QIKAn':'A08','swNWf':_0x1b2cb3(0x218,'V5VY'),'PRKdw':'A10','ufbeq':_0x1b2cb3(0x20d,'vDNK'),'kUhLa':'A12','XfHHC':'TqnzK','Nqcuh':function(_0x738370,_0x539ce4){return _0x738370(_0x539ce4);}};if(_0x2e71e4['YsqFw'](typeof $request,_0x2e71e4[_0x1b2cb3(0x1ce,'QT2y')])){if(_0x2e71e4[_0x1b2cb3(0x1d0,'1kwi')](_0x2e71e4['RBcFA'],_0x2e71e4[_0x1b2cb3(0x21d,'y4PI')]))_0x192162[_0x1b2cb3(0x265,'6w$x')]({'token':_0x192ae6,'UserAgent':_0x395022,'Cookie':_0x3bc82e,'channelNo':_0x40bfc4,'appNo':_0x4b6929},_0x5e9145),_0x4e8b91['msg'](_0xe08e9[_0x1b2cb3(0x1aa,'Qubt')],'',_0x2e71e4['IGKFk']);else{getCookie();return;}}if(!userCookie){$['log'](_0x1b2cb3(0x1e6,'9jFf')),$['done']();return;}const _0x1c4a91=[_0x1b2cb3(0x24b,'1kwi'),_0x1b2cb3(0x1b3,'(X7s'),_0x2e71e4['WXnXG'],_0x2e71e4[_0x1b2cb3(0x271,'NN](')],_0x2e71e4[_0x1b2cb3(0x200,'^Ahl')],_0x2e71e4[_0x1b2cb3(0x1db,'Qubt')],_0x2e71e4[_0x1b2cb3(0x234,'ujFN')],_0x1b2cb3(0x1de,'(X7s'),_0x2e71e4[_0x1b2cb3(0x1f8,'PA(T')],_0x2e71e4['QIKAn'],_0x2e71e4[_0x1b2cb3(0x20f,'6w$x')],_0x2e71e4['PRKdw'],_0x2e71e4[_0x1b2cb3(0x256,'77Fx')],_0x2e71e4[_0x1b2cb3(0x22c,'agJx')]];for(let _0x4ceb61=0x0;_0x4ceb61<0xa;_0x4ceb61++){for(let _0x287aaa of _0x1c4a91){if(_0x2e71e4[_0x1b2cb3(0x1ba,'y4PI')](_0x1b2cb3(0x1bd,'mR6T'),_0x2e71e4[_0x1b2cb3(0x1fc,'%U7z')]))debugger;else await _0x2e71e4['Nqcuh'](couponAcquire,_0x287aaa);}}})()[_0x10b8f6(0x24e,'iSda')](()=>{const _0x8e8cd5=_0x10b8f6;$[_0x8e8cd5(0x1b8,'WEvu')]();});function _0x4bee(){const _0x3db1f1=(function(){return[_0xodM,'gMjTswjJniaFMmiN.dcGVoTmbCG.fEQvEg7rUXWU==','4PMr77UxcoIVNoAYSEwMGoI3QSkApG','WQf3WR/cPvCIdSk7s8kucSo+','emkYFCoFsG','q3msWRddQq','WPddOgfyW7G','FSo06iYd5y+L5AAB6lA7776p6k6t6yw65Pwo6i+Z5yYT','4PYDW4JORQlMS4JMIyVLIyqvya','dmk3W4aQj8kwc2hdMcuvuui','6zsK6k2q6iYd5y+L56+u5yQUW4alW5JcLs3cNUwNMUI2Ra','FhddI8oCWQ4','hgRcHSomWRy','gmkSnfxdQConW7dcUWBdJCkXuW','hSopWOH7WPG','W6tcGtC7WOLCW7ipW4BcIML+uq','aSkNECo7vSofpa','qxeJ','sSoEW4zD','tmoqWRvatq','FSkSFZbQ','4P2Sh+ISTEAZUEAjRowkN8oXuW','u8o9DW7cRCkAW5e','WR08WPJcKHy8kSoJcW','WOeFWR/dSKW','cdaYlCkR','CLHIl8oR','W4pdVxTlBq','WQW8WOxdGNO','WONdGCkklcdcJsC','wCoyyCk6AG','WPikW7/dLsi','B8oktcZcLq','FKCpWPhdOW','WO8RWOBdOw3dUa','WO3cT1BcNcdcJc/cTCoqWPCpn30','qmkzW4zGWOi','jw8J','WO89W5BdPa','qmo7o8kGe8kEySkPvCkkeMek','W6GkcK93','CCkGb8oEma','x1BdUCk3WOG','WRtcUSoLwcG','W4ldLmkDksu','WPv8W73cKSkbW4PZW58cpCoQW6/cVmoEvNpcP8kWW5H8CCorWPxdPCkqBSkjWOfpW7hcLLtcGCoSW59vW5RdTc1eCxakaKRcSSkrjXZdLmkLW6fbWOhdISkXW7pcNYJdG8ksW6W0nCkMxSkJwtZcQK16WPJdS0ZcOJK5bmklB8ksWPZcSs7cL1ZcO8kynwZcL3xdVtdcKflcIh0VWOxcL8oFWO8yW6HNgWqSpxhdTa','kYvwkmo3','BZ7cLW','W5ZdUCk5juvjWRZcG1DwW6qx','WOaSW4VdRt0','k8okWQv/WOG','tYWLWP/dJG','dvdcRmoE','WOKOW4/dStCbFHJdReFcKmokWOiSWPBcMSofWOhdVSo/WOVdS8kSW6qEmG0qDY3dNrbCwcBdP8o/W44WdCkiWR4XWOjVu37cPSorlIxcVCodt8kV','W5yCnuz/','B20RWP3dQmkY','6iYl5y2r56Yz5yQuw8oqCmkzW4pcH+AjSEwlPVcqR5C','ACo2WP9Ova','e8kckCkkW5q','WQucW4pdJqLxpq','6i+W5y+056+I5yIlzSosW6ddLhNcGEAlLowiUpglNyi','ySknj8kfWOm','cSkGnSkNW61rumonWOZcGYVcMmk8rG','W4JcPSkgcJC','pSkFyhrK','WPDEmZddTa','AuG3pgy','W6hdNwZcSSoF','uCkIp8ozdq','WRhcVSoRzJmwWPBcL3C','WRVdLg9P'].concat((function(){return['hxa3W6m4','uSkrdSk6jmkjW5O','vNqyn24','W6VdGr/dVu4','DCkBmG','B8kZsXrQ','WR7dTLz9W7O','hCkTAG','w2ZdJq','s3fgfSoMeColASkKWRv8t33dQG','W7VdOSkHfYdcPq','jqeohsm','bwNdJMTI','E0OJySktW7VcVCk3W6NcMSoGiSon','W7CjgfrF','dmkoWOubWPJcRmkZmmoGWQKjWRFcRW','WPC/W57dGci','D8kkp8oVomkV','n0pcISk0CW','BZ7cKW','W5ldHfFcM8os','W4FcVmkJnq','WOy5W4/dQZDupW','oSksxvr8','xmopW4rFW5m','WRxdJcOVwmkPaIGb','WOSDWPtdQhG','4P6H6k+e5ysZ6i2k5y2Qx8oHW4m','W4xdPLzDw3pdTmk0WQuvWOJdGCowWOyKWQldUgOdwNH1rmoNW5e5jcdcM0b7Amogj8oKFmkXWOTXWRzvbWZcMSkiECo/fSkqW6JdGHOEbZxdTgpcJSo5kItdL8oVWPfwWPBcP8o/sSotr21gE8k4W6FcNhPTBmkqn8k6','qCkzW5TQWQldM8kGW6ldRG','be3dS1bmW5G','ELddRCkZWQ8','WPhcO8oqWP4/','W4FdKuvOra','WR7cSgDGWR4','W6WbW7ldVY0','6zsd6k+Q6iY/5y2i566L5yIUASoOCSkeWPzn5AsX6lEO','W6tdT1zSzG','WQdcK8oRWRu','FSoqW5TyW4pdUW','vw1hgSoP','WOa6W4/dUY8','WOHlgmkyW4WlW4VdP8oo','WOXEaGtdLW','W7hcM3H7cmo0xaSrnf1KW7e','rZiLWRFdIW','WRhdHIC+za','W77dG8k8bsm','W5NdVCk+eda','AWXPbmos','5lIP6zwN5lIwxowAToIIPq','WOqQWPpcHYmZ','fCkTy8o0','sCkGhmk7jq','j8o6W7e','emk8l8k6','z8k+W7PdWOG','W4JdOHtdKa','khb2CCoXpSoyW7TzWQDlnSoDW58RW6u','W7ldHmkIlIy','dbGrjri','W6NdTaldLJxdVNJcL8oeWPy','pufZASor','h0BcUSo1WOS','jSohWPTtWPBcTsFdSSoy','b3nctSoi','W7NcVmo/','aSk6mSkQ','aSk1q8ogqW','6iYj5y6p56YX5yIXumk9WPBdTYJcO+AkHowkUpcuNla','E2ddHSoxW7e'].concat((function(){return['W53dLuRcSa','ydmCWOJdGq','WRBcLCowWQuiqrPo','hmohW7b0mW','WOqvW4hdKbm','W5vWW5tcVdNcTmo0W5NcL8kmWO3cOW','cda/','wwtdNmkjWRC','WPdcOSoLCrW','WOlcRfPcWP3dLG','W7u+W7FdSqL5nSkGtCkPbSkqWP8uW6K8','W6WBleDs','xG9vjmo+zq','p2xcRSo+oa','g8oJW5NcU8kx','tghdGCoG','w0FdPSogWP8','WQbSWO4','sKGu','W5RdMLFcOmoj','jhmJ','W5/dRWBdINBdMNpcVmof','WQhdH2nVW54','gCk2ECoH','jM/cLSoYm07cMa','W6tdV3hcTmoi','x8kIW5DdWQu','W5JdIc7dQLe','E0SKz8kqW7/cUmkbW5lcNCophCo9','kCo4W4pcJCkS','W5i2ka','hmohW6XphW','BZ7cKG','hmkaD01L','W7JdUg7cGSok','wu7OJl/LJyJLP6ROTlVVVkxORBdPH5dMLz/OJyJLJ74','zmkylSkeWQ8','hmoFWRf1WRK','sCoOWPP3Cq','r8ksW4TgWQRdHSkRW7xdVmozWOu','F8kbpCoAma','WQFcImo3WR4i','iZCVoq','iCkZB1DckuT4W5lcJG','WPxcQmo/WPSZ','e2/cM8k0sHBcN8oZEW','dSo8W7RcO8kCB8kGW7O','t14sc1pcQ8kh','vmkGdCoSaG','WO8QWONcUrW','W6tcNCkunsK','uCoAW5PuW57dTG','hGmYpMm','DcWuWRFdOW','CCkgm8oL','WR1/eqJdMG','mSozWO94WP8','rSogaa','WOjbkdNdOW','sb7dPCksW5FdLI3cV8oqW6VcHmk+mW','bSk6mSkVW6bqqa','yuSPWQZdPq','j1xcGmkqBq','W5ddNeBcU8otAXRdJL0','ESoOqGlcNa','fG5bxqFdQ8oexSkOW4KUW4tdJq','WO/cV8ogWRG2','W4yXhuDz','WPS4W77cHCkv'];}()));}()));}());_0x4bee=function(){return _0x3db1f1;};return _0x4bee();};function _0x116f78(_0x58fa9f){const _0x155d8f=_0x10b8f6,_0x483a41={'hWLAg':function(_0x2825c0,_0x53aa5a){return _0x2825c0===_0x53aa5a;},'finUn':_0x155d8f(0x21b,'LJ(o'),'LHXfY':function(_0x55d57d){return _0x55d57d();},'ZpAfB':function(_0x3edbb5,_0x597b54){return _0x3edbb5!==_0x597b54;},'UncNE':_0x155d8f(0x1ad,'cS[F'),'oPWQk':function(_0x10e641,_0x277f13){return _0x10e641!==_0x277f13;},'lXnWS':function(_0x23d935,_0x2497bc){return _0x23d935/_0x2497bc;},'tYYde':function(_0x1d36d5,_0x2d7785){return _0x1d36d5===_0x2d7785;},'WRfqe':function(_0x5b843c,_0xb9befd){return _0x5b843c%_0xb9befd;},'tAuwI':_0x155d8f(0x270,'UEt['),'MImZd':function(_0x5c21ae,_0x332dce){return _0x5c21ae(_0x332dce);},'hUSwK':'headers','sXLAV':_0x155d8f(0x238,'mR6T'),'tetFT':'User-Agent','GDpnW':_0x155d8f(0x1bb,'Ed&z'),'LwBQR':'channelNo','TpsiD':_0x155d8f(0x1ef,'jd@b'),'IPWUL':_0x155d8f(0x1a5,'Ed&z')};function _0x3147db(_0x2bf1a6){const _0x3fd7fb=_0x155d8f;if(_0x483a41[_0x3fd7fb(0x1d6,'6YhW')](typeof _0x2bf1a6,_0x483a41[_0x3fd7fb(0x20a,'jw3O')])){const _0x1761f9=function(){while(!![]){}};return _0x483a41[_0x3fd7fb(0x242,'cS[F')](_0x1761f9);}else{if(_0x483a41[_0x3fd7fb(0x252,'K8M6')](_0x483a41[_0x3fd7fb(0x211,'(X7s')],_0x483a41['UncNE'])){const _0x1572c5=_0x24928e['apply'](_0x36834f,arguments);return _0x2f9cc3=null,_0x1572c5;}else{if(_0x483a41['oPWQk']((''+_0x483a41[_0x3fd7fb(0x1c4,'7kg(')](_0x2bf1a6,_0x2bf1a6))[_0x3fd7fb(0x1fe,'tzt0')],0x1)||_0x483a41['tYYde'](_0x483a41[_0x3fd7fb(0x215,'JAvh')](_0x2bf1a6,0x14),0x0)){if(_0x483a41[_0x3fd7fb(0x1b7,'PA(T')]('rfmwo',_0x483a41[_0x3fd7fb(0x209,'V5VY')]))debugger;else{const _0x3477fa=_0x47de15?function(){const _0x4fde72=_0x3fd7fb;if(_0x456ce9){const _0x4cc92e=_0x3db949[_0x4fde72(0x220,'*2wH')](_0x24552e,arguments);return _0x20d300=null,_0x4cc92e;}}:function(){};return _0x5cee56=![],_0x3477fa;}}else debugger;}}_0x483a41[_0x3fd7fb(0x24f,'Ed&z')](_0x3147db,++_0x2bf1a6);}try{if(_0x58fa9f){if(_0x483a41['tYYde'](_0x483a41[_0x155d8f(0x1d9,'y4PI')],_0x483a41['IPWUL']))return _0x3147db;else{const _0x443777=_0x398994[_0x483a41['hUSwK']][_0x483a41['sXLAV']],_0x3e1748=_0x1638b3[_0x483a41['hUSwK']][_0x483a41['tetFT']],_0x9107b0=_0x252832[_0x483a41[_0x155d8f(0x1ae,'1k^y')]][_0x483a41[_0x155d8f(0x1dd,'4T#p')]],_0x847d94=_0x2ba514[_0x483a41['hUSwK']][_0x483a41['LwBQR']],_0x420af6=_0x1a4dd6[_0x483a41[_0x155d8f(0x1e2,'7kg(')]]['appNo'];_0x443777&&_0x3e1748&&_0x9107b0?(_0x248250[_0x155d8f(0x1cc,'^Ahl')]({'token':_0x443777,'UserAgent':_0x3e1748,'Cookie':_0x9107b0,'channelNo':_0x847d94,'appNo':_0x420af6},_0xc1ef28),_0x548eb5[_0x155d8f(0x226,'B0P5')](_0x5c27ee[_0x155d8f(0x23c,'6YhW')],'',_0x155d8f(0x210,'y4PI'))):_0x369c61[_0x155d8f(0x266,'Ed&z')](_0x385b80[_0x155d8f(0x1ca,'wKkw')],'',_0x483a41[_0x155d8f(0x1cb,'B0P5')]);}}else _0x3147db(0x0);}catch(_0x3b0657){}}var version_ = 'jsjiami.com.v7';

function Env(e,t){class s{constructor(e){this.env=e}send(e,t="GET"){e="string"==typeof e?{url:e}:e;let s=this.get;"POST"===t&&(s=this.post);const i=new Promise(((t,i)=>{s.call(this,e,((e,s,o)=>{e?i(e):t(s)}))}));return e.timeout?((e,t=1e3)=>Promise.race([e,new Promise(((e,s)=>{setTimeout((()=>{s(new Error("请求超时"))}),t)}))]))(i,e.timeout):i}get(e){return this.send.call(this.env,e)}post(e){return this.send.call(this.env,e,"POST")}}return new class{constructor(e,t){this.logLevels={debug:0,info:1,warn:2,error:3},this.logLevelPrefixs={debug:"[DEBUG] ",info:"[INFO] ",warn:"[WARN] ",error:"[ERROR] "},this.logLevel="info",this.name=e,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.encoding="utf-8",this.startTime=(new Date).getTime(),Object.assign(this,t),this.log("",`🔔${this.name}, 开始!`)}getEnv(){return"undefined"!=typeof $environment&&$environment["surge-version"]?"Surge":"undefined"!=typeof $environment&&$environment["stash-version"]?"Stash":"undefined"!=typeof module&&module.exports?"Node.js":"undefined"!=typeof $task?"Quantumult X":"undefined"!=typeof $loon?"Loon":"undefined"!=typeof $rocket?"Shadowrocket":void 0}isNode(){return"Node.js"===this.getEnv()}isQuanX(){return"Quantumult X"===this.getEnv()}isSurge(){return"Surge"===this.getEnv()}isLoon(){return"Loon"===this.getEnv()}isShadowrocket(){return"Shadowrocket"===this.getEnv()}isStash(){return"Stash"===this.getEnv()}toObj(e,t=null){try{return JSON.parse(e)}catch{return t}}toStr(e,t=null,...s){try{return JSON.stringify(e,...s)}catch{return t}}getjson(e,t){let s=t;if(this.getdata(e))try{s=JSON.parse(this.getdata(e))}catch{}return s}setjson(e,t){try{return this.setdata(JSON.stringify(e),t)}catch{return!1}}getScript(e){return new Promise((t=>{this.get({url:e},((e,s,i)=>t(i)))}))}runScript(e,t){return new Promise((s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let o=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");o=o?1*o:20,o=t&&t.timeout?t.timeout:o;const[r,a]=i.split("@"),n={url:`http://${a}/v1/scripting/evaluate`,body:{script_text:e,mock_type:"cron",timeout:o},headers:{"X-Key":r,Accept:"*/*"},policy:"DIRECT",timeout:o};this.post(n,((e,t,i)=>s(i)))})).catch((e=>this.logErr(e)))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const e=this.path.resolve(this.dataFile),t=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(e),i=!s&&this.fs.existsSync(t);if(!s&&!i)return{};{const i=s?e:t;try{return JSON.parse(this.fs.readFileSync(i))}catch(e){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const e=this.path.resolve(this.dataFile),t=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(e),i=!s&&this.fs.existsSync(t),o=JSON.stringify(this.data);s?this.fs.writeFileSync(e,o):i?this.fs.writeFileSync(t,o):this.fs.writeFileSync(e,o)}}lodash_get(e,t,s){const i=t.replace(/\[(\d+)\]/g,".$1").split(".");let o=e;for(const e of i)if(o=Object(o)[e],void 0===o)return s;return o}lodash_set(e,t,s){return Object(e)!==e||(Array.isArray(t)||(t=t.toString().match(/[^.[\]]+/g)||[]),t.slice(0,-1).reduce(((e,s,i)=>Object(e[s])===e[s]?e[s]:e[s]=Math.abs(t[i+1])>>0==+t[i+1]?[]:{}),e)[t[t.length-1]]=s),e}getdata(e){let t=this.getval(e);if(/^@/.test(e)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(e),o=s?this.getval(s):"";if(o)try{const e=JSON.parse(o);t=e?this.lodash_get(e,i,""):t}catch(e){t=""}}return t}setdata(e,t){let s=!1;if(/^@/.test(t)){const[,i,o]=/^@(.*?)\.(.*?)$/.exec(t),r=this.getval(i),a=i?"null"===r?null:r||"{}":"{}";try{const t=JSON.parse(a);this.lodash_set(t,o,e),s=this.setval(JSON.stringify(t),i)}catch(t){const r={};this.lodash_set(r,o,e),s=this.setval(JSON.stringify(r),i)}}else s=this.setval(e,t);return s}getval(e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.read(e);case"Quantumult X":return $prefs.valueForKey(e);case"Node.js":return this.data=this.loaddata(),this.data[e];default:return this.data&&this.data[e]||null}}setval(e,t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.write(e,t);case"Quantumult X":return $prefs.setValueForKey(e,t);case"Node.js":return this.data=this.loaddata(),this.data[t]=e,this.writedata(),!0;default:return this.data&&this.data[t]||null}}initGotEnv(e){this.got=this.got?this.got:require("got").got,this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,e&&(e.headers=e.headers?e.headers:{},e&&(e.headers=e.headers?e.headers:{},void 0===e.headers.cookie&&void 0===e.headers.Cookie&&void 0===e.cookieJar&&(e.cookieJar=this.ckjar)))}get(e,t=(()=>{})){switch(e.headers&&(delete e.headers["Content-Type"],delete e.headers["Content-Length"],delete e.headers["content-type"],delete e.headers["content-length"]),e.params&&(e.url+="?"+this.queryStr(e.params)),void 0===e.followRedirect||e.followRedirect||((this.isSurge()||this.isLoon())&&(e["auto-redirect"]=!1),this.isQuanX()&&(e.opts?e.opts.redirection=!1:e.opts={redirection:!1})),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(e.headers=e.headers||{},Object.assign(e.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(e,((e,s,i)=>{!e&&s&&(s.body=i,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),t(e,s,i)}));break;case"Quantumult X":this.isNeedRewrite&&(e.opts=e.opts||{},Object.assign(e.opts,{hints:!1})),$task.fetch(e).then((e=>{const{statusCode:s,statusCode:i,headers:o,body:r,bodyBytes:a}=e;t(null,{status:s,statusCode:i,headers:o,body:r,bodyBytes:a},r,a)}),(e=>t(e&&e.error||"UndefinedError")));break;case"Node.js":let s=require("iconv-lite");this.initGotEnv(e),this.got(e).on("redirect",((e,t)=>{try{if(e.headers["set-cookie"]){const s=e.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),t.cookieJar=this.ckjar}}catch(e){this.logErr(e)}})).then((e=>{const{statusCode:i,statusCode:o,headers:r,rawBody:a}=e,n=s.decode(a,this.encoding);t(null,{status:i,statusCode:o,headers:r,rawBody:a,body:n},n)}),(e=>{const{message:i,response:o}=e;t(i,o,o&&s.decode(o.rawBody,this.encoding))}));break}}post(e,t=(()=>{})){const s=e.method?e.method.toLocaleLowerCase():"post";switch(e.body&&e.headers&&!e.headers["Content-Type"]&&!e.headers["content-type"]&&(e.headers["content-type"]="application/x-www-form-urlencoded"),e.headers&&(delete e.headers["Content-Length"],delete e.headers["content-length"]),void 0===e.followRedirect||e.followRedirect||((this.isSurge()||this.isLoon())&&(e["auto-redirect"]=!1),this.isQuanX()&&(e.opts?e.opts.redirection=!1:e.opts={redirection:!1})),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(e.headers=e.headers||{},Object.assign(e.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient[s](e,((e,s,i)=>{!e&&s&&(s.body=i,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),t(e,s,i)}));break;case"Quantumult X":e.method=s,this.isNeedRewrite&&(e.opts=e.opts||{},Object.assign(e.opts,{hints:!1})),$task.fetch(e).then((e=>{const{statusCode:s,statusCode:i,headers:o,body:r,bodyBytes:a}=e;t(null,{status:s,statusCode:i,headers:o,body:r,bodyBytes:a},r,a)}),(e=>t(e&&e.error||"UndefinedError")));break;case"Node.js":let i=require("iconv-lite");this.initGotEnv(e);const{url:o,...r}=e;this.got[s](o,r).then((e=>{const{statusCode:s,statusCode:o,headers:r,rawBody:a}=e,n=i.decode(a,this.encoding);t(null,{status:s,statusCode:o,headers:r,rawBody:a,body:n},n)}),(e=>{const{message:s,response:o}=e;t(s,o,o&&i.decode(o.rawBody,this.encoding))}));break}}time(e,t=null){const s=t?new Date(t):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let t in i)new RegExp("("+t+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?i[t]:("00"+i[t]).substr((""+i[t]).length)));return e}queryStr(e){let t="";for(const s in e){let i=e[s];null!=i&&""!==i&&("object"==typeof i&&(i=JSON.stringify(i)),t+=`${s}=${i}&`)}return t=t.substring(0,t.length-1),t}msg(t=e,s="",i="",o={}){const r=e=>{const{$open:t,$copy:s,$media:i,$mediaMime:o}=e;switch(typeof e){case void 0:return e;case"string":switch(this.getEnv()){case"Surge":case"Stash":default:return{url:e};case"Loon":case"Shadowrocket":return e;case"Quantumult X":return{"open-url":e};case"Node.js":return}case"object":switch(this.getEnv()){case"Surge":case"Stash":case"Shadowrocket":default:{const r={};let a=e.openUrl||e.url||e["open-url"]||t;a&&Object.assign(r,{action:"open-url",url:a});let n=e["update-pasteboard"]||e.updatePasteboard||s;n&&Object.assign(r,{action:"clipboard",text:n});let h=e.mediaUrl||e["media-url"]||i;if(h){let e,t;if(h.startsWith("http"));else if(h.startsWith("data:")){const[s]=h.split(";"),[,i]=h.split(",");e=i,t=s.replace("data:","")}else{e=h,t=(e=>{const t={JVBERi0:"application/pdf",R0lGODdh:"image/gif",R0lGODlh:"image/gif",iVBORw0KGgo:"image/png","/9j/":"image/jpg"};for(var s in t)if(0===e.indexOf(s))return t[s];return null})(h)}Object.assign(r,{"media-url":h,"media-base64":e,"media-base64-mime":o??t})}return Object.assign(r,{"auto-dismiss":e["auto-dismiss"],sound:e.sound}),r}case"Loon":{const s={};let o=e.openUrl||e.url||e["open-url"]||t;o&&Object.assign(s,{openUrl:o});let r=e.mediaUrl||e["media-url"]||i;return r&&Object.assign(s,{mediaUrl:r}),console.log(JSON.stringify(s)),s}case"Quantumult X":{const o={};let r=e["open-url"]||e.url||e.openUrl||t;r&&Object.assign(o,{"open-url":r});let a=e.mediaUrl||e["media-url"]||i;a&&Object.assign(o,{"media-url":a});let n=e["update-pasteboard"]||e.updatePasteboard||s;return n&&Object.assign(o,{"update-pasteboard":n}),console.log(JSON.stringify(o)),o}case"Node.js":return}default:return}};if(!this.isMute)switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:$notification.post(t,s,i,r(o));break;case"Quantumult X":$notify(t,s,i,r(o));break;case"Node.js":break}if(!this.isMuteLog){let e=["","==============📣系统通知📣=============="];e.push(t),s&&e.push(s),i&&e.push(i),console.log(e.join("\n")),this.logs=this.logs.concat(e)}}debug(...e){this.logLevels[this.logLevel]<=this.logLevels.debug&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.debug}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}info(...e){this.logLevels[this.logLevel]<=this.logLevels.info&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.info}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}warn(...e){this.logLevels[this.logLevel]<=this.logLevels.warn&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.warn}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}error(...e){this.logLevels[this.logLevel]<=this.logLevels.error&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.error}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}log(...e){e.length>0&&(this.logs=[...this.logs,...e]),console.log(e.map((e=>e??String(e))).join(this.logSeparator))}logErr(e,t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:this.log("",`❗️${this.name}, 错误!`,t,e);break;case"Node.js":this.log("",`❗️${this.name}, 错误!`,t,void 0!==e.message?e.message:e,e.stack);break}}wait(e){return new Promise((t=>setTimeout(t,e)))}done(e={}){const t=((new Date).getTime()-this.startTime)/1e3;switch(this.log("",`🔔${this.name}, 结束! 🕛 ${t} 秒`),this.log(),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:$done(e);break;case"Node.js":process.exit(1)}}}(e,t)}