/**
Title: 美的 签到打卡
Nomination / Category: QuanmuteX
Written by: lslive
Date: 2025-09-04
Draft Version: 0.1
Contact Info: https://github.com/lslive
Notes: 只测试过圈X，其它环境请自行尝试
*/

/***
const ckName = "Meidi";
const key = "Meidi_apikey";
*/

var _0xodX='jsjiami.com.v7';const _0x347fa0=_0x342b;if(function(_0x43b657,_0x2df8c1,_0x3dbb52,_0x15d49c,_0xb6a2f0,_0x21ff74,_0x455cf0){return _0x43b657=_0x43b657>>0x7,_0x21ff74='hs',_0x455cf0='hs',function(_0x46e035,_0x50504a,_0xc7ad35,_0x5ea85a,_0x23b298){const _0x412290=_0x342b;_0x5ea85a='tfi',_0x21ff74=_0x5ea85a+_0x21ff74,_0x23b298='up',_0x455cf0+=_0x23b298,_0x21ff74=_0xc7ad35(_0x21ff74),_0x455cf0=_0xc7ad35(_0x455cf0),_0xc7ad35=0x0;const _0x8d9d31=_0x46e035();while(!![]&&--_0x15d49c+_0x50504a){try{_0x5ea85a=parseInt(_0x412290(0x174,'*4Zq'))/0x1*(parseInt(_0x412290(0x17a,'K]Md'))/0x2)+parseInt(_0x412290(0x1c0,')R3%'))/0x3+-parseInt(_0x412290(0x1f7,'fi[b'))/0x4+-parseInt(_0x412290(0x1e0,'9bkl'))/0x5*(parseInt(_0x412290(0x1b9,'q[ID'))/0x6)+parseInt(_0x412290(0x1a8,'zSpO'))/0x7+-parseInt(_0x412290(0x181,'b1p%'))/0x8+parseInt(_0x412290(0x1fc,'q[ID'))/0x9*(parseInt(_0x412290(0x1da,'ZWb#'))/0xa);}catch(_0x100b34){_0x5ea85a=_0xc7ad35;}finally{_0x23b298=_0x8d9d31[_0x21ff74]();if(_0x43b657<=_0x15d49c)_0xc7ad35?_0xb6a2f0?_0x5ea85a=_0x23b298:_0xb6a2f0=_0x23b298:_0xc7ad35=_0x23b298;else{if(_0xc7ad35==_0xb6a2f0['replace'](/[DxpFSdXMJqwWtLPAfNQ=]/g,'')){if(_0x5ea85a===_0x50504a){_0x8d9d31['un'+_0x21ff74](_0x23b298);break;}_0x8d9d31[_0x455cf0](_0x23b298);}}}}}(_0x3dbb52,_0x2df8c1,function(_0x12559e,_0x56c1ac,_0x4e8ba8,_0x172265,_0xe6af14,_0x27832c,_0x45c8bc){return _0x56c1ac='\x73\x70\x6c\x69\x74',_0x12559e=arguments[0x0],_0x12559e=_0x12559e[_0x56c1ac](''),_0x4e8ba8='\x72\x65\x76\x65\x72\x73\x65',_0x12559e=_0x12559e[_0x4e8ba8]('\x76'),_0x172265='\x6a\x6f\x69\x6e',(0x1b9ec7,_0x12559e[_0x172265](''));});}(0x6400,0x5be6c,_0x199c,0xca),_0x199c){}const _0xb64a8d=(function(){const _0x206198={'YNzOn':function(_0x46346a,_0x57e63c){return _0x46346a!==_0x57e63c;},'QNJCq':'pRlTg','hIVGS':'CwFoq'};let _0x57cdaa=!![];return function(_0x525cc6,_0x5df260){const _0x2a5be3=_0x342b;if(_0x206198[_0x2a5be3(0x1a4,'Du]K')](_0x206198[_0x2a5be3(0x14f,')J#i')],_0x206198[_0x2a5be3(0x173,'1gr(')])){const _0x3106f8=_0x57cdaa?function(){if(_0x5df260){const _0x43f8aa=_0x5df260['apply'](_0x525cc6,arguments);return _0x5df260=null,_0x43f8aa;}}:function(){};return _0x57cdaa=![],_0x3106f8;}else{if(_0x3c7e0b){const _0x4ef8eb=_0x5a4e36['apply'](_0x1b5392,arguments);return _0x3a0c18=null,_0x4ef8eb;}}};}());function _0x342b(_0x2f3b55,_0x1020e8){const _0x2c72ac=_0x199c();return _0x342b=function(_0x1126af,_0x59e660){_0x1126af=_0x1126af-0x132;let _0x1a3866=_0x2c72ac[_0x1126af];if(_0x342b['IoymQp']===undefined){var _0x2a8609=function(_0x455857){const _0x1b2e5d='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x220a16='',_0x425e10='';for(let _0x2de92d=0x0,_0x17be4f,_0x407d53,_0x3eb35c=0x0;_0x407d53=_0x455857['charAt'](_0x3eb35c++);~_0x407d53&&(_0x17be4f=_0x2de92d%0x4?_0x17be4f*0x40+_0x407d53:_0x407d53,_0x2de92d++%0x4)?_0x220a16+=String['fromCharCode'](0xff&_0x17be4f>>(-0x2*_0x2de92d&0x6)):0x0){_0x407d53=_0x1b2e5d['indexOf'](_0x407d53);}for(let _0x87b7d1=0x0,_0x2fef2d=_0x220a16['length'];_0x87b7d1<_0x2fef2d;_0x87b7d1++){_0x425e10+='%'+('00'+_0x220a16['charCodeAt'](_0x87b7d1)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x425e10);};const _0x342ba0=function(_0xf9f1fd,_0x65c7d8){let _0x3461ba=[],_0x1dfa14=0x0,_0x58ac9a,_0x239062='';_0xf9f1fd=_0x2a8609(_0xf9f1fd);let _0x348f44;for(_0x348f44=0x0;_0x348f44<0x100;_0x348f44++){_0x3461ba[_0x348f44]=_0x348f44;}for(_0x348f44=0x0;_0x348f44<0x100;_0x348f44++){_0x1dfa14=(_0x1dfa14+_0x3461ba[_0x348f44]+_0x65c7d8['charCodeAt'](_0x348f44%_0x65c7d8['length']))%0x100,_0x58ac9a=_0x3461ba[_0x348f44],_0x3461ba[_0x348f44]=_0x3461ba[_0x1dfa14],_0x3461ba[_0x1dfa14]=_0x58ac9a;}_0x348f44=0x0,_0x1dfa14=0x0;for(let _0xf85a89=0x0;_0xf85a89<_0xf9f1fd['length'];_0xf85a89++){_0x348f44=(_0x348f44+0x1)%0x100,_0x1dfa14=(_0x1dfa14+_0x3461ba[_0x348f44])%0x100,_0x58ac9a=_0x3461ba[_0x348f44],_0x3461ba[_0x348f44]=_0x3461ba[_0x1dfa14],_0x3461ba[_0x1dfa14]=_0x58ac9a,_0x239062+=String['fromCharCode'](_0xf9f1fd['charCodeAt'](_0xf85a89)^_0x3461ba[(_0x3461ba[_0x348f44]+_0x3461ba[_0x1dfa14])%0x100]);}return _0x239062;};_0x342b['dCieVV']=_0x342ba0,_0x2f3b55=arguments,_0x342b['IoymQp']=!![];}const _0xb64a8d=_0x2c72ac[0x0],_0x55a992=_0x1126af+_0xb64a8d,_0x199c6a=_0x2f3b55[_0x55a992];return!_0x199c6a?(_0x342b['qIOVQS']===undefined&&(_0x342b['qIOVQS']=!![]),_0x1a3866=_0x342b['dCieVV'](_0x1a3866,_0x59e660),_0x2f3b55[_0x55a992]=_0x1a3866):_0x1a3866=_0x199c6a,_0x1a3866;},_0x342b(_0x2f3b55,_0x1020e8);}(function(){const _0x47bee1=_0x342b,_0x463fad={'jEjUn':function(_0x3f67c6,_0x278715){return _0x3f67c6===_0x278715;},'DLPpG':_0x47bee1(0x1a3,'q[ID'),'gLehL':_0x47bee1(0x1d5,'8$fo'),'eyXDr':'function\x20*\x5c(\x20*\x5c)','qOjrZ':function(_0x29c5e2,_0x1b9bf1){return _0x29c5e2(_0x1b9bf1);},'szjtn':function(_0x43f979,_0x367e81){return _0x43f979+_0x367e81;},'mOFEC':_0x47bee1(0x19b,'fi[b'),'UUnAV':function(_0x32e78f,_0x24557f){return _0x32e78f(_0x24557f);},'wstaz':function(_0x159590,_0x259edb){return _0x159590!==_0x259edb;},'QPcZY':'hIowb'};_0xb64a8d(this,function(){const _0xde4f06=_0x47bee1;if(_0x463fad['jEjUn'](_0x463fad[_0xde4f06(0x1eb,'Du]K')],_0x463fad['gLehL']))return _0x3504f7[_0xde4f06(0x19e,'37kP')](_0xde4f06(0x1d0,'fi[b'));else{const _0x5c958c=new RegExp(_0x463fad['eyXDr']),_0x295d52=new RegExp(_0xde4f06(0x1a2,')w0E'),'i'),_0xa732f=_0x463fad[_0xde4f06(0x185,'y(Jb')](_0x2a8609,_0xde4f06(0x18f,'dR1W'));if(!_0x5c958c[_0xde4f06(0x177,'y(Jb')](_0x463fad[_0xde4f06(0x179,'#6^c')](_0xa732f,_0xde4f06(0x168,'#6^c')))||!_0x295d52[_0xde4f06(0x155,'K]Md')](_0xa732f+_0x463fad[_0xde4f06(0x167,')KC[')]))_0x463fad[_0xde4f06(0x1f2,'bdBe')](_0xa732f,'0');else{if(_0x463fad['wstaz'](_0x463fad[_0xde4f06(0x1f0,'lC]r')],_0x463fad[_0xde4f06(0x1bb,'q[ID')])){const _0x2cd662=_0x1b6338['parse'](_0x42eca0[_0xde4f06(0x164,'AnoZ')]);_0x13cc8d[_0xde4f06(0x18b,'&]HJ')](_0xde4f06(0x1e3,'brEN')+_0x2cd662[_0xde4f06(0x1ac,'dR1W')]+_0xde4f06(0x1f6,'bRm7')+(_0x2cd662?.[_0xde4f06(0x1cd,'qdnt')]?.[_0xde4f06(0x1ca,'H0p&')]?.[_0xde4f06(0x1bd,'tYQ(')]||0x0));}else _0x2a8609();}}})();}());const _0x59e660=(function(){const _0x2c0ef9={'xdiRg':'iKWse'};let _0x5d0d02=!![];return function(_0x71ec6,_0x411ff3){const _0x33024e=_0x342b;if(_0x33024e(0x1d9,'bRm7')===_0x2c0ef9[_0x33024e(0x176,'fi[b')]){const _0x349073=_0x5d0d02?function(){const _0x5c828a=_0x33024e;if(_0x411ff3){const _0x46b249=_0x411ff3[_0x5c828a(0x1ad,'kg3f')](_0x71ec6,arguments);return _0x411ff3=null,_0x46b249;}}:function(){};return _0x5d0d02=![],_0x349073;}else{const _0x1f1196=_0x3461ba?function(){const _0x309234=_0x33024e;if(_0x82a7b1){const _0x31a941=_0x3a2164[_0x309234(0x160,'W0LP')](_0x284cd8,arguments);return _0x4bd60a=null,_0x31a941;}}:function(){};return _0xf85a89=![],_0x1f1196;}};}()),_0x1126af=_0x59e660(this,function(){const _0x5b5dbc=_0x342b,_0x109d51={'dHnqm':function(_0x57365e,_0x44a920){return _0x57365e!==_0x44a920;},'HtSfo':_0x5b5dbc(0x1ef,'$t@P'),'URiqR':function(_0x1cde77,_0x442a7a){return _0x1cde77===_0x442a7a;},'pfuOT':_0x5b5dbc(0x16f,'qdnt'),'PWitU':_0x5b5dbc(0x16d,'uYXN'),'ovkfR':function(_0x53d876,_0x31ce5f){return _0x53d876===_0x31ce5f;},'nodiu':_0x5b5dbc(0x1fd,'Cz(1'),'UZhCS':_0x5b5dbc(0x188,'1gr('),'CKGtZ':_0x5b5dbc(0x1f3,'h3xj'),'tGSIH':_0x5b5dbc(0x166,'$t@P'),'MxrkH':'exception','OXAxV':_0x5b5dbc(0x1d4,'mEyt'),'WNtgx':_0x5b5dbc(0x1fb,'Fyak')},_0x5d1553=_0x109d51[_0x5b5dbc(0x17e,'H0p&')](typeof window,_0x109d51['HtSfo'])?window:_0x109d51['URiqR'](typeof process,_0x109d51[_0x5b5dbc(0x1e1,'G#iI')])&&typeof require===_0x109d51[_0x5b5dbc(0x16e,'Du]K')]&&_0x109d51[_0x5b5dbc(0x1ee,'bRm7')](typeof global,_0x109d51[_0x5b5dbc(0x13f,'H0p&')])?global:this,_0x4d2419=_0x5d1553[_0x5b5dbc(0x1b4,')J#i')]=_0x5d1553[_0x5b5dbc(0x161,'37kP')]||{},_0x2dbdce=[_0x109d51[_0x5b5dbc(0x19c,'Cz(1')],_0x109d51['UZhCS'],_0x109d51[_0x5b5dbc(0x183,'H0p&')],_0x109d51['tGSIH'],_0x109d51[_0x5b5dbc(0x148,'#6^c')],_0x109d51[_0x5b5dbc(0x14a,'dR1W')],_0x5b5dbc(0x1cb,'8$fo')];for(let _0x1d6f24=0x0;_0x1d6f24<_0x2dbdce[_0x5b5dbc(0x194,'b1p%')];_0x1d6f24++){if(_0x109d51[_0x5b5dbc(0x137,'h3xj')](_0x109d51[_0x5b5dbc(0x191,'fi[b')],'hDoyh')){if(_0xffb11a){const _0x56f7da=_0x339723[_0x5b5dbc(0x1a6,'dR1W')](_0x5a7e4c,arguments);return _0x5c57bd=null,_0x56f7da;}}else{const _0x30e1c3=_0x59e660[_0x5b5dbc(0x1f8,')w0E')][_0x5b5dbc(0x154,'37kP')][_0x5b5dbc(0x13e,'Du]K')](_0x59e660),_0x4e32ca=_0x2dbdce[_0x1d6f24],_0x1f7f90=_0x4d2419[_0x4e32ca]||_0x30e1c3;_0x30e1c3[_0x5b5dbc(0x1e4,')KC[')]=_0x59e660[_0x5b5dbc(0x142,'rURv')](_0x59e660),_0x30e1c3[_0x5b5dbc(0x18a,'y(Jb')]=_0x1f7f90['toString'][_0x5b5dbc(0x1c6,'RB@^')](_0x1f7f90),_0x4d2419[_0x4e32ca]=_0x30e1c3;}}});_0x1126af();const $=new Env(_0x347fa0(0x198,'NB(t')),ckName=_0x347fa0(0x1c7,'8$fo'),key='Meidi_apikey';let userCookie=$[_0x347fa0(0x1d3,'b1p%')](ckName);async function signMeidi(){const _0x377beb=_0x347fa0,_0x1b7912={'gaUBW':function(_0x3ab7de,_0x2f904f){return _0x3ab7de===_0x2f904f;},'LQZQL':_0x377beb(0x184,'bRm7'),'Vnyfx':function(_0x4af81f){return _0x4af81f();}},_0x361400=_0x377beb(0x158,'gmYU'),_0x5da1c7={'Sec-Fetch-Dest':'empty','Connection':'keep-alive','Accept-Encoding':_0x377beb(0x1af,'37kP'),'Content-Type':'application/json','Sec-Fetch-Site':_0x377beb(0x152,'NDEv'),'Origin':_0x377beb(0x18c,'gmYU'),'Sec-Fetch-Mode':_0x377beb(0x1ea,'T85L'),'Host':_0x377beb(0x1c2,'lC]r'),'Referer':'https://weixin.midea.com/apps/h5-pro-wx-interaction-marketing/',...userCookie},_0x3887de=_0x377beb(0x189,'*4Zq');try{const _0x4d59f1=await $[_0x377beb(0x18e,'rURv')][_0x377beb(0x180,'1gr(')]({'url':_0x361400,'headers':_0x5da1c7,'body':_0x3887de});if(_0x1b7912[_0x377beb(0x169,'W0LP')](_0x4d59f1[_0x377beb(0x139,'IwIm')],0xc8)){const _0x4ae083=JSON[_0x377beb(0x1db,'8$fo')](_0x4d59f1[_0x377beb(0x17d,'Cz(1')]);$[_0x377beb(0x15e,'Fyak')](_0x377beb(0x1e3,'brEN')+_0x4ae083[_0x377beb(0x147,'bdBe')]+'\x20积分：'+(_0x4ae083?.[_0x377beb(0x1ae,'brEN')]?.[_0x377beb(0x1c4,'G#iI')]?.['points']||0x0));}else _0x377beb(0x144,'fi[b')!==_0x1b7912[_0x377beb(0x170,'1gr(')]?_0x382fc8[_0x377beb(0x1f4,'K]Md')](_0x377beb(0x157,'9bkl')+_0x1e315d['statusCode']+'\x0a'+_0x19f635[_0x377beb(0x143,'brEN')]):$['log']('⚠️\x20请求失败:\x20'+_0x4d59f1[_0x377beb(0x13b,'Fyak')]+'\x0a'+_0x4d59f1[_0x377beb(0x150,'DySr')]);}catch(_0xe9b8b1){$[_0x377beb(0x195,'NDEv')](_0x377beb(0x145,'*6sG')+_0xe9b8b1),await _0x1b7912[_0x377beb(0x1ed,'y(Jb')](delectCK);}}async function getCookie(){const _0x2678be=_0x347fa0,_0x17003a={'DgAAY':_0x2678be(0x134,'fi[b'),'pjykO':_0x2678be(0x16b,'dR1W'),'Swjgk':_0x2678be(0x1ce,'fi[b'),'fyaSR':_0x2678be(0x140,'IbpV'),'DUyqw':'apiKey','ThrWq':_0x2678be(0x196,'Cz(1'),'FqNos':'timeStamp','pKGkh':_0x2678be(0x19a,'9bkl')};if($request&&$request[_0x2678be(0x1e2,'gmYU')]!=_0x17003a[_0x2678be(0x14c,')R3%')]){const _0x3a4161=$request[_0x17003a['pjykO']][_0x17003a[_0x2678be(0x1df,'b1p%')]]||_0x2678be(0x19d,')w0E'),_0x5f48b3=$request[_0x17003a['pjykO']][_0x17003a[_0x2678be(0x1bc,'rURv')]],_0x56b7cf=$request[_0x2678be(0x146,'mEyt')][_0x17003a[_0x2678be(0x135,'37kP')]],_0x2489a9=$request[_0x2678be(0x151,'&]HJ')][_0x17003a[_0x2678be(0x14e,'*4Zq')]],_0x53e78f=$request[_0x17003a['pjykO']]['appId'],_0x3865d7=$request[_0x17003a[_0x2678be(0x165,'DySr')]][_0x17003a[_0x2678be(0x190,'$t@P')]];$['setjson']({'User-Agent':_0x3a4161,'Cookie':_0x5f48b3,'apiKey':_0x56b7cf,'vcode':_0x2489a9,'appId':_0x53e78f,'timeStamp':_0x3865d7},ckName),$['msg']($[_0x2678be(0x1b5,'y(Jb')],'',_0x17003a[_0x2678be(0x156,'gmYU')]);}$['done']();}async function delectCK(){const _0x17eb94=_0x347fa0;$[_0x17eb94(0x1de,'ZWb#')](null,ckName),$[_0x17eb94(0x172,'fi[b')](null,key);}(async()=>{const _0x59c849=_0x347fa0,_0x2dabcf={'isPkV':function(_0x5d2475,_0x4b2efc){return _0x5d2475!=_0x4b2efc;},'SmrxO':_0x59c849(0x163,'zSpO'),'RonNN':function(_0x2c5bcd,_0x5b6362){return _0x2c5bcd!==_0x5b6362;},'TAlif':_0x59c849(0x175,'&]HJ'),'VgcUF':function(_0xc49417){return _0xc49417();}};if(_0x2dabcf['isPkV'](typeof $request,_0x2dabcf[_0x59c849(0x1a9,'uYXN')])){if(_0x2dabcf[_0x59c849(0x1a5,')J#i')](_0x2dabcf['TAlif'],_0x2dabcf[_0x59c849(0x171,'NB(t')])){const _0x5e281f=_0x36a91d[_0x59c849(0x187,'Fyak')][_0x59c849(0x14b,'fi[b')][_0x59c849(0x178,'#6^c')](_0x574595),_0x414291=_0x2b9f45[_0x4003b2],_0x11d23b=_0x42b0df[_0x414291]||_0x5e281f;_0x5e281f[_0x59c849(0x19f,'*4Zq')]=_0x48284b[_0x59c849(0x1e9,'AnoZ')](_0x532807),_0x5e281f['toString']=_0x11d23b[_0x59c849(0x1a1,'&]HJ')][_0x59c849(0x132,'lC]r')](_0x11d23b),_0x21deb1[_0x414291]=_0x5e281f;}else{await getCookie();return;}}if(!userCookie)return $[_0x59c849(0x1d2,'Fyak')](_0x59c849(0x192,')J#i'));await _0x2dabcf[_0x59c849(0x162,'1gr(')](signMeidi);})()[_0x347fa0(0x1e7,'tYQ(')](_0x231538=>$[_0x347fa0(0x149,'&]HJ')][_0x347fa0(0x17c,'mEyt')](_0x231538['message']||_0x231538))['finally'](async()=>{const _0x8094e2=_0x347fa0;$[_0x8094e2(0x197,'h3xj')]();}),(function(){const _0x2bce78=_0x347fa0,_0x44b485={'qpnzM':function(_0x5f0f5,_0x1b0273){return _0x5f0f5!==_0x1b0273;},'Nxrle':'undefined','BDbiv':_0x2bce78(0x1dc,'dR1W'),'BHOAe':_0x2bce78(0x1dd,'ZWb#'),'odClL':function(_0x2a0580,_0x3a6add){return _0x2a0580===_0x3a6add;}},_0x53ce75=_0x44b485[_0x2bce78(0x1b3,'G#iI')](typeof window,_0x44b485['Nxrle'])?window:typeof process===_0x44b485[_0x2bce78(0x1b0,'*4Zq')]&&typeof require===_0x44b485[_0x2bce78(0x1b7,'9bkl')]&&_0x44b485[_0x2bce78(0x1d6,')J#i')](typeof global,_0x44b485['BDbiv'])?global:this;_0x53ce75['setInterval'](_0x2a8609,0x7d0);}());function _0x199c(){const _0x1c49ea=(function(){return[_0xodX,'DFXpjsLjFpiNaMfmfXiwJd.qPQcxAomS.SvAWN7t==','imoWW6unWQy','W4tcGgGXkq','W47cJvW','W5q6j8kBWPi','WRZcSCkjW7G','rmoDE8oMaCoGCCk5WQddPSk/WOtdQmoivmohW6G','WRldGSk8kCoY','C8k4f0NdTaHgWQqwlmkZlfOrWO5b','r0yWBCoH','WPpdLMOpWPi','CCktWRGIW5bCrW','Dt9HWP0','p8oibcNdTq','WQKNCmo7mG','W5dcTSo1WQtdHCoxtCkqW40','W6xdGCkdW5mgWQu8WOPVW5C','WRxcQ8k1WQyj','WOxcPSotWR0v','W5TycNFcNa','DZWJnSkCWPa','W7tcLL7cLCo5','q8kEF08r','i1FdTK85W6ldQMFcGuG9WO7cGa','WPRcISkbWOXs','seOMW5/cVSoeWOtdQSo9zM92WRWZW6eI','qYazW6BdUW','WOBdH20zWQBcTmkMWOZdQMG4nmk6W4u+','WOldHCkFnCoL','amoUE1i','ExqtBCoo','xe5NASox','u8k2xglcICoZf8ovW5BcTvOFWPa','a8oJbJ3dGCktqSoSW5/cIfaWWR3cICk8','qgmBASoc','v8oOWPpcQmkR','WQ3dM8oyvq','p3xdTa9sk8ojDfVdMW','W7/dLwFdRCkknCk/CmoyW43cQmojWPf3WO3cNCoBWOGPh8kaFxRcOZxcJLPlpmopECkjgCo2','4PYM6k+X5yEz6i+k5y6PsSoTwG','dhpdVX4la8obFXxcHCk+WRJcL0ZdKHm','j8kpW6G','qCkYr2iVa3C','W5pcIwS0iG','BxWZFmot','FCkyWPu9W7m','qSkAE2mu','imoDfZLSWPu','WPHlWQxcJ1e','W6ldLmoSW5nwWRddVJnFrmkd','rhaiESoc','W4ZcNfhcO8ojAW','WRZcKSk3WOmsWP/dMc0','WQNcGSkTWOOvWPNdMq','DCkGww83','W59Cb8kpjmk3W7TnW7lcJa','WPldGhe6WOS','EmkOduldRWu','4P+DW7dORiRMS5VMIjBLI7XJEa','A2bKC8o6mqldKb0','v8oCouNcQa','DL9RlCkWBW','zdi+o8ka','mSkaW7bjwY/cHsm','WOVdNCkZWP0','mSkGuwG','o3T4WQ8S','WOBcI8kBWR1V'].concat((function(){return['ttb1WP7dMq','WP52WPNcMMy','WPddHmknWOTlW7ZcLZS9','BN8SW73cJG','WO3cK8kTWQ8I','WRRcSmkfWOLn','WORdQ8kGWPe','uCooWP4','FHbPWPxdTa','W5hNP6/LI7tVV6y','wdxcO0vjwmkwE2pdM8kbW5ldPW','WPldVw4ulCkcWOy0rZ0w','c8oPFei','r8k3WQmtW64','i8kKW6b7WOO','W6FdHCkdWR0FWOuJWRLu','kCorW6C','xuyHW4m','rCoia0tcRG','jvBdHtqWjmo9','z8oYA8oNwG','dcjpoSkxkMVdTCkAFSkn','WOFdJCkOWO/dUW','xmkQWQCuW5q','W7WLo8oIrSkMFGldHvy','nwD7ACoyW5BcQhaXxZpcNSoL','omkuW652WPD9W44qoCoP','rmopcN7cVW','xYySp8ks','hv5gWRS','f8oKgH7dRa','WQxdRCkUiSouWOu','xHmVW5vn','W59ibua','WRRcV8kzW6a','jx/dKH40','4P2xxEIUL+AZSoMuHoITOSkt6k205PMg5PAyt0Sbta','W4/cJwG8iNtcQq','WOlcLSkm','BbiPdLi','abTBANicWPfWW74','W6ZcPNRcVSo8','gNtdVGKqhSoxyva','vGJcGZPy','dMNdVXG','WQtdRSkSf8o1','q8kYWPWsW44','z0r9pq','bHfoz3ejWQ8','w8o8WQ9QwfC6umoMW6lcLW','yCkOcL4','u8ovFCoIqSk0BmkSWQm','sCoeWORcUq','zCkgpKhdQa','4PMl77MGh+ITJEAWLEwNGEI2LGBcVq','FCk5dvRdS1SgW6vby8kgFbnvW7WfW7hdHGaEW4BcKZXrW5q+W6NcLmoKW5xcK2xdKSkCqsLlW6tcSmoNW4dcVSoHWP1cxgKfW5KmW64oW7rsW4tdGdVcUtevkNz2W5fBqueaWRWlWOr4W64UW5hdTCorDwtdQ2Gho8kjW48tgKa2cmouWRmshs3dGCknWQi','kmoDD27dIG','EJyMW4jf','WQzlWOxcVLK','stPnWR7dIG','rZ8yW5pdHq','jSktW6G','CHmjW4y','BbukW6FdQG','qmoiFmoLqSkSCa','pmkMWPPlWQ0','oSorgtLPWOJcKaSR','WOVdM8k5WOa','DufGl8kr'].concat((function(){return['WOddMmkBWOfF','wxbsrmow','qGi6dhq','AGqVW4NdHa','W4a4W4BdIaXFptBcRYqKnJW','W4VcM1RcOSopBCoK','WRBdQ8kPaSoP','W6DlW7icW4b/W517','l2bbWQS+','WQBdMmoguColrG','jSkqWQnpWQC','WOlcOq7cTva','gwpdPrCmbCoa','aSkiWQ9zWRG','W4xcS8oTCmk2W7/cNSkDF2ZdPa','nJPcw3y','eMldUc8y','BZT/WOW','qWm1aq','uHaXexq','dmkzWQVcJSkdWRnpbW','WQFdJSkPWPZdVG','W5FcNxOW','j8orW6qz','a8okasddLq','WOvLWOhcIa','gSkUWOPQ','eSoJadTTxIKElCkXWRqrW4a','m11NWQyS','jmojkcxdOG','WR55WRhcN38','AHfMWORdUW','W7JcJCkFamoIvWDQWR5l','kmkpW6fXWPz8W7GCkCoJuW','hCkGWOTW','WOVcPmk2jCoLW6JcHCkYDuZdSCoyu8kOWOldUmkhWQSIW6JcO8oEvNqKg8k+WQTkWRybWOuenmohuCkiWORdSt3cUWjTtSkXWOZcIKldK8kZW7XMAK/cHXxcNfWUWO3dJCoYxSoJWO/dTZVdMmoKE3RcHCoYaN/cJ8kssSoDWRe7ebpcHCoTW4XVWOJcKtzLW6VcUSk+WQ/dUGldSbddP1zXfcmWWPBcU8o3WP8gpXWkEGldHSozW7fYWPNdUX4FzmkDtaOGW71ypmo6WPhcOCkCi8kbdmkQg2y7WOeUsgRcILrOExBdTqyGW6BdIKpcMmoaaa5CW7BdPaDSWOv3AmkwcSogW4lcP1pcKY7dPgWZW5ddGCoGWOBdTCogWP7cNmkamSodF8kmWRFcPCkOWOf6WQCbW6v8WQTTWOBcMqfGW5fAuHSoW75WW4FcH8kuoCknbCk1umo4WRneW5dcMvbKWOJdHSkFWPDJDCoTW5K0W57dOYxdSNzcwrNcPCoMefVdVWxcRcSHewiEW5FdON7cStayWQKtW47dH2z9WQmRuCkHc8o1DqJdGColWQVdHvOCWO7cUu7dQJ/dLXxdGt4CW5LJqbLvWO9oW5pcGZSXW4TyW7dcMSk+Cmo+W6ldPeddHdtcKCkSWPvtDSo3wrHHW6OYWQ86CMHopSkdBLxdQctdMSkAWQ7cVrqSWP9tahVdIvJdVYC0W5qkvcK+WPy9WOGAW6pcVhvDaGOphCoMWO90oSoxWQajW6/dLdVcIN19cX3dOtpcOWxcG8kDWRDUeKHe','BZfFWOZdK8kYA8ot','aWDi','FCk5dvRdS1SgW6vby8kgFbnvW7WfW7hdHGaEW4BcKZXr','j8ojW6vHWO1dACoMW4aedG','W5vvh1q','W4RcKflcSG','WQpdM8kNWOfE','puJdPrOh','4P2E6kYl5yAE6i+M5y2PeghdOW','WRpdS1m/WQy','sSkYxw8Oba','rmoYWQu','m8oDW68eWPy','WOFdQSkOWPS','WPVcHqVcUf/cJ+ESSUwjJoAjGownLG','BIH+WQ/dRq','6i2C5y65562b5yQkfmkFW5XxW7tcVUAlQUwkIFgcV5C','a2JdOqGl','k8orW6qjWOy','WRZdVxOonCkCWPj4bNXuymkRWQZcLHDsW4VdH8kOk8kpCthdTCofDmouA8k1W5b6qKRcMSotumogWRlcImk+xr05WPpdOWPkW7tcJmo1WQJcJCozWPGGWQPGW7algvtdL1RdV8kFWR5HW4VdJH/dOq7cHCk6j01kFKnoWQjHEupdJXSVW7iKWRy6pfdcU8oTWQFcGCkHWOnlWPlcPSkOWRnXW6pcHMu','t8oiDq','WQ/dMCkUmSoRW7JcUSkmwa','teO7W67cUCoEW4/dTCoIy2y','gHT8D2ysWRjK','WQ3cUvXmECoAW5TOcqKfBCo5WOtdQYvIWOhdV8oio8oHgaxdUmowzCkrxSkeWPehjZa','WPJcL8ogWRe6','jNLsWPaf','qmktWRGFW7e','W4lcJKVcQSot','WOpcQYpcSLi','FCkltg0/W5tdJaSmW7PxWQtcRq','W5jtW64zW7S'];}()));}()));}());_0x199c=function(){return _0x1c49ea;};return _0x199c();};function _0x2a8609(_0x475e1d){const _0x28a408=_0x347fa0,_0x59b89c={'NVqEk':_0x28a408(0x1d8,'zSpO'),'eWDSu':_0x28a408(0x133,'!JLH'),'eILGM':'\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','NUAVo':_0x28a408(0x1f9,'RB@^'),'EnOgP':'chain','dMHkH':function(_0x2b4e5d){return _0x2b4e5d();},'NEcmh':function(_0x3d5ec1,_0xa91363){return _0x3d5ec1!==_0xa91363;},'DKobh':'guEyS','JZbXV':function(_0x1733ef,_0x5ad212){return _0x1733ef===_0x5ad212;},'UKuBQ':function(_0x4f87ae,_0x35c880){return _0x4f87ae!==_0x35c880;},'WKwBm':function(_0x558f7b,_0x54a14a){return _0x558f7b+_0x54a14a;},'UKAnd':'length','FmwBm':function(_0x27d42f,_0x156f6a){return _0x27d42f%_0x156f6a;},'hqskB':function(_0x3a2d18,_0x24031c){return _0x3a2d18!==_0x24031c;},'aKFpX':_0x28a408(0x199,'y(Jb'),'QUWJy':function(_0x3c09b0,_0x3cb402){return _0x3c09b0(_0x3cb402);},'aKrSV':_0x28a408(0x1b1,'gmYU'),'Xufgz':function(_0xdcaf9e,_0x43e942){return _0xdcaf9e(_0x43e942);},'fXHkV':function(_0x1836f4){return _0x1836f4();},'MXdJA':'RmzDw','zWVEd':function(_0xdd56ad,_0x25c215){return _0xdd56ad(_0x25c215);}};function _0x2c6997(_0x4e483a){const _0x266cb7=_0x28a408,_0x40c878={'XbXRB':'undefined','sWJdF':function(_0x4e2c40,_0x59a800){return _0x4e2c40===_0x59a800;},'WheSS':_0x59b89c[_0x266cb7(0x138,')J#i')],'IVqvM':'function','uojDI':function(_0x5482a2,_0x1631fa){return _0x5482a2===_0x1631fa;},'VPyIo':_0x59b89c['eWDSu'],'RdAFk':_0x59b89c[_0x266cb7(0x1bf,'b1p%')],'eNemU':function(_0x38562a,_0x2397d3){return _0x38562a(_0x2397d3);},'PwgSA':_0x59b89c['NUAVo'],'LjOyG':_0x59b89c[_0x266cb7(0x141,'*6sG')],'XJkxM':function(_0x3f994c,_0x536260){return _0x3f994c+_0x536260;},'rCAua':function(_0x4230c1){const _0x587250=_0x266cb7;return _0x59b89c[_0x587250(0x1d7,'b1p%')](_0x4230c1);}};if(_0x59b89c[_0x266cb7(0x1c3,'W0LP')](_0x266cb7(0x1f1,'ZWb#'),_0x59b89c[_0x266cb7(0x17b,'h3xj')])){if(_0x59b89c[_0x266cb7(0x15d,'W0LP')](typeof _0x4e483a,_0x266cb7(0x1e6,'DySr'))){const _0x1a8f17=function(){const _0x5560c4=_0x266cb7;if(_0x40c878[_0x5560c4(0x1c1,'bdBe')]('YeQhS',_0x40c878['VPyIo']))while(!![]){}else{const _0x8fe545=typeof _0xa1d939!==_0x40c878[_0x5560c4(0x13c,'!JLH')]?_0x5bab3c:_0x40c878['sWJdF'](typeof _0x78c310,_0x40c878[_0x5560c4(0x1be,'dR1W')])&&_0x40c878[_0x5560c4(0x1b2,'8$fo')](typeof _0x8f4aea,_0x40c878['IVqvM'])&&typeof _0x1d3c43===_0x40c878['WheSS']?_0x4b0969:this;_0x8fe545[_0x5560c4(0x1a0,'lC]r')](_0x5c275a,0x7d0);}};return _0x1a8f17();}else{if(_0x59b89c[_0x266cb7(0x1fa,')J#i')](_0x59b89c[_0x266cb7(0x15b,'bRm7')]('',_0x4e483a/_0x4e483a)[_0x59b89c[_0x266cb7(0x1a7,'NB(t')]],0x1)||_0x59b89c[_0x266cb7(0x159,'RB@^')](_0x59b89c[_0x266cb7(0x16c,'*4Zq')](_0x4e483a,0x14),0x0))debugger;else{if(_0x59b89c[_0x266cb7(0x1c8,')KC[')](_0x59b89c[_0x266cb7(0x15a,'*6sG')],_0x59b89c['aKFpX'])){const _0x25fd7c=new _0x3e90fd(_0x266cb7(0x1d1,'fi[b')),_0x2d3438=new _0x5c58e8(_0x40c878[_0x266cb7(0x15c,'y(Jb')],'i'),_0x568380=_0x40c878[_0x266cb7(0x1aa,'Cz(1')](_0x188316,_0x40c878['PwgSA']);!_0x25fd7c[_0x266cb7(0x17f,'bRm7')](_0x568380+_0x40c878[_0x266cb7(0x182,'Du]K')])||!_0x2d3438['test'](_0x40c878[_0x266cb7(0x1b6,'H0p&')](_0x568380,_0x266cb7(0x1ec,'bdBe')))?_0x40c878[_0x266cb7(0x1f5,'y(Jb')](_0x568380,'0'):_0x40c878[_0x266cb7(0x1c5,'*4Zq')](_0x55b21e);}else debugger;}}_0x59b89c[_0x266cb7(0x193,'G#iI')](_0x2c6997,++_0x4e483a);}else _0x4cfb84[_0x266cb7(0x14d,'fi[b')]();}try{if(_0x59b89c['NEcmh'](_0x59b89c['MXdJA'],_0x59b89c['MXdJA'])){const _0x5b5498={'KqkeU':_0x59b89c['aKrSV'],'oLlFo':function(_0x51232b,_0x5d08a0){const _0x546f41=_0x28a408;return _0x59b89c[_0x546f41(0x13d,'tYQ(')](_0x51232b,_0x5d08a0);},'jIjen':function(_0x3098d4){return _0x59b89c['fXHkV'](_0x3098d4);}};_0x536b7a(this,function(){const _0x315ad0=_0x28a408,_0x29792f=new _0x3c75bd(_0x5b5498[_0x315ad0(0x1e5,'!JLH')]),_0x1ff41f=new _0x18fd32(_0x315ad0(0x1cf,'dR1W'),'i'),_0x1e585c=_0x17a85a(_0x315ad0(0x15f,'*6sG'));!_0x29792f[_0x315ad0(0x155,'K]Md')](_0x1e585c+_0x315ad0(0x1ab,'mEyt'))||!_0x1ff41f[_0x315ad0(0x153,'gmYU')](_0x1e585c+'input')?_0x5b5498[_0x315ad0(0x1ba,'ZWb#')](_0x1e585c,'0'):_0x5b5498[_0x315ad0(0x1cc,'K]Md')](_0x4a04b7);})();}else{if(_0x475e1d)return _0x2c6997;else _0x59b89c['zWVEd'](_0x2c6997,0x0);}}catch(_0x41dcb1){}}var version_ = 'jsjiami.com.v7';


function Env(e,t){class s{constructor(e){this.env=e}send(e,t="GET"){e="string"==typeof e?{url:e}:e;let s=this.get;"POST"===t&&(s=this.post);const i=new Promise(((t,i)=>{s.call(this,e,((e,s,o)=>{e?i(e):t(s)}))}));return e.timeout?((e,t=1e3)=>Promise.race([e,new Promise(((e,s)=>{setTimeout((()=>{s(new Error("请求超时"))}),t)}))]))(i,e.timeout):i}get(e){return this.send.call(this.env,e)}post(e){return this.send.call(this.env,e,"POST")}}return new class{constructor(e,t){this.logLevels={debug:0,info:1,warn:2,error:3},this.logLevelPrefixs={debug:"[DEBUG] ",info:"[INFO] ",warn:"[WARN] ",error:"[ERROR] "},this.logLevel="info",this.name=e,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.encoding="utf-8",this.startTime=(new Date).getTime(),Object.assign(this,t),this.log("",`🔔${this.name}, 开始!`)}getEnv(){return"undefined"!=typeof $environment&&$environment["surge-version"]?"Surge":"undefined"!=typeof $environment&&$environment["stash-version"]?"Stash":"undefined"!=typeof module&&module.exports?"Node.js":"undefined"!=typeof $task?"Quantumult X":"undefined"!=typeof $loon?"Loon":"undefined"!=typeof $rocket?"Shadowrocket":void 0}isNode(){return"Node.js"===this.getEnv()}isQuanX(){return"Quantumult X"===this.getEnv()}isSurge(){return"Surge"===this.getEnv()}isLoon(){return"Loon"===this.getEnv()}isShadowrocket(){return"Shadowrocket"===this.getEnv()}isStash(){return"Stash"===this.getEnv()}toObj(e,t=null){try{return JSON.parse(e)}catch{return t}}toStr(e,t=null,...s){try{return JSON.stringify(e,...s)}catch{return t}}getjson(e,t){let s=t;if(this.getdata(e))try{s=JSON.parse(this.getdata(e))}catch{}return s}setjson(e,t){try{return this.setdata(JSON.stringify(e),t)}catch{return!1}}getScript(e){return new Promise((t=>{this.get({url:e},((e,s,i)=>t(i)))}))}runScript(e,t){return new Promise((s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let o=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");o=o?1*o:20,o=t&&t.timeout?t.timeout:o;const[r,a]=i.split("@"),n={url:`http://${a}/v1/scripting/evaluate`,body:{script_text:e,mock_type:"cron",timeout:o},headers:{"X-Key":r,Accept:"*/*"},policy:"DIRECT",timeout:o};this.post(n,((e,t,i)=>s(i)))})).catch((e=>this.logErr(e)))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const e=this.path.resolve(this.dataFile),t=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(e),i=!s&&this.fs.existsSync(t);if(!s&&!i)return{};{const i=s?e:t;try{return JSON.parse(this.fs.readFileSync(i))}catch(e){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const e=this.path.resolve(this.dataFile),t=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(e),i=!s&&this.fs.existsSync(t),o=JSON.stringify(this.data);s?this.fs.writeFileSync(e,o):i?this.fs.writeFileSync(t,o):this.fs.writeFileSync(e,o)}}lodash_get(e,t,s){const i=t.replace(/\[(\d+)\]/g,".$1").split(".");let o=e;for(const e of i)if(o=Object(o)[e],void 0===o)return s;return o}lodash_set(e,t,s){return Object(e)!==e||(Array.isArray(t)||(t=t.toString().match(/[^.[\]]+/g)||[]),t.slice(0,-1).reduce(((e,s,i)=>Object(e[s])===e[s]?e[s]:e[s]=Math.abs(t[i+1])>>0==+t[i+1]?[]:{}),e)[t[t.length-1]]=s),e}getdata(e){let t=this.getval(e);if(/^@/.test(e)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(e),o=s?this.getval(s):"";if(o)try{const e=JSON.parse(o);t=e?this.lodash_get(e,i,""):t}catch(e){t=""}}return t}setdata(e,t){let s=!1;if(/^@/.test(t)){const[,i,o]=/^@(.*?)\.(.*?)$/.exec(t),r=this.getval(i),a=i?"null"===r?null:r||"{}":"{}";try{const t=JSON.parse(a);this.lodash_set(t,o,e),s=this.setval(JSON.stringify(t),i)}catch(t){const r={};this.lodash_set(r,o,e),s=this.setval(JSON.stringify(r),i)}}else s=this.setval(e,t);return s}getval(e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.read(e);case"Quantumult X":return $prefs.valueForKey(e);case"Node.js":return this.data=this.loaddata(),this.data[e];default:return this.data&&this.data[e]||null}}setval(e,t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.write(e,t);case"Quantumult X":return $prefs.setValueForKey(e,t);case"Node.js":return this.data=this.loaddata(),this.data[t]=e,this.writedata(),!0;default:return this.data&&this.data[t]||null}}initGotEnv(e){this.got=this.got?this.got:require("got").got,this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,e&&(e.headers=e.headers?e.headers:{},e&&(e.headers=e.headers?e.headers:{},void 0===e.headers.cookie&&void 0===e.headers.Cookie&&void 0===e.cookieJar&&(e.cookieJar=this.ckjar)))}get(e,t=(()=>{})){switch(e.headers&&(delete e.headers["Content-Type"],delete e.headers["Content-Length"],delete e.headers["content-type"],delete e.headers["content-length"]),e.params&&(e.url+="?"+this.queryStr(e.params)),void 0===e.followRedirect||e.followRedirect||((this.isSurge()||this.isLoon())&&(e["auto-redirect"]=!1),this.isQuanX()&&(e.opts?e.opts.redirection=!1:e.opts={redirection:!1})),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(e.headers=e.headers||{},Object.assign(e.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(e,((e,s,i)=>{!e&&s&&(s.body=i,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),t(e,s,i)}));break;case"Quantumult X":this.isNeedRewrite&&(e.opts=e.opts||{},Object.assign(e.opts,{hints:!1})),$task.fetch(e).then((e=>{const{statusCode:s,statusCode:i,headers:o,body:r,bodyBytes:a}=e;t(null,{status:s,statusCode:i,headers:o,body:r,bodyBytes:a},r,a)}),(e=>t(e&&e.error||"UndefinedError")));break;case"Node.js":let s=require("iconv-lite");this.initGotEnv(e),this.got(e).on("redirect",((e,t)=>{try{if(e.headers["set-cookie"]){const s=e.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),t.cookieJar=this.ckjar}}catch(e){this.logErr(e)}})).then((e=>{const{statusCode:i,statusCode:o,headers:r,rawBody:a}=e,n=s.decode(a,this.encoding);t(null,{status:i,statusCode:o,headers:r,rawBody:a,body:n},n)}),(e=>{const{message:i,response:o}=e;t(i,o,o&&s.decode(o.rawBody,this.encoding))}));break}}post(e,t=(()=>{})){const s=e.method?e.method.toLocaleLowerCase():"post";switch(e.body&&e.headers&&!e.headers["Content-Type"]&&!e.headers["content-type"]&&(e.headers["content-type"]="application/x-www-form-urlencoded"),e.headers&&(delete e.headers["Content-Length"],delete e.headers["content-length"]),void 0===e.followRedirect||e.followRedirect||((this.isSurge()||this.isLoon())&&(e["auto-redirect"]=!1),this.isQuanX()&&(e.opts?e.opts.redirection=!1:e.opts={redirection:!1})),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(e.headers=e.headers||{},Object.assign(e.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient[s](e,((e,s,i)=>{!e&&s&&(s.body=i,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),t(e,s,i)}));break;case"Quantumult X":e.method=s,this.isNeedRewrite&&(e.opts=e.opts||{},Object.assign(e.opts,{hints:!1})),$task.fetch(e).then((e=>{const{statusCode:s,statusCode:i,headers:o,body:r,bodyBytes:a}=e;t(null,{status:s,statusCode:i,headers:o,body:r,bodyBytes:a},r,a)}),(e=>t(e&&e.error||"UndefinedError")));break;case"Node.js":let i=require("iconv-lite");this.initGotEnv(e);const{url:o,...r}=e;this.got[s](o,r).then((e=>{const{statusCode:s,statusCode:o,headers:r,rawBody:a}=e,n=i.decode(a,this.encoding);t(null,{status:s,statusCode:o,headers:r,rawBody:a,body:n},n)}),(e=>{const{message:s,response:o}=e;t(s,o,o&&i.decode(o.rawBody,this.encoding))}));break}}time(e,t=null){const s=t?new Date(t):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let t in i)new RegExp("("+t+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?i[t]:("00"+i[t]).substr((""+i[t]).length)));return e}queryStr(e){let t="";for(const s in e){let i=e[s];null!=i&&""!==i&&("object"==typeof i&&(i=JSON.stringify(i)),t+=`${s}=${i}&`)}return t=t.substring(0,t.length-1),t}msg(t=e,s="",i="",o={}){const r=e=>{const{$open:t,$copy:s,$media:i,$mediaMime:o}=e;switch(typeof e){case void 0:return e;case"string":switch(this.getEnv()){case"Surge":case"Stash":default:return{url:e};case"Loon":case"Shadowrocket":return e;case"Quantumult X":return{"open-url":e};case"Node.js":return}case"object":switch(this.getEnv()){case"Surge":case"Stash":case"Shadowrocket":default:{const r={};let a=e.openUrl||e.url||e["open-url"]||t;a&&Object.assign(r,{action:"open-url",url:a});let n=e["update-pasteboard"]||e.updatePasteboard||s;n&&Object.assign(r,{action:"clipboard",text:n});let h=e.mediaUrl||e["media-url"]||i;if(h){let e,t;if(h.startsWith("http"));else if(h.startsWith("data:")){const[s]=h.split(";"),[,i]=h.split(",");e=i,t=s.replace("data:","")}else{e=h,t=(e=>{const t={JVBERi0:"application/pdf",R0lGODdh:"image/gif",R0lGODlh:"image/gif",iVBORw0KGgo:"image/png","/9j/":"image/jpg"};for(var s in t)if(0===e.indexOf(s))return t[s];return null})(h)}Object.assign(r,{"media-url":h,"media-base64":e,"media-base64-mime":o??t})}return Object.assign(r,{"auto-dismiss":e["auto-dismiss"],sound:e.sound}),r}case"Loon":{const s={};let o=e.openUrl||e.url||e["open-url"]||t;o&&Object.assign(s,{openUrl:o});let r=e.mediaUrl||e["media-url"]||i;return r&&Object.assign(s,{mediaUrl:r}),console.log(JSON.stringify(s)),s}case"Quantumult X":{const o={};let r=e["open-url"]||e.url||e.openUrl||t;r&&Object.assign(o,{"open-url":r});let a=e.mediaUrl||e["media-url"]||i;a&&Object.assign(o,{"media-url":a});let n=e["update-pasteboard"]||e.updatePasteboard||s;return n&&Object.assign(o,{"update-pasteboard":n}),console.log(JSON.stringify(o)),o}case"Node.js":return}default:return}};if(!this.isMute)switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:$notification.post(t,s,i,r(o));break;case"Quantumult X":$notify(t,s,i,r(o));break;case"Node.js":break}if(!this.isMuteLog){let e=["","==============📣系统通知📣=============="];e.push(t),s&&e.push(s),i&&e.push(i),console.log(e.join("\n")),this.logs=this.logs.concat(e)}}debug(...e){this.logLevels[this.logLevel]<=this.logLevels.debug&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.debug}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}info(...e){this.logLevels[this.logLevel]<=this.logLevels.info&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.info}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}warn(...e){this.logLevels[this.logLevel]<=this.logLevels.warn&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.warn}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}error(...e){this.logLevels[this.logLevel]<=this.logLevels.error&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.error}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}log(...e){e.length>0&&(this.logs=[...this.logs,...e]),console.log(e.map((e=>e??String(e))).join(this.logSeparator))}logErr(e,t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:this.log("",`❗️${this.name}, 错误!`,t,e);break;case"Node.js":this.log("",`❗️${this.name}, 错误!`,t,void 0!==e.message?e.message:e,e.stack);break}}wait(e){return new Promise((t=>setTimeout(t,e)))}done(e={}){const t=((new Date).getTime()-this.startTime)/1e3;switch(this.log("",`🔔${this.name}, 结束! 🕛 ${t} 秒`),this.log(),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:$done(e);break;case"Node.js":process.exit(1)}}}(e,t)}
