/**
Title: 美的 签到打卡
Nomination / Category: QuanmuteX
Written by: lslive
Date: 2025-09-04
Draft Version: 0.1
Contact Info: https://github.com/lslive
Notes: 只测试过圈X，其它环境请自行尝试
*/

/***
const ckName = "Meidi";
const key = "Meidi_apikey";
*/

var _0xodB='jsjiami.com.v7';function _0x7db8(_0x4d802d,_0x3b9cbb){const _0x5d7d4f=_0x5d7d();return _0x7db8=function(_0x7db814,_0x33482f){_0x7db814=_0x7db814-0xe0;let _0x23146e=_0x5d7d4f[_0x7db814];if(_0x7db8['iqDETM']===undefined){var _0x2d909e=function(_0x14eade){const _0x3f43f8='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5a8d87='',_0x5c8534='';for(let _0x3f785a=0x0,_0x4873e5,_0x3c61a0,_0xd8a0ee=0x0;_0x3c61a0=_0x14eade['charAt'](_0xd8a0ee++);~_0x3c61a0&&(_0x4873e5=_0x3f785a%0x4?_0x4873e5*0x40+_0x3c61a0:_0x3c61a0,_0x3f785a++%0x4)?_0x5a8d87+=String['fromCharCode'](0xff&_0x4873e5>>(-0x2*_0x3f785a&0x6)):0x0){_0x3c61a0=_0x3f43f8['indexOf'](_0x3c61a0);}for(let _0xfe169d=0x0,_0x2aca70=_0x5a8d87['length'];_0xfe169d<_0x2aca70;_0xfe169d++){_0x5c8534+='%'+('00'+_0x5a8d87['charCodeAt'](_0xfe169d)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x5c8534);};const _0x21dbd8=function(_0x307a29,_0x3693d1){let _0x12edc3=[],_0x11d5a0=0x0,_0x1a906c,_0x2c6c8a='';_0x307a29=_0x2d909e(_0x307a29);let _0x528e84;for(_0x528e84=0x0;_0x528e84<0x100;_0x528e84++){_0x12edc3[_0x528e84]=_0x528e84;}for(_0x528e84=0x0;_0x528e84<0x100;_0x528e84++){_0x11d5a0=(_0x11d5a0+_0x12edc3[_0x528e84]+_0x3693d1['charCodeAt'](_0x528e84%_0x3693d1['length']))%0x100,_0x1a906c=_0x12edc3[_0x528e84],_0x12edc3[_0x528e84]=_0x12edc3[_0x11d5a0],_0x12edc3[_0x11d5a0]=_0x1a906c;}_0x528e84=0x0,_0x11d5a0=0x0;for(let _0x3c07d6=0x0;_0x3c07d6<_0x307a29['length'];_0x3c07d6++){_0x528e84=(_0x528e84+0x1)%0x100,_0x11d5a0=(_0x11d5a0+_0x12edc3[_0x528e84])%0x100,_0x1a906c=_0x12edc3[_0x528e84],_0x12edc3[_0x528e84]=_0x12edc3[_0x11d5a0],_0x12edc3[_0x11d5a0]=_0x1a906c,_0x2c6c8a+=String['fromCharCode'](_0x307a29['charCodeAt'](_0x3c07d6)^_0x12edc3[(_0x12edc3[_0x528e84]+_0x12edc3[_0x11d5a0])%0x100]);}return _0x2c6c8a;};_0x7db8['YHQCeR']=_0x21dbd8,_0x4d802d=arguments,_0x7db8['iqDETM']=!![];}const _0x5a2365=_0x5d7d4f[0x0],_0x4830bf=_0x7db814+_0x5a2365,_0x52e2f7=_0x4d802d[_0x4830bf];return!_0x52e2f7?(_0x7db8['XWydQd']===undefined&&(_0x7db8['XWydQd']=!![]),_0x23146e=_0x7db8['YHQCeR'](_0x23146e,_0x33482f),_0x4d802d[_0x4830bf]=_0x23146e):_0x23146e=_0x52e2f7,_0x23146e;},_0x7db8(_0x4d802d,_0x3b9cbb);}const _0x10fb9b=_0x7db8;(function(_0x282772,_0x15f0d7,_0x2cc42b,_0x5ba09f,_0x2dedf8,_0x5422a1,_0x18c514){return _0x282772=_0x282772>>0x7,_0x5422a1='hs',_0x18c514='hs',function(_0x4ba0b8,_0xfc8fe4,_0x243a74,_0xc23f12,_0x47d5dd){const _0x4a77a4=_0x7db8;_0xc23f12='tfi',_0x5422a1=_0xc23f12+_0x5422a1,_0x47d5dd='up',_0x18c514+=_0x47d5dd,_0x5422a1=_0x243a74(_0x5422a1),_0x18c514=_0x243a74(_0x18c514),_0x243a74=0x0;const _0x296563=_0x4ba0b8();while(!![]&&--_0x5ba09f+_0xfc8fe4){try{_0xc23f12=-parseInt(_0x4a77a4(0xe8,'TA#('))/0x1*(parseInt(_0x4a77a4(0xf4,'N#yy'))/0x2)+parseInt(_0x4a77a4(0x13a,'YijW'))/0x3+-parseInt(_0x4a77a4(0x145,'3X*T'))/0x4+-parseInt(_0x4a77a4(0x114,'brZm'))/0x5*(parseInt(_0x4a77a4(0x103,'dpfF'))/0x6)+-parseInt(_0x4a77a4(0x10f,'EOgM'))/0x7*(parseInt(_0x4a77a4(0xf7,'brZm'))/0x8)+parseInt(_0x4a77a4(0x102,'iz@J'))/0x9+parseInt(_0x4a77a4(0x10d,'6MMh'))/0xa;}catch(_0x4c4d43){_0xc23f12=_0x243a74;}finally{_0x47d5dd=_0x296563[_0x5422a1]();if(_0x282772<=_0x5ba09f)_0x243a74?_0x2dedf8?_0xc23f12=_0x47d5dd:_0x2dedf8=_0x47d5dd:_0x243a74=_0x47d5dd;else{if(_0x243a74==_0x2dedf8['replace'](/[gLGIlOEfXMQFbYARUNPe=]/g,'')){if(_0xc23f12===_0xfc8fe4){_0x296563['un'+_0x5422a1](_0x47d5dd);break;}_0x296563[_0x18c514](_0x47d5dd);}}}}}(_0x2cc42b,_0x15f0d7,function(_0x54376e,_0x32f00f,_0x391b56,_0x180100,_0x2b319f,_0x4d100d,_0x1cecd8){return _0x32f00f='\x73\x70\x6c\x69\x74',_0x54376e=arguments[0x0],_0x54376e=_0x54376e[_0x32f00f](''),_0x391b56='\x72\x65\x76\x65\x72\x73\x65',_0x54376e=_0x54376e[_0x391b56]('\x76'),_0x180100='\x6a\x6f\x69\x6e',(0x1b9c83,_0x54376e[_0x180100](''));});}(0x6100,0x63e8d,_0x5d7d,0xc4),_0x5d7d)&&(_0xodB=0x22d3);const $=new Env(_0x10fb9b(0xe0,'94LR')),ckName=_0x10fb9b(0x129,'LK0)'),key=_0x10fb9b(0x148,'brZm');let userCookie=$[_0x10fb9b(0x121,'F7^]')](ckName);function _0x5d7d(){const _0x29330d=(function(){return[_0xodB,'LAUOjfsgQejflRibMNaFEUmMiYP.GcoXIemIP.v7==','WOC9lSkzWOZcLW','wrNcNre5AmooW5GnitpcMW','bSolhb8','oM56','iSo3W7pcVCkQ','W7VdMCkzhCkCEYa','FCo7WPu','4P+Q6kYT5yAW6iYz5yYjW5RdOCkP','j0/cJ8oNeq','qmksWQrh','zSkpf8oumW','f8ofhXHV','tmktC3VdINS','4PIO77QZW43OROdMSQ3LPkxOTAVdPSkp','W5/dKCkjW77cM8oFWPi','cWu0ig5KbxuLgYZdPCoWWQLaWQGniSkNo8kPlSolW7RcVK7dJSkkw8kCkCoOWOJdULNdLmkRFGqlW6JcTIesW5zjsZj4W6hcTCkFWOy9WRhdQqm2xYldL8kZW6/cLCkueSklrSkfamoyCSoThCoaWR3dNgJcLWGNW5BcOSodn2PVW7VcJ2aGaw/dGYCRBMftmfFdISk9W4yQveLihW','tJXPBrNdGZ0','WQONEq','W6a6WO0X','j8o2W7/cNSkd','tmorW5anwq','W5NdSmkzjmk/','z8kHWOa1FG','a8oQW7VcVSkTW4v/','W53cRmk9WPFdV8khWPDbxSorWQJdHq','WOa8W6rDyq','W5xcU8kvW4VdSSkvW5dcIY/cSYi','wmkmBvBdHa','vs1PFqNdGG0fW6ddGq','W6ynuM5AWR5YgmkJEKKy','mKNcLYC4nqnpW5ZcPG','CSkWCSoWW6W','DHVdISkRx8kCdcNcLf/cICkV','WR3dQSkoW6jWuCo8BX3dTYRdHxGLamk8jdqOW6nPd1CaiSoiW6ixsSo7eJJcTSkQE8kuWQ9KWPzXW7PHabddHslcQ1BcQCoiW6iHWQzhW4JdKG7cK8oJW6ldMbldKCk6WRiozCkwzSkmF8ovvu1DW7xcGgO4W5FcIvhdTCk/nd3cMhtdKL9NmJtdNSkkWPZdHCkYcxmSfhDLW5tcR8o2cYOVW44vfmkjy8kwW7ePW7VcNdpcL1BcSHzkiSkhEmkUBN7cICoRW7/dGmkvW6ZdPmk4WPmkWQ3cKXhdTmkzWPeXemoOoNLOWRy4W6/cJSkwbujmrmozWQb1W7/dKCoFWQ3dHtPtq8kXWOpdQSkcW4GxcMisW6jIpdrvW6xdNLFcMZbYWOnWWRVcKfTUmCkcWOldKHBdT24PW57dGCoUx8oGWRldGCkOWRiaWPJcNCkPWOpdJqZcVgDaW6ddN8kIWQxcOmoPW40YcCkxW4FdMSojlSoDWRSEaKWraSkEnCkNW7xdLMdcT8kJWQpcNSkgDCo1qqpdO8kfbLZdQmkpWPmNWOddKSkCvSomW7RdHmkiW6SkWPNcLmonDSk3WOrtW7zXWP8plrxdV8oQWQi3WOpdLapcOWNdK8k9uMFcNmk4WQ1wACoRmvhcTc3cPSodgHRcLbZdTCozWQBcJW/cQhtcSsP+W4hdIbLCW7NdNbT+W5mVxCktmCoThc4Yub7dO2WHWPxcSSkIBvSdWPvlESkvmbnKqWyZCmoWhHlcOIxdGaWGu8ordZxcRfyVh8kVWQ/dVqddQmodW7/cMCkGja','6i2t5y2n56+05yQuWONdMSk1s2FdMoAlGEwiO/cuJkS','W7ZdVCoRu8kzAq'].concat((function(){return['4PUq77QPsEISMEAYKUwNI+I1GmkcWOC','WQVdI8oEW63cHCo7WOK','wmkbqSo9W6u','W7aRW5FcSeBdKmkCW7lcJdxcQmkr','W6VcTCotW4BcOG','gt8xW6CM','W67cVSkUw1hdLmoE','iGuGla','WQiGWQVdJN7dQmk7F8kFWRVdPcVcGmoDWQW','6i2K5yYE56+25yQOfXNcNc7dJKhMIjJLIzVWRQ2H','W5pcRmo+W5tcSq','ECoXWPnLyIBcIq','W4PgW7NdNJu','WPlcNwz2zG','ee8YWRlcVXVdIZPlW57dG1u','ffjCW7D6','amofdaC','iexdGu1Nb8o8W58TccFcIW','D8kNtmovW6y','W5JcS8kqsa','WQZcRmkKW4jO','WPFdR8oRW5dcV8ogWPLpASoy','WR4ngmo5WQO','AZXHBrxcKEESSowjMUAlL+wpHq','eWRcSWPTWPj/W7hcQ8o5','W4RcTCkF','WOq7CCkCEZi','W4hcGIFcGaddNW','W6VdPLGcWPi','6iYZ5y6d566D5yMKW4KRCX7dQ1xMI4ZLIR/WOO6/','W4dcSCkssCk/','sZ7cNcSmWOLc','kXKP','WR8Rp8kdW47cSSk7zmooAq','W5pcTCkpW4JcTa','WRCeWQKfW4y+tq','rCknWRPRW74','ge/dN09L'].concat((function(){return['W63cMWhcSr4','WRqtW7vgA14','n03cImo1aW','WP7cP8oYW7e4gSksASkscJJdPg7cGCo8W5CqWQHGWQGNWPRcTLVcVYbGmeHRW5pcSSoeW4/cTmoFW79YlSoxBKJcIGbLW7xdVr/cSGfVw8oadbKnyhjNi8o7W6TgW43dLCkoW6utaw7cU8kNoCkoW7GzmKJcP3ddJmk5g8o7WQlcHmoGWPxdQSkzoHfgyspcRgCMsSkIWOVdHbddGhzihSkhqa','WPBdQmosW5dcOCoDAt8','hSouu8kTESkos8kNW7xcSt06','hCovdG','W4FdRv4l','vrJcMHS2ymoTW5yLaGRcVa','WQNcNmk1W6Xu','WRC7BCkd','WOWXnmkqWO/cN8kL','WQWetCk1wa','W4xdT8oFiCkk','W6RdK8kjdG','WQxcP8kuW7q','WRnpcr0hW7u','WPiui8ozWR4','W7P6W5pdRsG','W6qjuwbAWRq6h8k1weWMtG','WRVcJmkNfCkMqt7cJG','zrPUzrG','sCoEWPrMxG','eaRcTX4LWOfG','W5ddGmkjW6tcM8kkW5pdSWDYmSoMCbpdKw7dHSkiWRldQmkQvCkRWRK','WQxcQ8oNW7WX','rSkqwmoyW6JdGLtdLCoxuSkgrSoD','asOCW6q','ehbCW5nU','xCkHWOaPFSoiyZuxxu/dGCkOW4mixG','Eh5OW7FdMCkFW5aSW4/dJSkZW7hcISkl','WR7cRCo7W6S1eCkw','rSoQo3SOudNcVq','wrL3W7ldRW','eLxcHtn+','tmkyWQTgW7/dRCoT'];}()));}()));}());_0x5d7d=function(){return _0x29330d;};return _0x5d7d();};async function signMeidi(){const _0x21d5df=_0x10fb9b,_0x524ce9={'uowfk':_0x21d5df(0x123,'94LR'),'DeBxi':_0x21d5df(0xea,'P9*L'),'TxPNy':_0x21d5df(0x136,'NLzb'),'Uzpzk':_0x21d5df(0x149,'[f2P'),'ovIZw':'appId','LivAq':'Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2018_5\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Mobile/15E148','COASX':_0x21d5df(0x11f,'iu)T'),'oTSkE':_0x21d5df(0x140,'pgfC'),'BZqqL':function(_0xf762d5,_0x1f38c1){return _0xf762d5!==_0x1f38c1;},'LydOm':_0x21d5df(0x10b,'X8zB'),'AjkIx':function(_0x5d88dd,_0x547c73){return _0x5d88dd===_0x547c73;},'nCJQX':_0x21d5df(0x117,'@P3o'),'XJfgY':'yLgFU','xFIEQ':function(_0x750301,_0x36d2fa){return _0x750301!==_0x36d2fa;},'jdBEy':'guaCR','YEaLf':function(_0x1b84bd){return _0x1b84bd();}},_0x3ca3c5='https://weixin.midea.com/mscp_mscp/api/cms_api/activity-center-im-service/im-svr/im/game/page/sign',_0x186f03={'Sec-Fetch-Dest':_0x21d5df(0x11b,'Q4zV'),'Connection':_0x21d5df(0xe1,'TA#('),'Accept-Encoding':'gzip,\x20deflate,\x20br','Content-Type':'application/json','Sec-Fetch-Site':_0x21d5df(0x12d,'H]G&'),'Origin':_0x21d5df(0x107,'F7^]'),'Sec-Fetch-Mode':_0x21d5df(0xfe,'Ug5z'),'Host':_0x21d5df(0x10c,'LK0)'),'Referer':'https://weixin.midea.com/apps/h5-pro-wx-interaction-marketing/',...userCookie},_0x39972b=_0x21d5df(0x134,'Ug5z');try{if(_0x524ce9[_0x21d5df(0x14d,'XBUl')]('GmAwL',_0x524ce9['LydOm'])){const _0x272568=_0x481625[_0x524ce9[_0x21d5df(0xf1,'Q4zV')]][_0x524ce9[_0x21d5df(0x143,'FIW0')]]||_0x21d5df(0xf2,'pgfC'),_0x413e17=_0x28ab63[_0x524ce9['uowfk']][_0x524ce9['TxPNy']],_0x42d3fa=_0x33984d[_0x524ce9[_0x21d5df(0x111,'Vmy0')]]['apiKey'],_0x5cd3cf=_0x36c86b[_0x524ce9[_0x21d5df(0xeb,'H]G&')]][_0x524ce9['Uzpzk']],_0x14f054=_0x3ee8e0[_0x524ce9['uowfk']][_0x524ce9['ovIZw']],_0x3d154f=_0x533255[_0x524ce9['uowfk']]['timeStamp'];_0x16aabe['setjson']({'User-Agent':_0x272568,'Cookie':_0x413e17,'apiKey':_0x42d3fa,'vcode':_0x5cd3cf,'appId':_0x14f054,'timeStamp':_0x3d154f},_0x56fdbc),_0x3b621d[_0x21d5df(0xf5,'%BJd')](_0x505ae7['name'],'',_0x21d5df(0xe6,'1Y!X'));}else{const _0x350ad0=await $['http'][_0x21d5df(0xf9,'TW2G')]({'url':_0x3ca3c5,'headers':_0x186f03,'body':_0x39972b});if(_0x524ce9['AjkIx'](_0x350ad0[_0x21d5df(0x14c,'ka[H')],0xc8)){const _0x1f309f=JSON[_0x21d5df(0x110,'3X*T')](_0x350ad0[_0x21d5df(0x147,'jv4L')]);$['msg']('✅\x20请求成功:\x20'+_0x1f309f[_0x21d5df(0x116,'X8zB')]+'\x20积分：'+(_0x1f309f?.[_0x21d5df(0x115,'jv4L')]?.[_0x21d5df(0x13f,'cIIa')]?.['points']||0x0));}else{if(_0x524ce9[_0x21d5df(0x127,'QO!A')](_0x524ce9[_0x21d5df(0x100,'XBUl')],_0x524ce9[_0x21d5df(0x105,'nnf0')])){if(_0x156dc1&&_0x1e02be[_0x21d5df(0x113,'P9*L')]!='OPTIONS'){const _0x1fea5e=_0x563331[_0x524ce9[_0x21d5df(0x12e,'iu)T')]][_0x21d5df(0x131,'Vmy0')]||_0x524ce9[_0x21d5df(0x11d,'N#yy')],_0x4c211e=_0x15de19[_0x21d5df(0x12a,'@P3o')][_0x21d5df(0xe4,'KjTd')],_0x1db7f6=_0x45f6a2[_0x524ce9[_0x21d5df(0x11e,'jv4L')]][_0x524ce9[_0x21d5df(0x146,'X8zB')]],_0x3b78c8=_0x15a618[_0x21d5df(0x142,'nnf0')][_0x21d5df(0xe7,'a$@i')],_0x4d9c46=_0x20216d[_0x21d5df(0x112,'gvEj')][_0x524ce9[_0x21d5df(0xef,'KjTd')]],_0x492b6e=_0xa31fd9[_0x524ce9[_0x21d5df(0xee,'brZm')]]['timeStamp'];_0x1fc7a7[_0x21d5df(0x13d,'bJ)a')]({'User-Agent':_0x1fea5e,'Cookie':_0x4c211e,'apiKey':_0x1db7f6,'vcode':_0x3b78c8,'appId':_0x4d9c46,'timeStamp':_0x492b6e},_0xf041ec),_0x459e59[_0x21d5df(0xe9,'rS4$')](_0x2a0948[_0x21d5df(0x10a,'U@ng')],'',_0x524ce9[_0x21d5df(0xf8,'Ug5z')]);}_0x4cb1a7['done']();}else $['log'](_0x21d5df(0x120,'dpfF')+_0x350ad0[_0x21d5df(0x12f,'94LR')]+'\x0a'+_0x350ad0[_0x21d5df(0xfd,'dpfF')]);}}}catch(_0x45d94f){_0x524ce9[_0x21d5df(0x144,'LExX')]('AyUYJ',_0x524ce9[_0x21d5df(0x14b,'Ug5z')])?($['log']('❌\x20请求错误\x20请更新CK:\x20'+_0x45d94f),await _0x524ce9[_0x21d5df(0x139,'[f2P')](delectCK)):_0x2aca70[_0x21d5df(0xe2,'H]G&')](_0x21d5df(0x137,'%BJd')+_0x307a29['statusCode']+'\x0a'+_0x3693d1[_0x21d5df(0xf6,'cfi#')]);}}async function getCookie(){const _0x491ab7=_0x10fb9b,_0x297091={'cuHTT':function(_0x42737b,_0x3c6e20){return _0x42737b!=_0x3c6e20;},'QLtSP':_0x491ab7(0x138,'ka[H'),'vtffY':_0x491ab7(0x106,'TA#('),'CCfld':_0x491ab7(0xff,'iz@J'),'csMVx':_0x491ab7(0xed,'gvEj')};if($request&&_0x297091['cuHTT']($request[_0x491ab7(0xf0,'4Be2')],_0x297091[_0x491ab7(0x128,'dpfF')])){const _0x516508=$request[_0x297091['vtffY']]['User-Agent']||_0x491ab7(0x122,'rS4$'),_0x5de55d=$request[_0x297091[_0x491ab7(0x141,'tC0D')]][_0x491ab7(0xe3,'TW2G')],_0x3e1f81=$request[_0x297091[_0x491ab7(0x13c,'U@ng')]][_0x297091[_0x491ab7(0x104,'94LR')]],_0x54571f=$request[_0x297091['vtffY']][_0x491ab7(0x108,'pgfC')],_0x50da2e=$request[_0x297091['vtffY']][_0x297091['csMVx']],_0x879408=$request[_0x297091['vtffY']]['timeStamp'];$['setjson']({'User-Agent':_0x516508,'Cookie':_0x5de55d,'apiKey':_0x3e1f81,'vcode':_0x54571f,'appId':_0x50da2e,'timeStamp':_0x879408},ckName),$[_0x491ab7(0x124,'TW2G')]($[_0x491ab7(0x14a,'a$@i')],'',_0x491ab7(0x135,'ka[H'));}$[_0x491ab7(0x11c,'gvEj')]();}async function delectCK(){const _0x393ca3=_0x10fb9b;$['setjson'](null,ckName),$[_0x393ca3(0x118,'dpfF')](null,key);}(async()=>{const _0x1554a3=_0x10fb9b,_0x35f6e3={'kPSBJ':function(_0x2efaf6,_0x1136a8){return _0x2efaf6!=_0x1136a8;},'tXCpw':'undefined','NmKtJ':function(_0x5e7d1a,_0x4e1868){return _0x5e7d1a!==_0x4e1868;},'SwMWx':_0x1554a3(0x126,'@P3o'),'YJese':_0x1554a3(0xfc,'BsJQ'),'stQAo':function(_0x5c5d7c,_0x42b6a1){return _0x5c5d7c===_0x42b6a1;},'ryMTL':'tYhKt','NdbpW':function(_0x4b5fa9){return _0x4b5fa9();}};if(_0x35f6e3[_0x1554a3(0xfb,'TW2G')](typeof $request,_0x35f6e3['tXCpw'])){if(_0x35f6e3[_0x1554a3(0x13b,'tC0D')](_0x35f6e3['SwMWx'],_0x35f6e3[_0x1554a3(0x12c,'4Be2')])){await getCookie();return;}else _0x3b6111['setjson'](null,_0x5e7950),_0x1d4572['setjson'](null,_0x966aea);}if(!userCookie||!apiKey){if(_0x35f6e3[_0x1554a3(0x132,'[f2P')](_0x35f6e3['ryMTL'],_0x1554a3(0x101,'FIW0')))return $[_0x1554a3(0x119,'nnf0')](_0x1554a3(0x11a,'H]G&'));else _0x147f58[_0x1554a3(0x13e,'rS4$')]();}await _0x35f6e3[_0x1554a3(0xe5,'cfi#')](signMeidi);})()['catch'](_0x142f51=>$['notifyMsg']['push'](_0x142f51[_0x10fb9b(0x10e,'pgfC')]||_0x142f51))[_0x10fb9b(0xfa,'P9*L')](async()=>{const _0x22d5b1=_0x10fb9b;$[_0x22d5b1(0x125,'1Y!X')]();});var version_ = 'jsjiami.com.v7';

function Env(e,t){class s{constructor(e){this.env=e}send(e,t="GET"){e="string"==typeof e?{url:e}:e;let s=this.get;"POST"===t&&(s=this.post);const i=new Promise(((t,i)=>{s.call(this,e,((e,s,o)=>{e?i(e):t(s)}))}));return e.timeout?((e,t=1e3)=>Promise.race([e,new Promise(((e,s)=>{setTimeout((()=>{s(new Error("请求超时"))}),t)}))]))(i,e.timeout):i}get(e){return this.send.call(this.env,e)}post(e){return this.send.call(this.env,e,"POST")}}return new class{constructor(e,t){this.logLevels={debug:0,info:1,warn:2,error:3},this.logLevelPrefixs={debug:"[DEBUG] ",info:"[INFO] ",warn:"[WARN] ",error:"[ERROR] "},this.logLevel="info",this.name=e,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.encoding="utf-8",this.startTime=(new Date).getTime(),Object.assign(this,t),this.log("",`🔔${this.name}, 开始!`)}getEnv(){return"undefined"!=typeof $environment&&$environment["surge-version"]?"Surge":"undefined"!=typeof $environment&&$environment["stash-version"]?"Stash":"undefined"!=typeof module&&module.exports?"Node.js":"undefined"!=typeof $task?"Quantumult X":"undefined"!=typeof $loon?"Loon":"undefined"!=typeof $rocket?"Shadowrocket":void 0}isNode(){return"Node.js"===this.getEnv()}isQuanX(){return"Quantumult X"===this.getEnv()}isSurge(){return"Surge"===this.getEnv()}isLoon(){return"Loon"===this.getEnv()}isShadowrocket(){return"Shadowrocket"===this.getEnv()}isStash(){return"Stash"===this.getEnv()}toObj(e,t=null){try{return JSON.parse(e)}catch{return t}}toStr(e,t=null,...s){try{return JSON.stringify(e,...s)}catch{return t}}getjson(e,t){let s=t;if(this.getdata(e))try{s=JSON.parse(this.getdata(e))}catch{}return s}setjson(e,t){try{return this.setdata(JSON.stringify(e),t)}catch{return!1}}getScript(e){return new Promise((t=>{this.get({url:e},((e,s,i)=>t(i)))}))}runScript(e,t){return new Promise((s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let o=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");o=o?1*o:20,o=t&&t.timeout?t.timeout:o;const[r,a]=i.split("@"),n={url:`http://${a}/v1/scripting/evaluate`,body:{script_text:e,mock_type:"cron",timeout:o},headers:{"X-Key":r,Accept:"*/*"},policy:"DIRECT",timeout:o};this.post(n,((e,t,i)=>s(i)))})).catch((e=>this.logErr(e)))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const e=this.path.resolve(this.dataFile),t=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(e),i=!s&&this.fs.existsSync(t);if(!s&&!i)return{};{const i=s?e:t;try{return JSON.parse(this.fs.readFileSync(i))}catch(e){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const e=this.path.resolve(this.dataFile),t=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(e),i=!s&&this.fs.existsSync(t),o=JSON.stringify(this.data);s?this.fs.writeFileSync(e,o):i?this.fs.writeFileSync(t,o):this.fs.writeFileSync(e,o)}}lodash_get(e,t,s){const i=t.replace(/\[(\d+)\]/g,".$1").split(".");let o=e;for(const e of i)if(o=Object(o)[e],void 0===o)return s;return o}lodash_set(e,t,s){return Object(e)!==e||(Array.isArray(t)||(t=t.toString().match(/[^.[\]]+/g)||[]),t.slice(0,-1).reduce(((e,s,i)=>Object(e[s])===e[s]?e[s]:e[s]=Math.abs(t[i+1])>>0==+t[i+1]?[]:{}),e)[t[t.length-1]]=s),e}getdata(e){let t=this.getval(e);if(/^@/.test(e)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(e),o=s?this.getval(s):"";if(o)try{const e=JSON.parse(o);t=e?this.lodash_get(e,i,""):t}catch(e){t=""}}return t}setdata(e,t){let s=!1;if(/^@/.test(t)){const[,i,o]=/^@(.*?)\.(.*?)$/.exec(t),r=this.getval(i),a=i?"null"===r?null:r||"{}":"{}";try{const t=JSON.parse(a);this.lodash_set(t,o,e),s=this.setval(JSON.stringify(t),i)}catch(t){const r={};this.lodash_set(r,o,e),s=this.setval(JSON.stringify(r),i)}}else s=this.setval(e,t);return s}getval(e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.read(e);case"Quantumult X":return $prefs.valueForKey(e);case"Node.js":return this.data=this.loaddata(),this.data[e];default:return this.data&&this.data[e]||null}}setval(e,t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.write(e,t);case"Quantumult X":return $prefs.setValueForKey(e,t);case"Node.js":return this.data=this.loaddata(),this.data[t]=e,this.writedata(),!0;default:return this.data&&this.data[t]||null}}initGotEnv(e){this.got=this.got?this.got:require("got").got,this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,e&&(e.headers=e.headers?e.headers:{},e&&(e.headers=e.headers?e.headers:{},void 0===e.headers.cookie&&void 0===e.headers.Cookie&&void 0===e.cookieJar&&(e.cookieJar=this.ckjar)))}get(e,t=(()=>{})){switch(e.headers&&(delete e.headers["Content-Type"],delete e.headers["Content-Length"],delete e.headers["content-type"],delete e.headers["content-length"]),e.params&&(e.url+="?"+this.queryStr(e.params)),void 0===e.followRedirect||e.followRedirect||((this.isSurge()||this.isLoon())&&(e["auto-redirect"]=!1),this.isQuanX()&&(e.opts?e.opts.redirection=!1:e.opts={redirection:!1})),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(e.headers=e.headers||{},Object.assign(e.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(e,((e,s,i)=>{!e&&s&&(s.body=i,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),t(e,s,i)}));break;case"Quantumult X":this.isNeedRewrite&&(e.opts=e.opts||{},Object.assign(e.opts,{hints:!1})),$task.fetch(e).then((e=>{const{statusCode:s,statusCode:i,headers:o,body:r,bodyBytes:a}=e;t(null,{status:s,statusCode:i,headers:o,body:r,bodyBytes:a},r,a)}),(e=>t(e&&e.error||"UndefinedError")));break;case"Node.js":let s=require("iconv-lite");this.initGotEnv(e),this.got(e).on("redirect",((e,t)=>{try{if(e.headers["set-cookie"]){const s=e.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),t.cookieJar=this.ckjar}}catch(e){this.logErr(e)}})).then((e=>{const{statusCode:i,statusCode:o,headers:r,rawBody:a}=e,n=s.decode(a,this.encoding);t(null,{status:i,statusCode:o,headers:r,rawBody:a,body:n},n)}),(e=>{const{message:i,response:o}=e;t(i,o,o&&s.decode(o.rawBody,this.encoding))}));break}}post(e,t=(()=>{})){const s=e.method?e.method.toLocaleLowerCase():"post";switch(e.body&&e.headers&&!e.headers["Content-Type"]&&!e.headers["content-type"]&&(e.headers["content-type"]="application/x-www-form-urlencoded"),e.headers&&(delete e.headers["Content-Length"],delete e.headers["content-length"]),void 0===e.followRedirect||e.followRedirect||((this.isSurge()||this.isLoon())&&(e["auto-redirect"]=!1),this.isQuanX()&&(e.opts?e.opts.redirection=!1:e.opts={redirection:!1})),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(e.headers=e.headers||{},Object.assign(e.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient[s](e,((e,s,i)=>{!e&&s&&(s.body=i,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),t(e,s,i)}));break;case"Quantumult X":e.method=s,this.isNeedRewrite&&(e.opts=e.opts||{},Object.assign(e.opts,{hints:!1})),$task.fetch(e).then((e=>{const{statusCode:s,statusCode:i,headers:o,body:r,bodyBytes:a}=e;t(null,{status:s,statusCode:i,headers:o,body:r,bodyBytes:a},r,a)}),(e=>t(e&&e.error||"UndefinedError")));break;case"Node.js":let i=require("iconv-lite");this.initGotEnv(e);const{url:o,...r}=e;this.got[s](o,r).then((e=>{const{statusCode:s,statusCode:o,headers:r,rawBody:a}=e,n=i.decode(a,this.encoding);t(null,{status:s,statusCode:o,headers:r,rawBody:a,body:n},n)}),(e=>{const{message:s,response:o}=e;t(s,o,o&&i.decode(o.rawBody,this.encoding))}));break}}time(e,t=null){const s=t?new Date(t):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let t in i)new RegExp("("+t+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?i[t]:("00"+i[t]).substr((""+i[t]).length)));return e}queryStr(e){let t="";for(const s in e){let i=e[s];null!=i&&""!==i&&("object"==typeof i&&(i=JSON.stringify(i)),t+=`${s}=${i}&`)}return t=t.substring(0,t.length-1),t}msg(t=e,s="",i="",o={}){const r=e=>{const{$open:t,$copy:s,$media:i,$mediaMime:o}=e;switch(typeof e){case void 0:return e;case"string":switch(this.getEnv()){case"Surge":case"Stash":default:return{url:e};case"Loon":case"Shadowrocket":return e;case"Quantumult X":return{"open-url":e};case"Node.js":return}case"object":switch(this.getEnv()){case"Surge":case"Stash":case"Shadowrocket":default:{const r={};let a=e.openUrl||e.url||e["open-url"]||t;a&&Object.assign(r,{action:"open-url",url:a});let n=e["update-pasteboard"]||e.updatePasteboard||s;n&&Object.assign(r,{action:"clipboard",text:n});let h=e.mediaUrl||e["media-url"]||i;if(h){let e,t;if(h.startsWith("http"));else if(h.startsWith("data:")){const[s]=h.split(";"),[,i]=h.split(",");e=i,t=s.replace("data:","")}else{e=h,t=(e=>{const t={JVBERi0:"application/pdf",R0lGODdh:"image/gif",R0lGODlh:"image/gif",iVBORw0KGgo:"image/png","/9j/":"image/jpg"};for(var s in t)if(0===e.indexOf(s))return t[s];return null})(h)}Object.assign(r,{"media-url":h,"media-base64":e,"media-base64-mime":o??t})}return Object.assign(r,{"auto-dismiss":e["auto-dismiss"],sound:e.sound}),r}case"Loon":{const s={};let o=e.openUrl||e.url||e["open-url"]||t;o&&Object.assign(s,{openUrl:o});let r=e.mediaUrl||e["media-url"]||i;return r&&Object.assign(s,{mediaUrl:r}),console.log(JSON.stringify(s)),s}case"Quantumult X":{const o={};let r=e["open-url"]||e.url||e.openUrl||t;r&&Object.assign(o,{"open-url":r});let a=e.mediaUrl||e["media-url"]||i;a&&Object.assign(o,{"media-url":a});let n=e["update-pasteboard"]||e.updatePasteboard||s;return n&&Object.assign(o,{"update-pasteboard":n}),console.log(JSON.stringify(o)),o}case"Node.js":return}default:return}};if(!this.isMute)switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:$notification.post(t,s,i,r(o));break;case"Quantumult X":$notify(t,s,i,r(o));break;case"Node.js":break}if(!this.isMuteLog){let e=["","==============📣系统通知📣=============="];e.push(t),s&&e.push(s),i&&e.push(i),console.log(e.join("\n")),this.logs=this.logs.concat(e)}}debug(...e){this.logLevels[this.logLevel]<=this.logLevels.debug&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.debug}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}info(...e){this.logLevels[this.logLevel]<=this.logLevels.info&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.info}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}warn(...e){this.logLevels[this.logLevel]<=this.logLevels.warn&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.warn}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}error(...e){this.logLevels[this.logLevel]<=this.logLevels.error&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.error}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}log(...e){e.length>0&&(this.logs=[...this.logs,...e]),console.log(e.map((e=>e??String(e))).join(this.logSeparator))}logErr(e,t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:this.log("",`❗️${this.name}, 错误!`,t,e);break;case"Node.js":this.log("",`❗️${this.name}, 错误!`,t,void 0!==e.message?e.message:e,e.stack);break}}wait(e){return new Promise((t=>setTimeout(t,e)))}done(e={}){const t=((new Date).getTime()-this.startTime)/1e3;switch(this.log("",`🔔${this.name}, 结束! 🕛 ${t} 秒`),this.log(),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:$done(e);break;case"Node.js":process.exit(1)}}}(e,t)}
