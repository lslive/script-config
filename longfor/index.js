
// ==UserScript==
// @name        Longfor 签到打卡
// @description 使用 env.js 框架发送打卡请求
// @compatible  quantumultx
// @version     1.0
// ==/UserScript==


 var _0xodb='jsjiami.com.v7';const _0x2bdbb0=_0x4b95;(function(_0x443592,_0x39d141,_0x2e80b3,_0xe66a36,_0x581e1b,_0x459e9,_0x178b54){return _0x443592=_0x443592>>0x6,_0x459e9='hs',_0x178b54='hs',function(_0x3ba557,_0x105a87,_0x56af9a,_0x3984e7,_0x385059){const _0xdbab89=_0x4b95;_0x3984e7='tfi',_0x459e9=_0x3984e7+_0x459e9,_0x385059='up',_0x178b54+=_0x385059,_0x459e9=_0x56af9a(_0x459e9),_0x178b54=_0x56af9a(_0x178b54),_0x56af9a=0x0;const _0x1cb7d6=_0x3ba557();while(!![]&&--_0xe66a36+_0x105a87){try{_0x3984e7=parseInt(_0xdbab89(0x195,'r[8h'))/0x1*(parseInt(_0xdbab89(0x149,'2hsM'))/0x2)+parseInt(_0xdbab89(0x1c4,'TXQn'))/0x3*(-parseInt(_0xdbab89(0x1c8,'5KH8'))/0x4)+-parseInt(_0xdbab89(0x162,'TXQn'))/0x5*(-parseInt(_0xdbab89(0x1b7,'#jmN'))/0x6)+-parseInt(_0xdbab89(0x17f,'Z62I'))/0x7+-parseInt(_0xdbab89(0x18e,']#iz'))/0x8*(parseInt(_0xdbab89(0x176,'3RO7'))/0x9)+-parseInt(_0xdbab89(0x1c2,'#jmN'))/0xa*(parseInt(_0xdbab89(0x193,'#jmN'))/0xb)+-parseInt(_0xdbab89(0x173,'c4kQ'))/0xc*(-parseInt(_0xdbab89(0x1bf,'bk)m'))/0xd);}catch(_0x185198){_0x3984e7=_0x56af9a;}finally{_0x385059=_0x1cb7d6[_0x459e9]();if(_0x443592<=_0xe66a36)_0x56af9a?_0x581e1b?_0x3984e7=_0x385059:_0x581e1b=_0x385059:_0x56af9a=_0x385059;else{if(_0x56af9a==_0x581e1b['replace'](/[DyIQfkHtlpLOhdSu=]/g,'')){if(_0x3984e7===_0x105a87){_0x1cb7d6['un'+_0x459e9](_0x385059);break;}_0x1cb7d6[_0x178b54](_0x385059);}}}}}(_0x2e80b3,_0x39d141,function(_0xd47f80,_0x155ced,_0xd0982d,_0x370148,_0xa92212,_0x72d483,_0x842d55){return _0x155ced='\x73\x70\x6c\x69\x74',_0xd47f80=arguments[0x0],_0xd47f80=_0xd47f80[_0x155ced](''),_0xd0982d='\x72\x65\x76\x65\x72\x73\x65',_0xd47f80=_0xd47f80[_0xd0982d]('\x76'),_0x370148='\x6a\x6f\x69\x6e',(0x1b2600,_0xd47f80[_0x370148](''));});}(0x2fc0,0xe05fa,_0x3a1e,0xc1),_0x3a1e)&&(_0xodb=0xc1);const $=new Env(_0x2bdbb0(0x148,'@V3B')),ckName=_0x2bdbb0(0x1a2,'p8cu'),key=_0x2bdbb0(0x152,'VBLp');let userCookie=$['getjson'](ckName),apiKey=$[_0x2bdbb0(0x1c6,'Yh*8')](key);function _0x3a1e(){const _0x3a3e67=(function(){return[_0xodb,'yIktjlpsLhjdilaSmLi.fpQcIkoumHQ.OvH7kfLD==','bhpdHCoBW4qyWP8','WRVcG1u0WQNcVmkR','W6VdJ8oCumotW4X1kmoV','jJ/dShW','i8otW6aqWO1tW67cLmozW6LrWQGcuCkci0W4W7zjyCoRoZ0CWP7cMcJdL1RcPrG8rLfLevFcNg/cJmkxacrDWPjyuuu9WPJcHCkxBmkmx3avWPRdMG3dHI3cLNeoWONcP8kLA8oCWQ3dVdhdTmkWWP8cfCohWRe5W57dLGddK0RcISksWQPsEJ0','rCkSWOjOneJdJSkZW61M','WR/cV8otW6OzbmksbSkQ','dHVdJCk4','WQjUzCoQW4pdUCk7','WPxcQ8kcgLm','WOZdKMjAcL1E','W5pcPf8','WRCdya','gfdcUXldJw7dQCohWQjx','WR5bFCosW50','tSoZcSoKkupcQW','umkQWRBcHCovc2BcREEVSEwiS+AiTowmRa','FXldR1tdMr/dLmorWPzsDau','ySkcEXLdWP3cSHpdH8olp3fhhMdcKxS','ECkDbMKPW6JdKHpcM8kmg2HBif3cOG','fCk+WPiuFwuCWQ/dMW','eSkDvmo9','WRqwsmkUwW','lZVdQq','FCk6W5xcGgS','lLtcSComWR/dNGG','W5JdRuj4bhTvWR7cVSoyWQHGA38','axNdLCoi','WPXKA8oPW5ZdUSk0CCkcWPnim8owh18HxLyXrNzvjmoKW5VcNCkkWRZcGrKQaSoxf8kgW5ZcVJZcMX7cT1FdKsG5bSkpshBcKSk3W7KVy37dUZ3cGfRdIxn3W6pdL8ocrCkigfXuWRhdUCoKW4tdHSofW7ldOCk7W7dcUmo+tZxcRmoSWO46B8oUksKnW4hdPmkpkmo9W4xcG34fiCoHtNRdHe7cGW','W5DBDCkuW4O','W5NcT3u','4PYEW7hORyVMSRxMIjhLIiHrwG','WR7cMmoKW5Sf','W5BdQctdOmk9W7K6WOHsxCk+WOPnp8ojESoKWR3dGwbZW7VcUdVcSZVdQmojACohW5pcKZH6W5nu','WONdTWNcRmkvW6bDW5q6WOq','W7RdUv1+cW','WO/dPmoT','WRdcNCoGW6W1','xmo3y0xdP2BdJCk2BSoNpLajwCo0FSo1W6/cOcpcHw3dKxFcMIDMW5dcG2RdVSoG','CSkrWQvxW41zW7xdQConW7uuWOvO','CCk6WRJdSW','4P+OWRhORipMSj3PLBVORORcKEITH+AAO+AvG8oMWPyuW4u','WP3cMuFcISkZW5T+W5hcUJ0','WQJcVSotW7y','W6KHCJy2imkh','WOm0WQ1g','bCoSW4G3d0ZdPSkIW5K'].concat((function(){return['iZVdHSkwWO0','6i2/5yYW562F5yMUWPNcVmkQjs8p5OQ75yQv8jwoIW','W5JcVwBcV8oNWQ4','4PYBnoISMUAYK+MvHUIUVHxORRdMMz7ML4OyW53cRdq','WR/cOSkpn0RcHGy','meBcMSooWPy','uIRcVLRdGq','W7ZcIeHVsa','x8kOWRddIX4','WRlcJmkEqG','W57cU0HZtLdcO8o9gSk/dLVdQXRdS8oAWQSfchiWW6/cUwldM8oNW50IW5ddSW','o3ZcUCk+eq','zSoKWQlcLf5YFq/cNHe1WORcKq','Bmo+tWCn','WQnEWQjV','yYddLmoPA2CejSoCptFdSSoA','W6RdQJ8zcCoTWQusW5H/WQhcGGSrfwO','jmoDW5SUWPK','p8k0aGhcOa','6i+r5yYC566E5yMnug0AWQldI8oL5OQ35yUt8kEoIW','nfpdNmobW5W','xfJcPmoi','WQhcPCk7iIpdVmk5W6NcKmkSWRCtkfvnWRy','wczKWQ/cNW','rCkRWOnQvHZcUCkEW6r9jKhcKW','WOnbs8kMewO7fX7dLvNdGsOFc8kuWOS','DWtdOCkyWQldIq1Xg8oz','xYLuWPBcGG','iq7dMM9E','WQVcOCohW6mwdSkDf8kNE3HLW6y+W7RcGdxcQ8odW77cUmoplGhcKSkvc8oYm0i','mNBcOSkMoq','vmohvICg','sCoyvaSp','WOJcPMxcPCkCgsJdJu9k','sCoEWRFcHW','WPhdSSo+FHFcOSoV','WR1KDG','Bt5NWPO','W73dTezinG','b8oOECouESoKWO0','W77cM2HuyMO','gmkgrmo0','abVdJG','W7iHzZGGpCkA','WRmuj8kwW4JdTGhdTCo8','WR3cICkHFCos','xupdJCkXWQrDW7lcUG','amk1nq','4P6FzoIVSEAWNUAjLEwlKmotWQ4'].concat((function(){return['lSo0W6NdLSkkve7dVSovCGyC','WRXAWQP/WRFdMmkS','W6KWzYGWpmkQW6hdVmk1','W4ldJrVdNW','p3hcJmk1oIng','WRHqWQW','cCkYjtBcJG','fmo3W54N','j8kKh8ojW4pdRW','WOaMWQC','qCoEWRFcHCodW6JdNa','bMZdII7cKCkaEWCYW4ddSCoMAdz+WQtcPCoXW73cVZ8dWOfGfsv5W4/cHWfvW4W','imkpjctcGq','weBcNCkLW4yCW5hdJcVdO0v5WONdOM19W5RcRmk4BCk8W4qCW70utLFdLCo5imo5AW','xmo0AKBdOgFcL8oQg8k9BGi','W5BdHMTBlG','WP3cGCk8','W5BdJ8kwWOhdNCoZW4ZdRa','wLZcQmojFCoEFa','uCkqWOhdKhe','wHeXWOmRW6FdH8oUvq','WPpdMHG','W63cUwHQuq','xSofWRJcLSoqW7tdRxFcR8o+','m8k9W7q','WOKMxCogWP3dG8kMo8ofW6KxEmkBga','6zE06k666i235y+156YF5yMwAhZcIwK2fEwLLoI3Hq','umo/sCkAWP7cVmk7p8oUWONcRbFcQq','W6HyzSkOW7tcOetcL8o2jCoJsgtdTSk8WQhcG8k7WReyWOSnd1VcPSkOWPZcVmkOW6FcNSofW4NdJem8zSodWRK1wCkcvfBcP8o3eCoCceBcRCkeWPHkWRldOx/dMd3dRSk7s8oks8k0tNPjBexcJa7dIWTCW51nqSkhWQykW4PgtCog','WP8Fu13dH2tcQaNdLmouWPtdQw1w','aahdVSkBkCowxYFdLmkQWOW','WRmykSoUW5ldUsRdJ8oChG','W77dJXpdSSkU','W5ldQuvOca','ehpdHCoBW4qyWP8','WRnKDCo5','i8opcSk0WQ4','W7WEAWqe','6iYC5y2S562Z5yICbmkYW7XlW6qS5OU95yMz8kY/IW','pMjgWO7cIIbbqW','W5ZdLrpdRSkI','W5KRAtCSkG','WReEkSoQWRhcQGddLCovoCkWtG','4PIu77QndoIVQoAWOowKPEI0GSoBW78','WP7cLehcJmo6W4ryW77cOJJdPW','WOVcK8k0'];}()));}()));}());_0x3a1e=function(){return _0x3a3e67;};return _0x3a1e();};function _0x4b95(_0x97a01b,_0x399a82){const _0x3a1e58=_0x3a1e();return _0x4b95=function(_0x4b9598,_0x3d2af2){_0x4b9598=_0x4b9598-0x143;let _0x41bfa9=_0x3a1e58[_0x4b9598];if(_0x4b95['JRoAZj']===undefined){var _0x31f6da=function(_0xd27501){const _0x2d676a='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x316b95='',_0x3abd55='';for(let _0x4fb9d4=0x0,_0x22705f,_0x31ae56,_0x52c933=0x0;_0x31ae56=_0xd27501['charAt'](_0x52c933++);~_0x31ae56&&(_0x22705f=_0x4fb9d4%0x4?_0x22705f*0x40+_0x31ae56:_0x31ae56,_0x4fb9d4++%0x4)?_0x316b95+=String['fromCharCode'](0xff&_0x22705f>>(-0x2*_0x4fb9d4&0x6)):0x0){_0x31ae56=_0x2d676a['indexOf'](_0x31ae56);}for(let _0x52f42e=0x0,_0xcc558d=_0x316b95['length'];_0x52f42e<_0xcc558d;_0x52f42e++){_0x3abd55+='%'+('00'+_0x316b95['charCodeAt'](_0x52f42e)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x3abd55);};const _0x187142=function(_0x582be7,_0x226835){let _0x4b02af=[],_0x4d6dca=0x0,_0x4c96f3,_0x38ca0e='';_0x582be7=_0x31f6da(_0x582be7);let _0xf517cc;for(_0xf517cc=0x0;_0xf517cc<0x100;_0xf517cc++){_0x4b02af[_0xf517cc]=_0xf517cc;}for(_0xf517cc=0x0;_0xf517cc<0x100;_0xf517cc++){_0x4d6dca=(_0x4d6dca+_0x4b02af[_0xf517cc]+_0x226835['charCodeAt'](_0xf517cc%_0x226835['length']))%0x100,_0x4c96f3=_0x4b02af[_0xf517cc],_0x4b02af[_0xf517cc]=_0x4b02af[_0x4d6dca],_0x4b02af[_0x4d6dca]=_0x4c96f3;}_0xf517cc=0x0,_0x4d6dca=0x0;for(let _0x2956a7=0x0;_0x2956a7<_0x582be7['length'];_0x2956a7++){_0xf517cc=(_0xf517cc+0x1)%0x100,_0x4d6dca=(_0x4d6dca+_0x4b02af[_0xf517cc])%0x100,_0x4c96f3=_0x4b02af[_0xf517cc],_0x4b02af[_0xf517cc]=_0x4b02af[_0x4d6dca],_0x4b02af[_0x4d6dca]=_0x4c96f3,_0x38ca0e+=String['fromCharCode'](_0x582be7['charCodeAt'](_0x2956a7)^_0x4b02af[(_0x4b02af[_0xf517cc]+_0x4b02af[_0x4d6dca])%0x100]);}return _0x38ca0e;};_0x4b95['HVQuek']=_0x187142,_0x97a01b=arguments,_0x4b95['JRoAZj']=!![];}const _0x416848=_0x3a1e58[0x0],_0x4002b4=_0x4b9598+_0x416848,_0x1da687=_0x97a01b[_0x4002b4];return!_0x1da687?(_0x4b95['IEDype']===undefined&&(_0x4b95['IEDype']=!![]),_0x41bfa9=_0x4b95['HVQuek'](_0x41bfa9,_0x3d2af2),_0x97a01b[_0x4002b4]=_0x41bfa9):_0x41bfa9=_0x1da687,_0x41bfa9;},_0x4b95(_0x97a01b,_0x399a82);}((async()=>{const _0x309e7e=_0x2bdbb0,_0x52896d={'EmQCq':function(_0x463043,_0x421616){return _0x463043!=_0x421616;},'gqKOo':_0x309e7e(0x1cc,'akLs'),'oJlRm':function(_0x40eed2,_0x33c402){return _0x40eed2(_0x33c402);},'OrSwj':_0x309e7e(0x15e,'GQ65'),'ozONg':function(_0x2b8502){return _0x2b8502();}};if(_0x52896d['EmQCq'](typeof $request,_0x52896d[_0x309e7e(0x194,'5KH8')])){await getCookie();return;}if(!userCookie||!apiKey)return $[_0x309e7e(0x191,'r[8h')]('❌请先获取\x20CK');await _0x52896d[_0x309e7e(0x146,'Bp$3')](getSignLongforApp,_0x309e7e(0x1a3,']bkh')),await $['wait'](0x3e8),await getSignLongforApp(_0x52896d['OrSwj']),await $['wait'](0x3e8),await _0x52896d[_0x309e7e(0x14e,'GiI6')](lotteryChance),await $[_0x309e7e(0x175,'Swwx')](0x3e8),await _0x52896d[_0x309e7e(0x178,'9($o')](lotteryClick),$[_0x309e7e(0x189,'p8cu')]();})());async function getSignLongforApp(_0x50dac6){const _0x24189a=_0x2bdbb0,_0x54b1ac={'KJiSU':_0x24189a(0x184,'akLs'),'ebOwf':_0x24189a(0x17a,'Xh86'),'RaoPk':'C30403','VQxXc':function(_0x4de9c4,_0x544ab0){return _0x4de9c4===_0x544ab0;},'jCkmm':function(_0x408139,_0x131ae7){return _0x408139!==_0x131ae7;},'vwJfL':_0x24189a(0x19e,'GQ65'),'bDGDL':function(_0x55127c){return _0x55127c();}},_0x16b80c=_0x24189a(0x1ca,'9($o'),_0x37c502={...userCookie,'X-GAIA-API-KEY':apiKey[_0x24189a(0x18f,'hO1c')],'X-LF-Bu-Code':_0x54b1ac['RaoPk'],'X-LF-DXRisk-Source':'5','X-LF-Channel':'C3'},_0x3b00e6=JSON[_0x24189a(0x166,'Z62I')]({'activity_no':_0x50dac6});try{const _0x2f1240=await $[_0x24189a(0x190,'3@v6')]['post']({'url':_0x16b80c,'headers':_0x37c502,'body':_0x3b00e6});_0x54b1ac[_0x24189a(0x174,'pzp3')](_0x2f1240[_0x24189a(0x1af,'p8cu')],0xc8)?$['log'](_0x24189a(0x157,'C6A5')+_0x2f1240[_0x24189a(0x1cd,'r[8h')]):$[_0x24189a(0x156,'4^e[')]('⚠️\x20请求失败:\x20'+_0x2f1240['statusCode']+'\x0a'+_0x2f1240[_0x24189a(0x153,'Yh*8')]);}catch(_0x37ea4f){_0x54b1ac['jCkmm'](_0x54b1ac[_0x24189a(0x16c,'uJ6s')],'qdJGO')?($[_0x24189a(0x18b,'Bp$3')]('❌\x20请求错误\x20请更新CK:\x20'+_0x37ea4f),await _0x54b1ac[_0x24189a(0x1a7,'VBLp')](delectCK)):(_0x3d5666['setjson']({'X-LF-DXRisk-Token':_0x5bbf6d,'Content-Type':_0x54b1ac['KJiSU'],'User-Agent':_0xe95775,'X-LF-UserToken':_0x5797f0,'Cookie':_0xc90c7f,'authtoken':_0x2000f0},_0xaefd77),_0x471463[_0x24189a(0x164,'X$T#')]({'APPKEY':_0x493a13,'wxkey':_0x5658e9},_0x51402a),_0x15c380['msg'](_0x591cef[_0x24189a(0x19b,'TXQn')],'',_0x54b1ac[_0x24189a(0x185,'3RO7')]));}}async function lotteryChance(){const _0x3e43fa=_0x2bdbb0,_0xbbcfd0={'EUxmw':function(_0x58ec02,_0x4b717c){return _0x58ec02!=_0x4b717c;},'LNwkN':_0x3e43fa(0x16b,'rtyb'),'tISTz':_0x3e43fa(0x180,'GiI6'),'eYYdV':_0x3e43fa(0x188,'W]EV'),'BzzTA':function(_0xb9e69c,_0x10fe32){return _0xb9e69c&&_0x10fe32;},'pyeTi':'application/json;charset=UTF-8','PEJWz':'wxkey','LKlHS':_0x3e43fa(0x17d,'*j1%'),'HKXof':_0x3e43fa(0x177,'AJIr'),'RrPuv':function(_0x470aec,_0x3c77bc){return _0x470aec===_0x3c77bc;},'fkiwj':_0x3e43fa(0x18d,'VBLp'),'OOoWs':_0x3e43fa(0x186,'pzp3'),'ewEEa':'wYocz','phrXd':function(_0x52bf53){return _0x52bf53();}},_0x16d653=_0x3e43fa(0x1b4,'#jmN'),_0xec73a7={...userCookie,'x-gaia-api-key':apiKey[_0xbbcfd0[_0x3e43fa(0x1ab,'ER9%')]],'bucode':'C30403','channel':'C3','X-LF-DXRisk-Source':'5'},_0x50fbf9={'component_no':_0xbbcfd0['LKlHS'],'activity_no':_0xbbcfd0[_0x3e43fa(0x1bc,'%PZI')]};try{if(_0xbbcfd0[_0x3e43fa(0x179,'GQ65')](_0xbbcfd0[_0x3e43fa(0x150,'C6A5')],_0xbbcfd0[_0x3e43fa(0x1b9,'VBLp')])){const _0x567616=await $['http'][_0x3e43fa(0x14f,'JjQ$')]({'url':_0x16d653,'headers':_0xec73a7,'searchParams':_0x50fbf9});if(_0xbbcfd0[_0x3e43fa(0x1ae,'hO1c')](_0x567616['statusCode'],0xc8)){if(_0xbbcfd0['OOoWs']!==_0xbbcfd0[_0x3e43fa(0x167,'r[8h')]){if(_0xd5e0fd&&_0xbbcfd0['EUxmw'](_0x306662['method'],_0xbbcfd0['LNwkN'])){const _0x2cab2b=_0x32b0fe['headers'][_0xbbcfd0[_0x3e43fa(0x158,'akLs')]],_0x204d8b=_0x4a69a9['headers'][_0xbbcfd0[_0x3e43fa(0x1cf,'rtyb')]]||'Mozilla/5.0\x20(iPhone;\x20CPU\x20iPhone\x20OS\x2018_5\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Mobile/15E148',_0x4b0912=_0x1a029b[_0x3e43fa(0x19c,'3RO7')][_0x3e43fa(0x1a0,'S0eW')],_0x1ab927=_0x5797f8['headers'][_0x3e43fa(0x1b5,'^Sjk')],_0xdf6082=_0x3e43fa(0x1a5,'r[8h'),_0x540a5a=_0x3e43fa(0x159,'4^e['),_0x424e25='2f9e3889-91d9-4684-8ff5-24d881438eaf';_0xbbcfd0[_0x3e43fa(0x16f,'wfs#')](_0x2cab2b,_0x1ab927)&&_0x4b0912&&_0xdf6082?(_0x39fe22['setjson']({'X-LF-DXRisk-Token':_0x2cab2b,'Content-Type':_0xbbcfd0[_0x3e43fa(0x1c0,'TXQn')],'User-Agent':_0x204d8b,'X-LF-UserToken':_0x1ab927,'Cookie':_0x4b0912,'authtoken':_0xdf6082},_0x16a37f),_0x42087c[_0x3e43fa(0x18a,'*j1%')]({'APPKEY':_0x540a5a,'wxkey':_0x424e25},_0x300a9c),_0x30d6f9[_0x3e43fa(0x196,'GQ65')](_0x2b1f08[_0x3e43fa(0x17c,'Uk#y')],'',_0x3e43fa(0x1be,'AJIr'))):_0x220a47[_0x3e43fa(0x1a1,'iypi')](_0x5c1d1d[_0x3e43fa(0x1c9,'JjQ$')],'',_0x3e43fa(0x1b2,'iypi'));}}else $['log'](_0x3e43fa(0x157,'C6A5')+_0x567616[_0x3e43fa(0x19f,'Z62I')]);}else{if(_0xbbcfd0['RrPuv'](_0xbbcfd0[_0x3e43fa(0x16d,']bkh')],_0x3e43fa(0x1a4,'GQ65')))return _0xd27501[_0x3e43fa(0x143,'hO1c')]('❌请先获取\x20CK');else $[_0x3e43fa(0x18b,'Bp$3')]('⚠️\x20请求失败:\x20'+_0x567616['statusCode']+'\x0a'+_0x567616['body']);}}else _0x40d55a['setjson'](null,_0x328e80),_0x588dd1[_0x3e43fa(0x1ba,'Yh*8')](null,_0x4d99e7);}catch(_0x1187f8){$[_0x3e43fa(0x1b0,'c4kQ')](_0x3e43fa(0x161,'D3n8')+_0x1187f8),await _0xbbcfd0['phrXd'](delectCK);}}async function lotteryClick(){const _0x11face=_0x2bdbb0,_0x469e6a={'zaXPh':'wxkey','LnKbx':_0x11face(0x14b,'pzp3'),'lhToN':function(_0x39a25c,_0x363cc6){return _0x39a25c===_0x363cc6;},'vYKWN':'TeoAt','RceHe':_0x11face(0x15d,'akLs'),'QCPRL':function(_0x56c8e7){return _0x56c8e7();}},_0x44f2fc='https://gw2c-hw-open.longfor.com/llt-gateway-prod/api/v1/activity/auth/lottery/click',_0x4cc7e1={...userCookie,'x-gaia-api-key':apiKey[_0x469e6a['zaXPh']],'bucode':'C30403','channel':'C3','X-LF-DXRisk-Source':'5'},_0x42466b=JSON[_0x11face(0x14c,'Xh86')]({'component_no':_0x469e6a['LnKbx'],'activity_no':'AP25N062U6LDDSKR','batch_no':''});try{if(_0x469e6a[_0x11face(0x172,'3RO7')](_0x469e6a['vYKWN'],_0x469e6a['vYKWN'])){const _0x414422=await $[_0x11face(0x170,'5KH8')][_0x11face(0x160,'ER9%')]({'url':_0x44f2fc,'headers':_0x4cc7e1,'body':_0x42466b});_0x414422[_0x11face(0x15a,'$yg[')]===0xc8?$[_0x11face(0x1ad,'6LH9')]('✅\x20请求成功:\x20'+_0x414422[_0x11face(0x18c,'bk)m')]):_0x469e6a[_0x11face(0x1b8,'TXQn')]!=='soztT'?$[_0x11face(0x1c5,'obyf')](_0x11face(0x1c3,'VBLp')+_0x414422['statusCode']+'\x0a'+_0x414422[_0x11face(0x14d,'3@v6')]):_0x511087[_0x11face(0x18b,'Bp$3')](_0x11face(0x1c3,'VBLp')+_0x279f6c[_0x11face(0x19a,'X$T#')]+'\x0a'+_0x30fc25[_0x11face(0x1bb,'Bp$3')]);}else _0x4d6dca[_0x11face(0x1b0,'c4kQ')]('✅\x20请求成功:\x20'+_0x4c96f3[_0x11face(0x153,'Yh*8')]);}catch(_0x80ed36){$[_0x11face(0x19d,'Swwx')](_0x11face(0x16a,'3RO7')+_0x80ed36),await _0x469e6a[_0x11face(0x15b,'AJIr')](delectCK);}}async function delectCK(){const _0x50c4ed=_0x2bdbb0;$[_0x50c4ed(0x147,'1YSR')](null,ckName),$[_0x50c4ed(0x1c7,'7i$g')](null,key);}async function getCookie(){const _0x45a257=_0x2bdbb0,_0x46f455={'Voygz':function(_0x20836c,_0x305e2a){return _0x20836c!=_0x305e2a;},'PxWuP':'OPTIONS','WwgLM':_0x45a257(0x1bd,'X$T#'),'iPGve':_0x45a257(0x14a,'pzp3'),'swcTa':_0x45a257(0x145,'2hsM'),'WEmpk':_0x45a257(0x1c1,'X$T#'),'igUXF':_0x45a257(0x1b1,'Bp$3'),'CCppo':function(_0x3bae3d,_0x3eaaea){return _0x3bae3d&&_0x3eaaea;}};if($request&&_0x46f455['Voygz']($request[_0x45a257(0x169,'4^e[')],_0x46f455[_0x45a257(0x182,'bk)m')])){if(_0x46f455[_0x45a257(0x155,'#jmN')]===_0x46f455[_0x45a257(0x17e,'bk)m')]){const _0x417405=$request[_0x45a257(0x151,'uJ6s')][_0x46f455[_0x45a257(0x183,'JjQ$')]],_0x2fa19c=$request[_0x45a257(0x199,'Swwx')][_0x46f455[_0x45a257(0x187,'pzp3')]]||_0x45a257(0x154,'Bp$3'),_0x27cc3a=$request[_0x45a257(0x192,'X$T#')][_0x46f455[_0x45a257(0x17b,'Yh*8')]],_0x205f12=$request[_0x45a257(0x1aa,'Uk#y')][_0x46f455['igUXF']],_0x2df0e5='424d85f4b1904db3816df909834c885c',_0xa885ad='c06753f1-3e68-437d-b592-b94656ea5517',_0x1608ad='2f9e3889-91d9-4684-8ff5-24d881438eaf';_0x46f455[_0x45a257(0x16e,'hO1c')](_0x417405,_0x205f12)&&_0x27cc3a&&_0x2df0e5?($['setjson']({'X-LF-DXRisk-Token':_0x417405,'Content-Type':_0x45a257(0x171,'hO1c'),'User-Agent':_0x2fa19c,'X-LF-UserToken':_0x205f12,'Cookie':_0x27cc3a,'authtoken':_0x2df0e5},ckName),$[_0x45a257(0x1ce,'Bp$3')]({'APPKEY':_0xa885ad,'wxkey':_0x1608ad},key),$[_0x45a257(0x1a8,'rtyb')]($[_0x45a257(0x165,'iypi')],'',_0x45a257(0x168,'7i$g'))):$[_0x45a257(0x15c,'*j1%')]($['name'],'','错误获取签到Cookie失败');}else _0x5b6796[_0x45a257(0x144,'GiI6')](_0x45a257(0x197,'X$T#')+_0x2f054c[_0x45a257(0x163,'akLs')]);}}var version_ = 'jsjiami.com.v7';

function Env(e,t){class s{constructor(e){this.env=e}send(e,t="GET"){e="string"==typeof e?{url:e}:e;let s=this.get;"POST"===t&&(s=this.post);const i=new Promise(((t,i)=>{s.call(this,e,((e,s,o)=>{e?i(e):t(s)}))}));return e.timeout?((e,t=1e3)=>Promise.race([e,new Promise(((e,s)=>{setTimeout((()=>{s(new Error("请求超时"))}),t)}))]))(i,e.timeout):i}get(e){return this.send.call(this.env,e)}post(e){return this.send.call(this.env,e,"POST")}}return new class{constructor(e,t){this.logLevels={debug:0,info:1,warn:2,error:3},this.logLevelPrefixs={debug:"[DEBUG] ",info:"[INFO] ",warn:"[WARN] ",error:"[ERROR] "},this.logLevel="info",this.name=e,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.encoding="utf-8",this.startTime=(new Date).getTime(),Object.assign(this,t),this.log("",`🔔${this.name}, 开始!`)}getEnv(){return"undefined"!=typeof $environment&&$environment["surge-version"]?"Surge":"undefined"!=typeof $environment&&$environment["stash-version"]?"Stash":"undefined"!=typeof module&&module.exports?"Node.js":"undefined"!=typeof $task?"Quantumult X":"undefined"!=typeof $loon?"Loon":"undefined"!=typeof $rocket?"Shadowrocket":void 0}isNode(){return"Node.js"===this.getEnv()}isQuanX(){return"Quantumult X"===this.getEnv()}isSurge(){return"Surge"===this.getEnv()}isLoon(){return"Loon"===this.getEnv()}isShadowrocket(){return"Shadowrocket"===this.getEnv()}isStash(){return"Stash"===this.getEnv()}toObj(e,t=null){try{return JSON.parse(e)}catch{return t}}toStr(e,t=null,...s){try{return JSON.stringify(e,...s)}catch{return t}}getjson(e,t){let s=t;if(this.getdata(e))try{s=JSON.parse(this.getdata(e))}catch{}return s}setjson(e,t){try{return this.setdata(JSON.stringify(e),t)}catch{return!1}}getScript(e){return new Promise((t=>{this.get({url:e},((e,s,i)=>t(i)))}))}runScript(e,t){return new Promise((s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let o=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");o=o?1*o:20,o=t&&t.timeout?t.timeout:o;const[r,a]=i.split("@"),n={url:`http://${a}/v1/scripting/evaluate`,body:{script_text:e,mock_type:"cron",timeout:o},headers:{"X-Key":r,Accept:"*/*"},policy:"DIRECT",timeout:o};this.post(n,((e,t,i)=>s(i)))})).catch((e=>this.logErr(e)))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const e=this.path.resolve(this.dataFile),t=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(e),i=!s&&this.fs.existsSync(t);if(!s&&!i)return{};{const i=s?e:t;try{return JSON.parse(this.fs.readFileSync(i))}catch(e){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const e=this.path.resolve(this.dataFile),t=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(e),i=!s&&this.fs.existsSync(t),o=JSON.stringify(this.data);s?this.fs.writeFileSync(e,o):i?this.fs.writeFileSync(t,o):this.fs.writeFileSync(e,o)}}lodash_get(e,t,s){const i=t.replace(/\[(\d+)\]/g,".$1").split(".");let o=e;for(const e of i)if(o=Object(o)[e],void 0===o)return s;return o}lodash_set(e,t,s){return Object(e)!==e||(Array.isArray(t)||(t=t.toString().match(/[^.[\]]+/g)||[]),t.slice(0,-1).reduce(((e,s,i)=>Object(e[s])===e[s]?e[s]:e[s]=Math.abs(t[i+1])>>0==+t[i+1]?[]:{}),e)[t[t.length-1]]=s),e}getdata(e){let t=this.getval(e);if(/^@/.test(e)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(e),o=s?this.getval(s):"";if(o)try{const e=JSON.parse(o);t=e?this.lodash_get(e,i,""):t}catch(e){t=""}}return t}setdata(e,t){let s=!1;if(/^@/.test(t)){const[,i,o]=/^@(.*?)\.(.*?)$/.exec(t),r=this.getval(i),a=i?"null"===r?null:r||"{}":"{}";try{const t=JSON.parse(a);this.lodash_set(t,o,e),s=this.setval(JSON.stringify(t),i)}catch(t){const r={};this.lodash_set(r,o,e),s=this.setval(JSON.stringify(r),i)}}else s=this.setval(e,t);return s}getval(e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.read(e);case"Quantumult X":return $prefs.valueForKey(e);case"Node.js":return this.data=this.loaddata(),this.data[e];default:return this.data&&this.data[e]||null}}setval(e,t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.write(e,t);case"Quantumult X":return $prefs.setValueForKey(e,t);case"Node.js":return this.data=this.loaddata(),this.data[t]=e,this.writedata(),!0;default:return this.data&&this.data[t]||null}}initGotEnv(e){this.got=this.got?this.got:require("got").got,this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,e&&(e.headers=e.headers?e.headers:{},e&&(e.headers=e.headers?e.headers:{},void 0===e.headers.cookie&&void 0===e.headers.Cookie&&void 0===e.cookieJar&&(e.cookieJar=this.ckjar)))}get(e,t=(()=>{})){switch(e.headers&&(delete e.headers["Content-Type"],delete e.headers["Content-Length"],delete e.headers["content-type"],delete e.headers["content-length"]),e.params&&(e.url+="?"+this.queryStr(e.params)),void 0===e.followRedirect||e.followRedirect||((this.isSurge()||this.isLoon())&&(e["auto-redirect"]=!1),this.isQuanX()&&(e.opts?e.opts.redirection=!1:e.opts={redirection:!1})),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(e.headers=e.headers||{},Object.assign(e.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(e,((e,s,i)=>{!e&&s&&(s.body=i,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),t(e,s,i)}));break;case"Quantumult X":this.isNeedRewrite&&(e.opts=e.opts||{},Object.assign(e.opts,{hints:!1})),$task.fetch(e).then((e=>{const{statusCode:s,statusCode:i,headers:o,body:r,bodyBytes:a}=e;t(null,{status:s,statusCode:i,headers:o,body:r,bodyBytes:a},r,a)}),(e=>t(e&&e.error||"UndefinedError")));break;case"Node.js":let s=require("iconv-lite");this.initGotEnv(e),this.got(e).on("redirect",((e,t)=>{try{if(e.headers["set-cookie"]){const s=e.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),t.cookieJar=this.ckjar}}catch(e){this.logErr(e)}})).then((e=>{const{statusCode:i,statusCode:o,headers:r,rawBody:a}=e,n=s.decode(a,this.encoding);t(null,{status:i,statusCode:o,headers:r,rawBody:a,body:n},n)}),(e=>{const{message:i,response:o}=e;t(i,o,o&&s.decode(o.rawBody,this.encoding))}));break}}post(e,t=(()=>{})){const s=e.method?e.method.toLocaleLowerCase():"post";switch(e.body&&e.headers&&!e.headers["Content-Type"]&&!e.headers["content-type"]&&(e.headers["content-type"]="application/x-www-form-urlencoded"),e.headers&&(delete e.headers["Content-Length"],delete e.headers["content-length"]),void 0===e.followRedirect||e.followRedirect||((this.isSurge()||this.isLoon())&&(e["auto-redirect"]=!1),this.isQuanX()&&(e.opts?e.opts.redirection=!1:e.opts={redirection:!1})),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(e.headers=e.headers||{},Object.assign(e.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient[s](e,((e,s,i)=>{!e&&s&&(s.body=i,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),t(e,s,i)}));break;case"Quantumult X":e.method=s,this.isNeedRewrite&&(e.opts=e.opts||{},Object.assign(e.opts,{hints:!1})),$task.fetch(e).then((e=>{const{statusCode:s,statusCode:i,headers:o,body:r,bodyBytes:a}=e;t(null,{status:s,statusCode:i,headers:o,body:r,bodyBytes:a},r,a)}),(e=>t(e&&e.error||"UndefinedError")));break;case"Node.js":let i=require("iconv-lite");this.initGotEnv(e);const{url:o,...r}=e;this.got[s](o,r).then((e=>{const{statusCode:s,statusCode:o,headers:r,rawBody:a}=e,n=i.decode(a,this.encoding);t(null,{status:s,statusCode:o,headers:r,rawBody:a,body:n},n)}),(e=>{const{message:s,response:o}=e;t(s,o,o&&i.decode(o.rawBody,this.encoding))}));break}}time(e,t=null){const s=t?new Date(t):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let t in i)new RegExp("("+t+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?i[t]:("00"+i[t]).substr((""+i[t]).length)));return e}queryStr(e){let t="";for(const s in e){let i=e[s];null!=i&&""!==i&&("object"==typeof i&&(i=JSON.stringify(i)),t+=`${s}=${i}&`)}return t=t.substring(0,t.length-1),t}msg(t=e,s="",i="",o={}){const r=e=>{const{$open:t,$copy:s,$media:i,$mediaMime:o}=e;switch(typeof e){case void 0:return e;case"string":switch(this.getEnv()){case"Surge":case"Stash":default:return{url:e};case"Loon":case"Shadowrocket":return e;case"Quantumult X":return{"open-url":e};case"Node.js":return}case"object":switch(this.getEnv()){case"Surge":case"Stash":case"Shadowrocket":default:{const r={};let a=e.openUrl||e.url||e["open-url"]||t;a&&Object.assign(r,{action:"open-url",url:a});let n=e["update-pasteboard"]||e.updatePasteboard||s;n&&Object.assign(r,{action:"clipboard",text:n});let h=e.mediaUrl||e["media-url"]||i;if(h){let e,t;if(h.startsWith("http"));else if(h.startsWith("data:")){const[s]=h.split(";"),[,i]=h.split(",");e=i,t=s.replace("data:","")}else{e=h,t=(e=>{const t={JVBERi0:"application/pdf",R0lGODdh:"image/gif",R0lGODlh:"image/gif",iVBORw0KGgo:"image/png","/9j/":"image/jpg"};for(var s in t)if(0===e.indexOf(s))return t[s];return null})(h)}Object.assign(r,{"media-url":h,"media-base64":e,"media-base64-mime":o??t})}return Object.assign(r,{"auto-dismiss":e["auto-dismiss"],sound:e.sound}),r}case"Loon":{const s={};let o=e.openUrl||e.url||e["open-url"]||t;o&&Object.assign(s,{openUrl:o});let r=e.mediaUrl||e["media-url"]||i;return r&&Object.assign(s,{mediaUrl:r}),console.log(JSON.stringify(s)),s}case"Quantumult X":{const o={};let r=e["open-url"]||e.url||e.openUrl||t;r&&Object.assign(o,{"open-url":r});let a=e.mediaUrl||e["media-url"]||i;a&&Object.assign(o,{"media-url":a});let n=e["update-pasteboard"]||e.updatePasteboard||s;return n&&Object.assign(o,{"update-pasteboard":n}),console.log(JSON.stringify(o)),o}case"Node.js":return}default:return}};if(!this.isMute)switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:$notification.post(t,s,i,r(o));break;case"Quantumult X":$notify(t,s,i,r(o));break;case"Node.js":break}if(!this.isMuteLog){let e=["","==============📣系统通知📣=============="];e.push(t),s&&e.push(s),i&&e.push(i),console.log(e.join("\n")),this.logs=this.logs.concat(e)}}debug(...e){this.logLevels[this.logLevel]<=this.logLevels.debug&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.debug}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}info(...e){this.logLevels[this.logLevel]<=this.logLevels.info&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.info}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}warn(...e){this.logLevels[this.logLevel]<=this.logLevels.warn&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.warn}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}error(...e){this.logLevels[this.logLevel]<=this.logLevels.error&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.error}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}log(...e){e.length>0&&(this.logs=[...this.logs,...e]),console.log(e.map((e=>e??String(e))).join(this.logSeparator))}logErr(e,t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:this.log("",`❗️${this.name}, 错误!`,t,e);break;case"Node.js":this.log("",`❗️${this.name}, 错误!`,t,void 0!==e.message?e.message:e,e.stack);break}}wait(e){return new Promise((t=>setTimeout(t,e)))}done(e={}){const t=((new Date).getTime()-this.startTime)/1e3;switch(this.log("",`🔔${this.name}, 结束! 🕛 ${t} 秒`),this.log(),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:$done(e);break;case"Node.js":process.exit(1)}}}(e,t)}