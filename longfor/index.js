
// ==UserScript==
// @name        Longfor 签到打卡
// @description 使用 env.js 框架发送打卡请求
// @compatible  quantumultx
// @version     1.0
// ==/UserScript==

var _0xodl='jsjiami.com.v7';function _0x5a94(){const _0xde7eb4=(function(){return[_0xodl,'twjObsIjkNqiQAaLmOil.hRGcxqwoHJmlG.vduh7==','WO/dQmowWQyd','W4FdOaVcG8kX','amkcWOxdI8ktW5FcUW','CmotFtjgsW','W5BdNSk4WRO','z2VdRZJdGSoktW','bXKHWQTJa8kAWO0pjrGHz1f6q8oPWR0ywmkXimkqwSktou7dTCkycsmGk2VdTMm','W4pdRLfDw8owW7aAWPXA','WRddGSoQDSoM','W7K6WPJcTG','dLZcQWm','W6tcNmoxsCkc','jSkZW6qJebtdGa','4PUt77UbWPNORk/MSAFLPPROT5ZdRxq','qmoiCY1AxCo+W6hcUey','WQPJFJFcL8ozWR4EW5TbW4hcQa42','vb8Lkmog','W5ldQXxcISkjouRcHCkHW6XsFvfqtGm','qmoiydbbsCouW6JcPq','WQ3dP8o/WQGo','W4e4uSoWzG','WRhcR0ZdIxtdRCks','rIhcLgrvWQbkWQhcVXddQv9CW4C','WQRcVKZdMwtdRmkID8ogcq','W7NdQbzKBNe','W6BdLbBdQmkHW4nqE1BdPSkCqq','v8kSW6/dH3S','iqiSW7y','4PY1WOFORR3MS7NPLR7ORjtdIEISHoAzOUAuS8k3W5DgWQO','W5SkzSo3zW','6i+o5y2X56Y05yQlW6tcLmkgWPJdV8oM5OUK5yId8kcmGW','W6C3WPzpWQ14aNv0r8kKhq','WP/cP13dU2S','tCkvFSoFWP/dJSkpW4FdTmkYW43cReJdRSoCkZ4GeLtcHCo1z8ojWRjJW63cJCkpWQVcSuy','dflcOq','ifDoW7FdPq','4PUh77IUfUITLoAZKowLTUI0PSo+CW','WQJcHvZdThq','EfJcULSD','WRqViG','WRq5nSkYCmoxaW','uGVdS1FdLmk4kmoAW6yIWRtcKmkuvq','nefAEmkdW596WOhdHb4MW7nk','FmkWWRWIrL7cIX86iCkVi8kgWOnqW7/dRfVcUSkpnqDSWQPLaMjfCSkHW5qSWRX7wt4','o0xdMqldPG','zmoHrG','BJ7cGSoQECkzWRi'].concat((function(){return['h8kEWR3dJSkI','vmozzG','WP89vq','W6xcKWSb','WRSpWRFcTJakWQ0','WORdOmoxWPObWPa','4P6AoEISQoAXToAiPowjG8oLW7W','4P2kuUIUNoAWJEMwQUISIwVORjRMMB7ML5yZW70YW5G','4P+Q6k2C5yAd6i2L5y6vW7v3W7K','6zAp6k2Y6i6d5y+556Yi5yQNW5qqWP1fW7qz5AAf6lsw','W6OrsSoACq','WP7cS8oy','W5/cO8oWemozWP7dJw4sWO7cV8k5WO7cRKhcOeZcJmoSn8oivxRcN8oivSkRCxpcTLJdRMJcJY8E','W4q9WRvZWQ3cRmkVWPRdRmoqA8opWR5XWO/dICoHl3nFW7xcRNVdLmk4WPzdAenmW5yh','W6FcG1hcKSoLWP5i','W78AW4SrWO9ZWOW5W54JcmksFCk/W6uFW5BdLHlcMmoseCkSk8omkX4eW5TS','WQXyWO9pW5yOW5ueW5WGnCo2Eq','WR3cG0JcUmo0WPLi','WQ8IkSkZW4hdV8oeWPVdNaFcScP5eeLGWONdVSkOW4dcMh7cJSoCm8oRjx4Id8ozWQm','W7RdSLm','W5dcMZ9k','6zAg6k+26i2O5y+G562k5yUSWPZcS8o1W5XZW7lLPOZOTOi','WRSQzItdSG','WQlcIvlcTCoHWPLu','iuVdIdJdOSooxWTgvW','ivRdNsBdPmosCG','umoEW5FcNmooWPpcKmkeW6VcTSoXia','xgvcWRhdVZBcH8oIW7SZ','W4hdS217jq','zrmFlmoB','W6/cQH82Ea','WPDJW6a7','dmojlSoEW4hcKSkhWPBdSG','W4VdSSkVuW','W481W7dcLmou','WRpcJmoVWPlcHCoD','DMNcUuyDWODk','W4NcVLi6ls3dOq','W7RdUsNcISk9','WRRcJ0ZdHNG','WQ86W5eSWQ5PWRS','W692WQXc','W40jhmkZC8oPia','x1RcN3i','WOBdTmoUB8kIcLHRW6LT','WR/dQmoS','WQlcTmowFCkZqLO','WQbEfCkdoGBdIYtcGbndW5rfW6y','W5dcIrBcICkaoetdPCobW65rdv1suWC'].concat((function(){return['amkRW43cSLBdHmkx','BGyFp8oaW5XKW4ldRrfcW5uLWPb7y8kvDwpdJSksbmoDWOfaW5RcLSohh8kIlmkwW7XTsmk8CmoLWQNcIJmvWQJdGSoInNHyW6zCWRKpCXePWRlcRLy8W5f+jmkhvtZcOe3cOgTfA0FcHxTnWQ1sW4FdQttdP8kTm8okymkAlmk5W58UCbTA','E8oqwd9J','jmkSj8kqE8oRWPe9vh8VeN0','WQdcRWeCt8kJWQaUWPD9W4KvW54','4P2IaEIVGEAZOEAkGUwlMdNdPa','bSkiWPddHSkqW5ZcHCkeW70','wSouW5xcMmogWPZdUCkBW5tcISoun8o9','gmkgWOddQ8kN','W7m9W6K4WPq','cGvYfva','uCotDIa','FgpcVfS','WPRcUCoEWR3cPCo2yW','WQPJFJFcL8oiWPuPW4bMW4xdRJ83WRpcNwS','W6i/WQxcPsa','Du9eWObwWQn9W7ddJey','vLlcSsVcMSoOAa','W7/dLea','BttcHCo0','BcitW7hcUNy','W4GBjCk4za','W7mzW5W','W7ifW5W','W5n8yCoRWPZcOSkuWOxdMbJcSt1ItYW4W5FcQmo7W4pcIGJdQ8kWjSk0rsf9uCkmWRnJW7JcMSkPWP0mj8ockJlcU0pcMCk4EZWhyCorqwKgW5xdHJTGWRTyW63dUmkBW7GUW4FdH8kcBJxdTmomwr7cPGC4fmkDp8kWWRpdJ8o+WOhcVmoDbSoSbI10WRbdW6n6ACodiabVW7GRjuJdKsX6cW','W7j8WQTEw8k4','WRH7W5iiW613rZDWq8oLhmoRW4hcNCoUW7tcKgJcSmkGW6rRe8oJz2ZdU0CkW4hdTxpdSsW6WOxcLXvgscagncJdRIOsWRtdPY3cSWXFWRueW4iNeejZiSospSoLWRW0CW5MELNdQubeWPuXp8k/z31gE3i','jIusW7FcRG','4PMZ77QiWQVOR6RMS43LPBROTjO0WQC','DCk4W6FdNa','W6pdNHldRCkIW44cx17dUCk8AmoK','W4RdPCkmW6RdUmkYsb4liCkWWO8','W5VdHsZcNCkLWPpcRxHWW4alW5BdL8oadSomWP1VoxdcHXtcUSkPW4f7WQzQygupuCofW7SEW54uaMFcTrSeW4ZdQh3cJ8oVW44CW4BdU8kgq1xdOuyDWOmiWQ4tW5rmi3tcQM3cISkgESoIBHrmscpdKrVdOvxdIre7kmkt','WORcPmoEWPlcTG','kK5mW4RdVITIW6TMW7jtbcGqW7VdVSk0W4jVmuDpgwZcUdSHW5y5WRRdGGBdL2fxWQNdPSkyW7xcGqO1AwOzW6pcG8kamSknWRddLmoXW4xdLaldGtxdI1Ctl8oIWRRdTmkYfCkmBCkiiColW6tdOCkvW6PHWOGDW6xcLCotl01temk9WOxcUNGJWPxdRSoncCoCDY5/W7eQWPOPWQNdIrtdL8ofWRS','W5RcHLpdI8kv','W47cKf4','ASkIW7zNlmo8WPK','WQxdLSkjh8ocdZVcJqldSK3cHCon','WRhcVLNdNq','zb0pnG','W79JA8oUWPNcRCkuW57cHfNdRZiGvrm+WOpcPCo2WPNdMdJdNSkro8kiqq8/bW','WOmvaSkhWPu','W40ycCkN','W5fdt8olWR/cGmkM','W7ahrmol'];}()));}()));}());_0x5a94=function(){return _0xde7eb4;};return _0x5a94();};const _0x48118f=_0x4e14;(function(_0x31fd80,_0x33a0e3,_0x3877e7,_0x44f981,_0x7fef9b,_0x5c08aa,_0x4d765a){return _0x31fd80=_0x31fd80>>0x7,_0x5c08aa='hs',_0x4d765a='hs',function(_0xa0927a,_0x3d0103,_0x518813,_0x3f89d9,_0x5b6d41){const _0x57a9ac=_0x4e14;_0x3f89d9='tfi',_0x5c08aa=_0x3f89d9+_0x5c08aa,_0x5b6d41='up',_0x4d765a+=_0x5b6d41,_0x5c08aa=_0x518813(_0x5c08aa),_0x4d765a=_0x518813(_0x4d765a),_0x518813=0x0;const _0x594530=_0xa0927a();while(!![]&&--_0x44f981+_0x3d0103){try{_0x3f89d9=parseInt(_0x57a9ac(0x204,'$AGw'))/0x1*(-parseInt(_0x57a9ac(0x226,'8Dpu'))/0x2)+parseInt(_0x57a9ac(0x24e,'b6!F'))/0x3+-parseInt(_0x57a9ac(0x225,'b6!F'))/0x4*(parseInt(_0x57a9ac(0x23a,'Z1W*'))/0x5)+-parseInt(_0x57a9ac(0x1e4,'b6!F'))/0x6*(parseInt(_0x57a9ac(0x25f,'Cf[B'))/0x7)+-parseInt(_0x57a9ac(0x20a,'L@ic'))/0x8+-parseInt(_0x57a9ac(0x20b,'nsT1'))/0x9+parseInt(_0x57a9ac(0x25e,'mg[t'))/0xa;}catch(_0x4dddc0){_0x3f89d9=_0x518813;}finally{_0x5b6d41=_0x594530[_0x5c08aa]();if(_0x31fd80<=_0x44f981)_0x518813?_0x7fef9b?_0x3f89d9=_0x5b6d41:_0x7fef9b=_0x5b6d41:_0x518813=_0x5b6d41;else{if(_0x518813==_0x7fef9b['replace'](/[HwJqAObxhRLdGlQtIkNu=]/g,'')){if(_0x3f89d9===_0x3d0103){_0x594530['un'+_0x5c08aa](_0x5b6d41);break;}_0x594530[_0x4d765a](_0x5b6d41);}}}}}(_0x3877e7,_0x33a0e3,function(_0x2df57a,_0x4607eb,_0x3df3ee,_0x4294d1,_0x44da9e,_0x5ed3fd,_0x4cdc3d){return _0x4607eb='\x73\x70\x6c\x69\x74',_0x2df57a=arguments[0x0],_0x2df57a=_0x2df57a[_0x4607eb](''),_0x3df3ee='\x72\x65\x76\x65\x72\x73\x65',_0x2df57a=_0x2df57a[_0x3df3ee]('\x76'),_0x4294d1='\x6a\x6f\x69\x6e',(0x1b2645,_0x2df57a[_0x4294d1](''));});}(0x5f00,0x5ef0f,_0x5a94,0xc0),_0x5a94)&&(_0xodl=0xc0);const $=new Env('Longfor\x20签到打卡'),ckName=_0x48118f(0x1e7,'b6!F'),key='longfor_apikey';let userCookie=$['getjson'](ckName),apiKey=$['getjson'](key);(async()=>{const _0x4103de=_0x48118f,_0x375f33={'dXyRb':_0x4103de(0x215,'gvpY'),'IHqgk':_0x4103de(0x23c,'nsT1'),'qOqYe':_0x4103de(0x21f,'79Y)'),'fTbye':_0x4103de(0x238,'wXrD'),'MOmUM':function(_0x73a7b0,_0x95fc5c){return _0x73a7b0&&_0x95fc5c;},'mWREr':_0x4103de(0x253,'gjSm'),'Uuaoj':_0x4103de(0x1df,'nsT1'),'xxaKv':function(_0x3cadc0,_0x54d350){return _0x3cadc0!=_0x54d350;},'FgnWk':_0x4103de(0x1f6,'gjSm'),'nnnVR':function(_0x283b85,_0x3a7805){return _0x283b85===_0x3a7805;},'EgvNd':'VqtoZ','xyjhr':function(_0x473976){return _0x473976();},'IbFEd':function(_0xf704a1,_0x147ce8){return _0xf704a1||_0x147ce8;},'dhGYf':function(_0x44cfa5,_0x25b18d){return _0x44cfa5(_0x25b18d);},'tQSng':_0x4103de(0x1e8,'79Y)')};if(_0x375f33[_0x4103de(0x228,'8Dpu')](typeof $request,_0x375f33[_0x4103de(0x235,'et]i')])){if(_0x375f33['nnnVR'](_0x4103de(0x1f2,'nsT1'),_0x375f33['EgvNd'])){const _0x396a9a=_0x1915d7[_0x4103de(0x241,'#1dV')][_0x375f33[_0x4103de(0x1f4,'f)ZK')]],_0x5ed220=_0x1d7f5d['headers'][_0x375f33[_0x4103de(0x1fc,'Rwwz')]]||_0x375f33[_0x4103de(0x25a,'elmz')],_0xef2056=_0x3be9ec[_0x4103de(0x237,'e$a6')][_0x375f33[_0x4103de(0x25b,'CeV*')]],_0xa794c7=_0x1eafdc[_0x4103de(0x24a,'elmz')][_0x4103de(0x244,'gvpY')],_0x33be75=_0x4103de(0x256,'gjSm'),_0x399658=_0x4103de(0x1e2,'Gsw8'),_0x22646f=_0x4103de(0x260,'#1dV');_0x375f33['MOmUM'](_0x396a9a,_0xa794c7)&&_0xef2056&&_0x33be75?(_0x54999e[_0x4103de(0x22c,'Fufj')]({'X-LF-DXRisk-Token':_0x396a9a,'Content-Type':_0x4103de(0x1e5,'(4]U'),'User-Agent':_0x5ed220,'X-LF-UserToken':_0xa794c7,'Cookie':_0xef2056,'authtoken':_0x33be75},_0x11c228),_0x453bb9[_0x4103de(0x1ed,'b6!F')]({'APPKEY':_0x399658,'wxkey':_0x22646f},_0x44b5a3),_0x3935b6[_0x4103de(0x262,'MOlK')](_0x37b0aa[_0x4103de(0x267,'f)ZK')],'',_0x375f33[_0x4103de(0x210,'(4]U')])):_0x44353d[_0x4103de(0x21d,'(4]U')](_0x1488d4[_0x4103de(0x250,'sMNU')],'',_0x375f33[_0x4103de(0x24f,'Uulh')]);}else{await _0x375f33[_0x4103de(0x1e0,'Y9sl')](getCookie);return;}}if(_0x375f33[_0x4103de(0x252,'Y9sl')](!userCookie,!apiKey))return $['log'](_0x4103de(0x1de,'ISdI'));await getSignLongforApp(_0x4103de(0x1e3,'^*32')),await $[_0x4103de(0x224,'Uulh')](0x3e8),await _0x375f33[_0x4103de(0x248,'et]i')](getSignLongforApp,_0x375f33[_0x4103de(0x236,'Rwwz')]),await $[_0x4103de(0x1f7,'Gsw8')](0x3e8),await _0x375f33[_0x4103de(0x22a,'UwO7')](lotteryChance),await $[_0x4103de(0x23e,'6D)@')](0x3e8),await lotteryClick();})()[_0x48118f(0x1f3,'Cf[B')](_0x4ecbd0=>$[_0x48118f(0x20d,'e$a6')][_0x48118f(0x239,'ISdI')](_0x4ecbd0[_0x48118f(0x25d,'BWS$')]||_0x4ecbd0))['finally'](async()=>{$['done']();});async function getSignLongforApp(_0x52523c){const _0x4c8247=_0x48118f,_0x1d1101={'mQjVV':_0x4c8247(0x21b,']CoM'),'ghRLw':function(_0x4314c5,_0x4ead2d){return _0x4314c5===_0x4ead2d;},'HlJfL':function(_0x451b76){return _0x451b76();}},_0x5d55be=_0x4c8247(0x208,'Cf[B'),_0x2f3b4b={...userCookie,'X-GAIA-API-KEY':apiKey[_0x4c8247(0x1f9,'8Dpu')],'X-LF-Bu-Code':_0x1d1101['mQjVV'],'X-LF-DXRisk-Source':'5','X-LF-Channel':'C3'},_0x24b77f=JSON['stringify']({'activity_no':_0x52523c});try{const _0x53a90e=await $[_0x4c8247(0x22e,'elmz')][_0x4c8247(0x21a,'0v38')]({'url':_0x5d55be,'headers':_0x2f3b4b,'body':_0x24b77f});_0x1d1101['ghRLw'](_0x53a90e['statusCode'],0xc8)?$[_0x4c8247(0x1e1,'8Dpu')](_0x4c8247(0x20c,'LTKb')+_0x53a90e['body']):$[_0x4c8247(0x21e,'(4]U')](_0x4c8247(0x259,'LTKb')+_0x53a90e['statusCode']+'\x0a'+_0x53a90e[_0x4c8247(0x234,'Y9sl')]);}catch(_0x23ef51){$['log'](_0x4c8247(0x1dd,'Cf[B')+_0x23ef51),await _0x1d1101[_0x4c8247(0x209,'wXrD')](delectCK);}}async function lotteryChance(){const _0xa1e46b=_0x48118f,_0x17bfed={'yfkmh':_0xa1e46b(0x240,'$AGw'),'xiwkH':'C216G18R54O4HQVV','ldTgE':'AP25N062U6LDDSKR','kMDAD':function(_0x272d20,_0xfd7416){return _0x272d20===_0xfd7416;},'JvyVJ':_0xa1e46b(0x23d,'OU7Z'),'dXaJY':_0xa1e46b(0x258,'LTKb')},_0x4134e9=_0xa1e46b(0x227,'Rwwz'),_0x1b511d={...userCookie,'x-gaia-api-key':apiKey[_0x17bfed['yfkmh']],'bucode':'C30403','channel':'C3','X-LF-DXRisk-Source':'5'},_0x329443={'component_no':_0x17bfed['xiwkH'],'activity_no':_0x17bfed[_0xa1e46b(0x216,'6D)@')]};try{const _0x57573b=await $[_0xa1e46b(0x1ea,'g1me')][_0xa1e46b(0x265,'wXrD')]({'url':_0x4134e9,'headers':_0x1b511d,'searchParams':_0x329443});_0x57573b[_0xa1e46b(0x1f1,']CoM')]===0xc8?_0x17bfed[_0xa1e46b(0x231,'nIpR')](_0x17bfed['JvyVJ'],_0xa1e46b(0x1fd,'elmz'))?$[_0xa1e46b(0x22b,'UwO7')]('✅\x20请求成功:\x20'+_0x57573b['body']):(_0x46cad2['setjson'](null,_0x4b35e8),_0x541157[_0xa1e46b(0x263,'0v38')](null,_0x35824a)):$['log'](_0xa1e46b(0x223,'OU7Z')+_0x57573b[_0xa1e46b(0x24c,'elmz')]+'\x0a'+_0x57573b[_0xa1e46b(0x212,'wXrD')]);}catch(_0x5295fc){_0x17bfed['dXaJY']==='GvxTw'?($[_0xa1e46b(0x257,'mg[t')](_0xa1e46b(0x251,'gjSm')+_0x5295fc),await delectCK()):_0x184f84[_0xa1e46b(0x203,'OU7Z')](_0xa1e46b(0x1dc,'saip')+_0x3ccf5[_0xa1e46b(0x1f5,'^*32')]);}}function _0x4e14(_0x19468a,_0x120585){const _0x5a9425=_0x5a94();return _0x4e14=function(_0x4e144a,_0x140d34){_0x4e144a=_0x4e144a-0x1db;let _0x2a6d3e=_0x5a9425[_0x4e144a];if(_0x4e14['CdNSNx']===undefined){var _0x3b1e18=function(_0x10d6ff){const _0x236fc6='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3f73bd='',_0x111b01='';for(let _0x4bfdd7=0x0,_0x14befe,_0xcee76b,_0x59d1a1=0x0;_0xcee76b=_0x10d6ff['charAt'](_0x59d1a1++);~_0xcee76b&&(_0x14befe=_0x4bfdd7%0x4?_0x14befe*0x40+_0xcee76b:_0xcee76b,_0x4bfdd7++%0x4)?_0x3f73bd+=String['fromCharCode'](0xff&_0x14befe>>(-0x2*_0x4bfdd7&0x6)):0x0){_0xcee76b=_0x236fc6['indexOf'](_0xcee76b);}for(let _0x41d039=0x0,_0x4ab3a0=_0x3f73bd['length'];_0x41d039<_0x4ab3a0;_0x41d039++){_0x111b01+='%'+('00'+_0x3f73bd['charCodeAt'](_0x41d039)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x111b01);};const _0x495158=function(_0x24d5e3,_0x3aabf1){let _0x817f8f=[],_0x1129a5=0x0,_0x45f3ab,_0x184f84='';_0x24d5e3=_0x3b1e18(_0x24d5e3);let _0x3ccf5;for(_0x3ccf5=0x0;_0x3ccf5<0x100;_0x3ccf5++){_0x817f8f[_0x3ccf5]=_0x3ccf5;}for(_0x3ccf5=0x0;_0x3ccf5<0x100;_0x3ccf5++){_0x1129a5=(_0x1129a5+_0x817f8f[_0x3ccf5]+_0x3aabf1['charCodeAt'](_0x3ccf5%_0x3aabf1['length']))%0x100,_0x45f3ab=_0x817f8f[_0x3ccf5],_0x817f8f[_0x3ccf5]=_0x817f8f[_0x1129a5],_0x817f8f[_0x1129a5]=_0x45f3ab;}_0x3ccf5=0x0,_0x1129a5=0x0;for(let _0x16e6e7=0x0;_0x16e6e7<_0x24d5e3['length'];_0x16e6e7++){_0x3ccf5=(_0x3ccf5+0x1)%0x100,_0x1129a5=(_0x1129a5+_0x817f8f[_0x3ccf5])%0x100,_0x45f3ab=_0x817f8f[_0x3ccf5],_0x817f8f[_0x3ccf5]=_0x817f8f[_0x1129a5],_0x817f8f[_0x1129a5]=_0x45f3ab,_0x184f84+=String['fromCharCode'](_0x24d5e3['charCodeAt'](_0x16e6e7)^_0x817f8f[(_0x817f8f[_0x3ccf5]+_0x817f8f[_0x1129a5])%0x100]);}return _0x184f84;};_0x4e14['LqxSMc']=_0x495158,_0x19468a=arguments,_0x4e14['CdNSNx']=!![];}const _0x17ae21=_0x5a9425[0x0],_0x1a6549=_0x4e144a+_0x17ae21,_0x3dbd4d=_0x19468a[_0x1a6549];return!_0x3dbd4d?(_0x4e14['IrFijt']===undefined&&(_0x4e14['IrFijt']=!![]),_0x2a6d3e=_0x4e14['LqxSMc'](_0x2a6d3e,_0x140d34),_0x19468a[_0x1a6549]=_0x2a6d3e):_0x2a6d3e=_0x3dbd4d,_0x2a6d3e;},_0x4e14(_0x19468a,_0x120585);}async function lotteryClick(){const _0x234c23=_0x48118f,_0x1e0f1c={'AINIM':'wxkey','tgpPV':_0x234c23(0x246,'F)ip'),'LdHGZ':function(_0x590871,_0xc79c6b){return _0x590871===_0xc79c6b;},'xFAxr':'dutfY','FfbQu':_0x234c23(0x211,'V@Ex'),'izpNq':function(_0x10c7ee,_0x2327a1){return _0x10c7ee===_0x2327a1;},'opYDK':'XPStX','FmpVz':function(_0x3185e0){return _0x3185e0();}},_0x4735ec=_0x234c23(0x221,'&$m@'),_0x285120={...userCookie,'x-gaia-api-key':apiKey[_0x1e0f1c['AINIM']],'bucode':_0x234c23(0x24d,'kA*['),'channel':'C3','X-LF-DXRisk-Source':'5'},_0x1cb46e=JSON[_0x234c23(0x247,'wXrD')]({'component_no':_0x234c23(0x206,'F)ip'),'activity_no':_0x1e0f1c['tgpPV'],'batch_no':''});try{if(_0x1e0f1c[_0x234c23(0x1f8,'*b^w')](_0x1e0f1c['xFAxr'],_0x1e0f1c['FfbQu']))_0x14befe['log']('✅\x20请求成功:\x20'+_0xcee76b[_0x234c23(0x22f,'Cf[B')]);else{const _0x2b5128=await $[_0x234c23(0x232,'z7qL')][_0x234c23(0x1ff,'saip')]({'url':_0x4735ec,'headers':_0x285120,'body':_0x1cb46e});_0x1e0f1c[_0x234c23(0x261,'Z1W*')](_0x2b5128[_0x234c23(0x1ee,'Z1W*')],0xc8)?$['log']('✅\x20请求成功:\x20'+_0x2b5128['body']):$['log']('⚠️\x20请求失败:\x20'+_0x2b5128['statusCode']+'\x0a'+_0x2b5128['body']);}}catch(_0x20ac79){'XPStX'===_0x1e0f1c['opYDK']?($['log']('❌\x20请求错误\x20请更新CK:\x20'+_0x20ac79),await _0x1e0f1c[_0x234c23(0x255,'elmz')](delectCK)):_0x1ae49e[_0x234c23(0x219,'F)ip')]('⚠️\x20请求失败:\x20'+_0x2d47f4[_0x234c23(0x217,'R82m')]+'\x0a'+_0x45384a[_0x234c23(0x213,'CeV*')]);}}async function delectCK(){const _0x3f7a99=_0x48118f;$['setjson'](null,ckName),$[_0x3f7a99(0x1fb,'kA*[')](null,key);}async function getCookie(){const _0x2f531a=_0x48118f,_0x292f6c={'RmNgu':function(_0x3643cc,_0x1fc364){return _0x3643cc!=_0x1fc364;},'mwXor':_0x2f531a(0x233,'79Y)'),'ZSdVk':'X-LF-DXRisk-Token','IdTUH':_0x2f531a(0x202,'OU7Z'),'EIOKn':_0x2f531a(0x1db,'et]i'),'pzboX':function(_0x3c2f9a,_0x21afea){return _0x3c2f9a&&_0x21afea;},'padDQ':_0x2f531a(0x230,'79Y)'),'bBbIR':'获取签到Cookie成功🎉','SPrBe':function(_0x55f0f6,_0x5ed34f){return _0x55f0f6!==_0x5ed34f;},'iFSdq':_0x2f531a(0x264,'e$a6')};if($request&&_0x292f6c[_0x2f531a(0x245,'Cf[B')]($request[_0x2f531a(0x220,'saip')],_0x292f6c[_0x2f531a(0x21c,'z7qL')])){const _0x591a86=$request[_0x2f531a(0x1fa,'CeV*')][_0x292f6c['ZSdVk']],_0xdbf185=$request['headers'][_0x292f6c[_0x2f531a(0x1ec,'gvpY')]]||_0x2f531a(0x229,'LTKb'),_0x305cbb=$request[_0x2f531a(0x200,'z7qL')][_0x292f6c['EIOKn']],_0x1a75e7=$request[_0x2f531a(0x214,'8Dpu')][_0x2f531a(0x24b,'CeV*')],_0x35e649='424d85f4b1904db3816df909834c885c',_0x368364=_0x2f531a(0x23b,'0LVb'),_0x23590a='2f9e3889-91d9-4684-8ff5-24d881438eaf';_0x292f6c['pzboX'](_0x591a86,_0x1a75e7)&&_0x305cbb&&_0x35e649?($[_0x2f531a(0x1ef,'Z1W*')]({'X-LF-DXRisk-Token':_0x591a86,'Content-Type':_0x292f6c[_0x2f531a(0x20f,'e$a6')],'User-Agent':_0xdbf185,'X-LF-UserToken':_0x1a75e7,'Cookie':_0x305cbb,'authtoken':_0x35e649},ckName),$[_0x2f531a(0x207,'ya(U')]({'APPKEY':_0x368364,'wxkey':_0x23590a},key),$[_0x2f531a(0x25c,'BWS$')]($[_0x2f531a(0x201,'[d]5')],'',_0x292f6c['bBbIR'])):_0x292f6c[_0x2f531a(0x249,'Y9sl')](_0x292f6c['iFSdq'],_0x292f6c[_0x2f531a(0x222,'sMNU')])?_0x24d5e3[_0x2f531a(0x1e9,'nsT1')](_0x2f531a(0x242,'ya(U')+_0x3aabf1[_0x2f531a(0x243,'wXrD')]+'\x0a'+_0x817f8f['body']):$[_0x2f531a(0x266,'gvpY')]($[_0x2f531a(0x23f,'mg[t')],'',_0x2f531a(0x1eb,'saip'));}}var version_ = 'jsjiami.com.v7';

function Env(e,t){class s{constructor(e){this.env=e}send(e,t="GET"){e="string"==typeof e?{url:e}:e;let s=this.get;"POST"===t&&(s=this.post);const i=new Promise(((t,i)=>{s.call(this,e,((e,s,o)=>{e?i(e):t(s)}))}));return e.timeout?((e,t=1e3)=>Promise.race([e,new Promise(((e,s)=>{setTimeout((()=>{s(new Error("请求超时"))}),t)}))]))(i,e.timeout):i}get(e){return this.send.call(this.env,e)}post(e){return this.send.call(this.env,e,"POST")}}return new class{constructor(e,t){this.logLevels={debug:0,info:1,warn:2,error:3},this.logLevelPrefixs={debug:"[DEBUG] ",info:"[INFO] ",warn:"[WARN] ",error:"[ERROR] "},this.logLevel="info",this.name=e,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.encoding="utf-8",this.startTime=(new Date).getTime(),Object.assign(this,t),this.log("",`🔔${this.name}, 开始!`)}getEnv(){return"undefined"!=typeof $environment&&$environment["surge-version"]?"Surge":"undefined"!=typeof $environment&&$environment["stash-version"]?"Stash":"undefined"!=typeof module&&module.exports?"Node.js":"undefined"!=typeof $task?"Quantumult X":"undefined"!=typeof $loon?"Loon":"undefined"!=typeof $rocket?"Shadowrocket":void 0}isNode(){return"Node.js"===this.getEnv()}isQuanX(){return"Quantumult X"===this.getEnv()}isSurge(){return"Surge"===this.getEnv()}isLoon(){return"Loon"===this.getEnv()}isShadowrocket(){return"Shadowrocket"===this.getEnv()}isStash(){return"Stash"===this.getEnv()}toObj(e,t=null){try{return JSON.parse(e)}catch{return t}}toStr(e,t=null,...s){try{return JSON.stringify(e,...s)}catch{return t}}getjson(e,t){let s=t;if(this.getdata(e))try{s=JSON.parse(this.getdata(e))}catch{}return s}setjson(e,t){try{return this.setdata(JSON.stringify(e),t)}catch{return!1}}getScript(e){return new Promise((t=>{this.get({url:e},((e,s,i)=>t(i)))}))}runScript(e,t){return new Promise((s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let o=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");o=o?1*o:20,o=t&&t.timeout?t.timeout:o;const[r,a]=i.split("@"),n={url:`http://${a}/v1/scripting/evaluate`,body:{script_text:e,mock_type:"cron",timeout:o},headers:{"X-Key":r,Accept:"*/*"},policy:"DIRECT",timeout:o};this.post(n,((e,t,i)=>s(i)))})).catch((e=>this.logErr(e)))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const e=this.path.resolve(this.dataFile),t=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(e),i=!s&&this.fs.existsSync(t);if(!s&&!i)return{};{const i=s?e:t;try{return JSON.parse(this.fs.readFileSync(i))}catch(e){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const e=this.path.resolve(this.dataFile),t=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(e),i=!s&&this.fs.existsSync(t),o=JSON.stringify(this.data);s?this.fs.writeFileSync(e,o):i?this.fs.writeFileSync(t,o):this.fs.writeFileSync(e,o)}}lodash_get(e,t,s){const i=t.replace(/\[(\d+)\]/g,".$1").split(".");let o=e;for(const e of i)if(o=Object(o)[e],void 0===o)return s;return o}lodash_set(e,t,s){return Object(e)!==e||(Array.isArray(t)||(t=t.toString().match(/[^.[\]]+/g)||[]),t.slice(0,-1).reduce(((e,s,i)=>Object(e[s])===e[s]?e[s]:e[s]=Math.abs(t[i+1])>>0==+t[i+1]?[]:{}),e)[t[t.length-1]]=s),e}getdata(e){let t=this.getval(e);if(/^@/.test(e)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(e),o=s?this.getval(s):"";if(o)try{const e=JSON.parse(o);t=e?this.lodash_get(e,i,""):t}catch(e){t=""}}return t}setdata(e,t){let s=!1;if(/^@/.test(t)){const[,i,o]=/^@(.*?)\.(.*?)$/.exec(t),r=this.getval(i),a=i?"null"===r?null:r||"{}":"{}";try{const t=JSON.parse(a);this.lodash_set(t,o,e),s=this.setval(JSON.stringify(t),i)}catch(t){const r={};this.lodash_set(r,o,e),s=this.setval(JSON.stringify(r),i)}}else s=this.setval(e,t);return s}getval(e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.read(e);case"Quantumult X":return $prefs.valueForKey(e);case"Node.js":return this.data=this.loaddata(),this.data[e];default:return this.data&&this.data[e]||null}}setval(e,t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.write(e,t);case"Quantumult X":return $prefs.setValueForKey(e,t);case"Node.js":return this.data=this.loaddata(),this.data[t]=e,this.writedata(),!0;default:return this.data&&this.data[t]||null}}initGotEnv(e){this.got=this.got?this.got:require("got").got,this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,e&&(e.headers=e.headers?e.headers:{},e&&(e.headers=e.headers?e.headers:{},void 0===e.headers.cookie&&void 0===e.headers.Cookie&&void 0===e.cookieJar&&(e.cookieJar=this.ckjar)))}get(e,t=(()=>{})){switch(e.headers&&(delete e.headers["Content-Type"],delete e.headers["Content-Length"],delete e.headers["content-type"],delete e.headers["content-length"]),e.params&&(e.url+="?"+this.queryStr(e.params)),void 0===e.followRedirect||e.followRedirect||((this.isSurge()||this.isLoon())&&(e["auto-redirect"]=!1),this.isQuanX()&&(e.opts?e.opts.redirection=!1:e.opts={redirection:!1})),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(e.headers=e.headers||{},Object.assign(e.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(e,((e,s,i)=>{!e&&s&&(s.body=i,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),t(e,s,i)}));break;case"Quantumult X":this.isNeedRewrite&&(e.opts=e.opts||{},Object.assign(e.opts,{hints:!1})),$task.fetch(e).then((e=>{const{statusCode:s,statusCode:i,headers:o,body:r,bodyBytes:a}=e;t(null,{status:s,statusCode:i,headers:o,body:r,bodyBytes:a},r,a)}),(e=>t(e&&e.error||"UndefinedError")));break;case"Node.js":let s=require("iconv-lite");this.initGotEnv(e),this.got(e).on("redirect",((e,t)=>{try{if(e.headers["set-cookie"]){const s=e.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),t.cookieJar=this.ckjar}}catch(e){this.logErr(e)}})).then((e=>{const{statusCode:i,statusCode:o,headers:r,rawBody:a}=e,n=s.decode(a,this.encoding);t(null,{status:i,statusCode:o,headers:r,rawBody:a,body:n},n)}),(e=>{const{message:i,response:o}=e;t(i,o,o&&s.decode(o.rawBody,this.encoding))}));break}}post(e,t=(()=>{})){const s=e.method?e.method.toLocaleLowerCase():"post";switch(e.body&&e.headers&&!e.headers["Content-Type"]&&!e.headers["content-type"]&&(e.headers["content-type"]="application/x-www-form-urlencoded"),e.headers&&(delete e.headers["Content-Length"],delete e.headers["content-length"]),void 0===e.followRedirect||e.followRedirect||((this.isSurge()||this.isLoon())&&(e["auto-redirect"]=!1),this.isQuanX()&&(e.opts?e.opts.redirection=!1:e.opts={redirection:!1})),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(e.headers=e.headers||{},Object.assign(e.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient[s](e,((e,s,i)=>{!e&&s&&(s.body=i,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),t(e,s,i)}));break;case"Quantumult X":e.method=s,this.isNeedRewrite&&(e.opts=e.opts||{},Object.assign(e.opts,{hints:!1})),$task.fetch(e).then((e=>{const{statusCode:s,statusCode:i,headers:o,body:r,bodyBytes:a}=e;t(null,{status:s,statusCode:i,headers:o,body:r,bodyBytes:a},r,a)}),(e=>t(e&&e.error||"UndefinedError")));break;case"Node.js":let i=require("iconv-lite");this.initGotEnv(e);const{url:o,...r}=e;this.got[s](o,r).then((e=>{const{statusCode:s,statusCode:o,headers:r,rawBody:a}=e,n=i.decode(a,this.encoding);t(null,{status:s,statusCode:o,headers:r,rawBody:a,body:n},n)}),(e=>{const{message:s,response:o}=e;t(s,o,o&&i.decode(o.rawBody,this.encoding))}));break}}time(e,t=null){const s=t?new Date(t):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let t in i)new RegExp("("+t+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?i[t]:("00"+i[t]).substr((""+i[t]).length)));return e}queryStr(e){let t="";for(const s in e){let i=e[s];null!=i&&""!==i&&("object"==typeof i&&(i=JSON.stringify(i)),t+=`${s}=${i}&`)}return t=t.substring(0,t.length-1),t}msg(t=e,s="",i="",o={}){const r=e=>{const{$open:t,$copy:s,$media:i,$mediaMime:o}=e;switch(typeof e){case void 0:return e;case"string":switch(this.getEnv()){case"Surge":case"Stash":default:return{url:e};case"Loon":case"Shadowrocket":return e;case"Quantumult X":return{"open-url":e};case"Node.js":return}case"object":switch(this.getEnv()){case"Surge":case"Stash":case"Shadowrocket":default:{const r={};let a=e.openUrl||e.url||e["open-url"]||t;a&&Object.assign(r,{action:"open-url",url:a});let n=e["update-pasteboard"]||e.updatePasteboard||s;n&&Object.assign(r,{action:"clipboard",text:n});let h=e.mediaUrl||e["media-url"]||i;if(h){let e,t;if(h.startsWith("http"));else if(h.startsWith("data:")){const[s]=h.split(";"),[,i]=h.split(",");e=i,t=s.replace("data:","")}else{e=h,t=(e=>{const t={JVBERi0:"application/pdf",R0lGODdh:"image/gif",R0lGODlh:"image/gif",iVBORw0KGgo:"image/png","/9j/":"image/jpg"};for(var s in t)if(0===e.indexOf(s))return t[s];return null})(h)}Object.assign(r,{"media-url":h,"media-base64":e,"media-base64-mime":o??t})}return Object.assign(r,{"auto-dismiss":e["auto-dismiss"],sound:e.sound}),r}case"Loon":{const s={};let o=e.openUrl||e.url||e["open-url"]||t;o&&Object.assign(s,{openUrl:o});let r=e.mediaUrl||e["media-url"]||i;return r&&Object.assign(s,{mediaUrl:r}),console.log(JSON.stringify(s)),s}case"Quantumult X":{const o={};let r=e["open-url"]||e.url||e.openUrl||t;r&&Object.assign(o,{"open-url":r});let a=e.mediaUrl||e["media-url"]||i;a&&Object.assign(o,{"media-url":a});let n=e["update-pasteboard"]||e.updatePasteboard||s;return n&&Object.assign(o,{"update-pasteboard":n}),console.log(JSON.stringify(o)),o}case"Node.js":return}default:return}};if(!this.isMute)switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:$notification.post(t,s,i,r(o));break;case"Quantumult X":$notify(t,s,i,r(o));break;case"Node.js":break}if(!this.isMuteLog){let e=["","==============📣系统通知📣=============="];e.push(t),s&&e.push(s),i&&e.push(i),console.log(e.join("\n")),this.logs=this.logs.concat(e)}}debug(...e){this.logLevels[this.logLevel]<=this.logLevels.debug&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.debug}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}info(...e){this.logLevels[this.logLevel]<=this.logLevels.info&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.info}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}warn(...e){this.logLevels[this.logLevel]<=this.logLevels.warn&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.warn}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}error(...e){this.logLevels[this.logLevel]<=this.logLevels.error&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.error}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}log(...e){e.length>0&&(this.logs=[...this.logs,...e]),console.log(e.map((e=>e??String(e))).join(this.logSeparator))}logErr(e,t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:this.log("",`❗️${this.name}, 错误!`,t,e);break;case"Node.js":this.log("",`❗️${this.name}, 错误!`,t,void 0!==e.message?e.message:e,e.stack);break}}wait(e){return new Promise((t=>setTimeout(t,e)))}done(e={}){const t=((new Date).getTime()-this.startTime)/1e3;switch(this.log("",`🔔${this.name}, 结束! 🕛 ${t} 秒`),this.log(),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:$done(e);break;case"Node.js":process.exit(1)}}}(e,t)}