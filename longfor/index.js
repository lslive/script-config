
// ==UserScript==
// @name        Longfor 签到打卡
// @description 使用 env.js 框架发送打卡请求
// @compatible  quantumultx
// @version     1.0
// ==/UserScript==
var _0xodO='jsjiami.com.v7';const _0x4331c2=_0x53cb;(function(_0x3400b3,_0x1ffc9b,_0x166e6b,_0x1380a6,_0x4cc828,_0x4ec994,_0x77a3ff){return _0x3400b3=_0x3400b3>>0x4,_0x4ec994='hs',_0x77a3ff='hs',function(_0x4f2ce1,_0x589bc2,_0x40f8ec,_0xd6435e,_0x434e54){const _0x34d6c0=_0x53cb;_0xd6435e='tfi',_0x4ec994=_0xd6435e+_0x4ec994,_0x434e54='up',_0x77a3ff+=_0x434e54,_0x4ec994=_0x40f8ec(_0x4ec994),_0x77a3ff=_0x40f8ec(_0x77a3ff),_0x40f8ec=0x0;const _0x8e8dba=_0x4f2ce1();while(!![]&&--_0x1380a6+_0x589bc2){try{_0xd6435e=-parseInt(_0x34d6c0(0x195,'Cj3u'))/0x1*(-parseInt(_0x34d6c0(0x17d,'31h('))/0x2)+-parseInt(_0x34d6c0(0x198,'^NaU'))/0x3*(parseInt(_0x34d6c0(0x17b,'S0Jl'))/0x4)+parseInt(_0x34d6c0(0x194,'vE%H'))/0x5*(parseInt(_0x34d6c0(0x1ad,'so^Z'))/0x6)+-parseInt(_0x34d6c0(0x143,'06*Z'))/0x7+-parseInt(_0x34d6c0(0x168,'Cj3u'))/0x8+-parseInt(_0x34d6c0(0x16a,'D32)'))/0x9*(parseInt(_0x34d6c0(0x1bc,'DSMe'))/0xa)+parseInt(_0x34d6c0(0x179,'6kxi'))/0xb*(parseInt(_0x34d6c0(0x1bb,'Cj3u'))/0xc);}catch(_0x41e1b3){_0xd6435e=_0x40f8ec;}finally{_0x434e54=_0x8e8dba[_0x4ec994]();if(_0x3400b3<=_0x1380a6)_0x40f8ec?_0x4cc828?_0xd6435e=_0x434e54:_0x4cc828=_0x434e54:_0x40f8ec=_0x434e54;else{if(_0x40f8ec==_0x4cc828['replace'](/[YdhuACHfnypJFTVtrSN=]/g,'')){if(_0xd6435e===_0x589bc2){_0x8e8dba['un'+_0x4ec994](_0x434e54);break;}_0x8e8dba[_0x77a3ff](_0x434e54);}}}}}(_0x166e6b,_0x1ffc9b,function(_0x562179,_0x11be45,_0x5c75a7,_0x1a2531,_0x46d878,_0x20ad3f,_0x5ea004){return _0x11be45='\x73\x70\x6c\x69\x74',_0x562179=arguments[0x0],_0x562179=_0x562179[_0x11be45](''),_0x5c75a7='\x72\x65\x76\x65\x72\x73\x65',_0x562179=_0x562179[_0x5c75a7]('\x76'),_0x1a2531='\x6a\x6f\x69\x6e',(0x1b264f,_0x562179[_0x1a2531](''));});}(0xca0,0x678e4,_0x2aed,0xcc),_0x2aed)&&(_0xodO=`\x27f`);const $=new Env('Longfor\x20签到打卡'),ckName=_0x4331c2(0x1aa,'[us8'),key=_0x4331c2(0x1b3,'6kxi');function _0x53cb(_0x2a1763,_0x5d5939){const _0x2aed8a=_0x2aed();return _0x53cb=function(_0x53cbeb,_0x15fd78){_0x53cbeb=_0x53cbeb-0x13d;let _0xb591a3=_0x2aed8a[_0x53cbeb];if(_0x53cb['ZvKKBS']===undefined){var _0x35d8c6=function(_0x295668){const _0x2e64bd='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x206c86='',_0x3965b3='';for(let _0x4fc9fe=0x0,_0x3e9e66,_0x3c85ee,_0x500bc1=0x0;_0x3c85ee=_0x295668['charAt'](_0x500bc1++);~_0x3c85ee&&(_0x3e9e66=_0x4fc9fe%0x4?_0x3e9e66*0x40+_0x3c85ee:_0x3c85ee,_0x4fc9fe++%0x4)?_0x206c86+=String['fromCharCode'](0xff&_0x3e9e66>>(-0x2*_0x4fc9fe&0x6)):0x0){_0x3c85ee=_0x2e64bd['indexOf'](_0x3c85ee);}for(let _0xf9f0b=0x0,_0x3100d0=_0x206c86['length'];_0xf9f0b<_0x3100d0;_0xf9f0b++){_0x3965b3+='%'+('00'+_0x206c86['charCodeAt'](_0xf9f0b)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x3965b3);};const _0x91d64a=function(_0x4f67ca,_0x448308){let _0x31a4f3=[],_0xf2a817=0x0,_0x27baa5,_0x454380='';_0x4f67ca=_0x35d8c6(_0x4f67ca);let _0x44ba87;for(_0x44ba87=0x0;_0x44ba87<0x100;_0x44ba87++){_0x31a4f3[_0x44ba87]=_0x44ba87;}for(_0x44ba87=0x0;_0x44ba87<0x100;_0x44ba87++){_0xf2a817=(_0xf2a817+_0x31a4f3[_0x44ba87]+_0x448308['charCodeAt'](_0x44ba87%_0x448308['length']))%0x100,_0x27baa5=_0x31a4f3[_0x44ba87],_0x31a4f3[_0x44ba87]=_0x31a4f3[_0xf2a817],_0x31a4f3[_0xf2a817]=_0x27baa5;}_0x44ba87=0x0,_0xf2a817=0x0;for(let _0xf9fb83=0x0;_0xf9fb83<_0x4f67ca['length'];_0xf9fb83++){_0x44ba87=(_0x44ba87+0x1)%0x100,_0xf2a817=(_0xf2a817+_0x31a4f3[_0x44ba87])%0x100,_0x27baa5=_0x31a4f3[_0x44ba87],_0x31a4f3[_0x44ba87]=_0x31a4f3[_0xf2a817],_0x31a4f3[_0xf2a817]=_0x27baa5,_0x454380+=String['fromCharCode'](_0x4f67ca['charCodeAt'](_0xf9fb83)^_0x31a4f3[(_0x31a4f3[_0x44ba87]+_0x31a4f3[_0xf2a817])%0x100]);}return _0x454380;};_0x53cb['wkpsYR']=_0x91d64a,_0x2a1763=arguments,_0x53cb['ZvKKBS']=!![];}const _0x2913e7=_0x2aed8a[0x0],_0xb36c17=_0x53cbeb+_0x2913e7,_0x509177=_0x2a1763[_0xb36c17];return!_0x509177?(_0x53cb['EFgwsZ']===undefined&&(_0x53cb['EFgwsZ']=!![]),_0xb591a3=_0x53cb['wkpsYR'](_0xb591a3,_0x15fd78),_0x2a1763[_0xb36c17]=_0xb591a3):_0xb591a3=_0x509177,_0xb591a3;},_0x53cb(_0x2a1763,_0x5d5939);}let userCookie=$[_0x4331c2(0x13d,'so^Z')](ckName),apiKey=$[_0x4331c2(0x175,'*0Ne')](key);(async()=>{const _0x223742=_0x4331c2,_0x5e0e72={'NCZIV':_0x223742(0x197,'H!nZ'),'bHNwC':_0x223742(0x157,'^NaU'),'MdQxG':function(_0x46e7b9){return _0x46e7b9();},'VcByM':function(_0x28557b,_0x1fa819){return _0x28557b||_0x1fa819;},'Tqqug':function(_0xb42e48,_0x1ee4cc){return _0xb42e48!==_0x1ee4cc;},'IvdbG':'giwKe','rVXiy':function(_0x5d030a,_0x48ab80){return _0x5d030a(_0x48ab80);},'rhSNH':_0x223742(0x19a,'Vl07'),'GFjHd':_0x223742(0x1ab,'nMbW')};if(typeof $request!=_0x5e0e72[_0x223742(0x184,'zJ^w')]){await _0x5e0e72[_0x223742(0x1a1,'$kPd')](getCookie);return;}if(_0x5e0e72[_0x223742(0x1b5,'f5yy')](!userCookie,!apiKey)){if(_0x5e0e72[_0x223742(0x190,'S0Jl')](_0x223742(0x191,'%(O)'),_0x5e0e72[_0x223742(0x147,'YKA1')]))return $[_0x223742(0x1b1,'T#Vo')](_0x223742(0x146,'VNQq'));else _0x19c6b3[_0x223742(0x1b8,'##6*')](_0xf04cb7[_0x223742(0x1be,'S0Jl')],'',_0x5e0e72[_0x223742(0x16e,'vE%H')]);}await _0x5e0e72[_0x223742(0x1c8,'4x1)')](getSignLongforApp,_0x5e0e72['rhSNH']),await $[_0x223742(0x178,'YKA1')](0x3e8),await _0x5e0e72[_0x223742(0x1b2,'Cj3u')](getSignLongforApp,_0x5e0e72[_0x223742(0x150,'vE%H')]),await $[_0x223742(0x167,'GziP')](0x3e8),await _0x5e0e72[_0x223742(0x163,'Vl07')](lotteryChance),await $[_0x223742(0x16b,'2pU%')](0x3e8),await _0x5e0e72[_0x223742(0x17e,'k8Mb')](lotteryClick);})()[_0x4331c2(0x165,'H!nZ')](_0x8e1262=>$[_0x4331c2(0x17f,'o!dX')][_0x4331c2(0x1bf,'y)t^')](_0x8e1262[_0x4331c2(0x156,'^NaU')]||_0x8e1262))[_0x4331c2(0x13f,'31h(')](async()=>{$['done']();});async function getSignLongforApp(_0x1779aa){const _0x543070=_0x4331c2,_0x5a5749={'Dyuwf':'X-LF-DXRisk-Token','ntswj':_0x543070(0x15b,'f5yy'),'gUcjX':function(_0x280d34,_0x5983c8){return _0x280d34&&_0x5983c8;},'ISwAD':_0x543070(0x188,'tCKx'),'jxyrr':_0x543070(0x14c,'Tdn2'),'YwPdh':'APPKEY','QmGDl':'C30403','VrAJO':function(_0x25d0e2,_0x1f4560){return _0x25d0e2!==_0x1f4560;},'uHxcW':_0x543070(0x16c,'31h('),'Ztryx':function(_0x24a71e,_0x3eae52){return _0x24a71e===_0x3eae52;},'WfsQJ':_0x543070(0x193,'31h('),'jNROe':'yQxqe','PLQBH':function(_0x3bf703){return _0x3bf703();}},_0x1c1f53=_0x543070(0x186,'Vl07'),_0x2e29ea={...userCookie,'X-GAIA-API-KEY':apiKey[_0x5a5749[_0x543070(0x192,'*0Ne')]],'X-LF-Bu-Code':_0x5a5749['QmGDl'],'X-LF-DXRisk-Source':'5','X-LF-Channel':'C3'},_0x3fbb31=JSON['stringify']({'activity_no':_0x1779aa});try{if(_0x5a5749[_0x543070(0x182,'NBHy')](_0x5a5749[_0x543070(0x196,'VNQq')],_0x5a5749[_0x543070(0x187,'##6*')])){const _0x3acc5b=_0x58fb74[_0x543070(0x19e,'gNFR')][_0x5a5749[_0x543070(0x1cd,'KHOw')]],_0x3ac1b5=_0x2db235[_0x543070(0x180,'y)t^')][_0x543070(0x1b7,'S0Jl')]||_0x543070(0x185,'HuI7'),_0xa47848=_0x4ae67b[_0x543070(0x159,']Ix3')][_0x5a5749['ntswj']],_0x481cdf=_0x35e437[_0x543070(0x15c,'4x1)')]['X-LF-UserToken'],_0x343e77='424d85f4b1904db3816df909834c885c',_0x4ab7dc=_0x543070(0x1af,'%(O)'),_0x3d96d9=_0x543070(0x18f,'GziP');_0x5a5749[_0x543070(0x1ca,'vE%H')](_0x3acc5b,_0x481cdf)&&_0xa47848?(_0x2116a7[_0x543070(0x160,'T#Vo')]({'X-LF-DXRisk-Token':_0x3acc5b,'Content-Type':_0x5a5749[_0x543070(0x15d,'f36w')],'User-Agent':_0x3ac1b5,'X-LF-UserToken':_0x481cdf,'Cookie':_0xa47848,'authtoken':_0x343e77},_0x20e9c7),_0x7fdaf7[_0x543070(0x160,'T#Vo')]({'APPKEY':_0x4ab7dc,'wxkey':_0x3d96d9},_0x449161),_0x1b33ec[_0x543070(0x19b,'%(O)')](_0x475bd6[_0x543070(0x19f,'DSMe')],'',_0x5a5749['jxyrr'])):_0x34717f[_0x543070(0x1a4,'k8Mb')](_0x43da89[_0x543070(0x199,'2pU%')],'',_0x543070(0x183,'k8Mb'));}else{const _0x36035b=await $[_0x543070(0x153,'YKA1')][_0x543070(0x15f,'cvig')]({'url':_0x1c1f53,'headers':_0x2e29ea,'body':_0x3fbb31});_0x5a5749['Ztryx'](_0x36035b[_0x543070(0x1bd,'NBHy')],0xc8)?$['log']('✅\x20请求成功:\x20'+_0x36035b['body']):_0x5a5749[_0x543070(0x1b9,'Tdn2')](_0x5a5749[_0x543070(0x1a3,'[us8')],_0x5a5749['jNROe'])?$[_0x543070(0x1a8,'y)t^')]('⚠️\x20请求失败:\x20'+_0x36035b['statusCode']+'\x0a'+_0x36035b['body']):_0x48d86f['log']('✅\x20请求成功:\x20'+_0x1d0319['body']);}}catch(_0x6d1a3d){$[_0x543070(0x1ba,'f5yy')]('❌\x20请求错误\x20请更新CK:\x20'+_0x6d1a3d),await _0x5a5749[_0x543070(0x1c3,'y)t^')](delectCK);}}async function lotteryChance(){const _0x1ea2f2=_0x4331c2,_0x29e3e9={'VpDEa':'wxkey','URqRe':_0x1ea2f2(0x1a9,'T&lO'),'xaisQ':function(_0x2b46eb,_0xdb11f6){return _0x2b46eb===_0xdb11f6;},'kUQgB':function(_0x54969f,_0x40eafa){return _0x54969f!==_0x40eafa;},'eDJaG':'vSDfY','VKvWg':function(_0x54dd55){return _0x54dd55();}},_0x57a225=_0x1ea2f2(0x18e,'DSMe'),_0x3cb488={...userCookie,'x-gaia-api-key':apiKey[_0x29e3e9[_0x1ea2f2(0x166,'2pU%')]],'bucode':'C30403','channel':'C3','X-LF-DXRisk-Source':'5'},_0x2a4570={'component_no':_0x29e3e9[_0x1ea2f2(0x171,'KHOw')],'activity_no':_0x1ea2f2(0x149,'DSMe')};try{const _0x2a1a64=await $[_0x1ea2f2(0x1c0,'31h(')][_0x1ea2f2(0x18c,'DSMe')]({'url':_0x57a225,'headers':_0x3cb488,'searchParams':_0x2a4570});_0x29e3e9['xaisQ'](_0x2a1a64['statusCode'],0xc8)?$[_0x1ea2f2(0x1cc,'*0Ne')](_0x1ea2f2(0x1c5,'D32)')+_0x2a1a64[_0x1ea2f2(0x148,'D32)')]):$[_0x1ea2f2(0x140,'6kxi')](_0x1ea2f2(0x141,'D32)')+_0x2a1a64[_0x1ea2f2(0x162,'nMbW')]+'\x0a'+_0x2a1a64[_0x1ea2f2(0x1c9,'ox]y')]);}catch(_0x5043c0){if(_0x29e3e9['kUQgB'](_0x29e3e9[_0x1ea2f2(0x154,'31h(')],_0x29e3e9['eDJaG']))return _0x295668['log'](_0x1ea2f2(0x19c,'T#Vo'));else $[_0x1ea2f2(0x1ba,'f5yy')](_0x1ea2f2(0x164,'KHOw')+_0x5043c0),await _0x29e3e9[_0x1ea2f2(0x170,'f5yy')](delectCK);}}async function lotteryClick(){const _0x26f07a=_0x4331c2,_0x1745b4={'sNmdO':'C216G18R54O4HQVV','IYIud':_0x26f07a(0x1a2,'S0Jl'),'YPVnr':function(_0x562ee3,_0x46c452){return _0x562ee3===_0x46c452;},'ZIqfn':'RYrRK','WLrUr':function(_0x9fe445){return _0x9fe445();}},_0xa091de=_0x26f07a(0x14f,'ox]y'),_0x514cac={...userCookie,'x-gaia-api-key':apiKey[_0x26f07a(0x15a,'tCKx')],'bucode':'C30403','channel':'C3','X-LF-DXRisk-Source':'5'},_0x4a18ec=JSON[_0x26f07a(0x1c4,'KxnP')]({'component_no':_0x1745b4['sNmdO'],'activity_no':_0x1745b4[_0x26f07a(0x18a,'%(O)')],'batch_no':''});try{const _0x33288c=await $[_0x26f07a(0x16d,']pmn')][_0x26f07a(0x17c,'S0Jl')]({'url':_0xa091de,'headers':_0x514cac,'body':_0x4a18ec});_0x1745b4[_0x26f07a(0x173,'SXtp')](_0x33288c['statusCode'],0xc8)?$[_0x26f07a(0x1c1,'4x1)')](_0x26f07a(0x1a6,'Tdn2')+_0x33288c[_0x26f07a(0x14b,'Vl07')]):_0x1745b4[_0x26f07a(0x145,'%(O)')](_0x1745b4['ZIqfn'],_0x26f07a(0x176,'h@HP'))?$['log'](_0x26f07a(0x14e,'vE%H')+_0x33288c[_0x26f07a(0x177,'ox]y')]+'\x0a'+_0x33288c[_0x26f07a(0x151,'nMbW')]):_0x39a29f[_0x26f07a(0x1b1,'T#Vo')](_0x26f07a(0x14e,'vE%H')+_0x153e54['statusCode']+'\x0a'+_0x46cd49['body']);}catch(_0x2288d1){$[_0x26f07a(0x13e,']pmn')](_0x26f07a(0x158,'%(O)')+_0x2288d1),await _0x1745b4['WLrUr'](delectCK);}}async function delectCK(){const _0x41a210=_0x4331c2;$[_0x41a210(0x1cb,'KxnP')](null,ckName),$['setjson'](null,key);}function _0x2aed(){const _0x49e9a6=(function(){return[_0xodO,'rFdjSsVjpuiHaHSmtyJiC.JAcopTmuN.hnvYh7fn==','et19zq','W7tcOmoVgLGgW7Pjo8kiWQynb8knW7RcHMfNW6pdPmk2q8k0WQNdMColW6BdMmk4jxTu','Asr4','4P2f6k235yEH6i255y2Me0lcTa','qmkDWPBcMmksDLq','WRe3WRXzxmkXCW','W6ZdSCkIBq','hCoAav3cHq','WQyQDHeS','WRhdJ8kKt1aTn2FcLSoyWOJcG8o6gX5z','W7zsmI0m','WPWtbW','W4FcSmkmhvO','4PYeWOBORztMSzBMIOFLIBNdRmoL','vvirWRH3ESkrqmkVjXy','pCoNW6a','ja/dLCkLW4pcGmkFW4nrWRe2W41SW5VcKK4','W41BlXSGfdK','W4ZcRmouWO0EW6JcIIxdICkuawq9iCoJcSo6W4lcUNTBwCoUnJdcKva8WQG5aCoX','W4pcVe8jW50','qSkAWR/cN8kbuwK','B8ohW45X','z2CPo8k4W6HNfb7dMSoyjSkbyxnst3pcGmkkq8oEWR7cUmkLW6ZcK8ohAuuHmNBcKSkWWQi','W7XDWQO3WRa','zCoVW44','W53cQmkndLO','csaEW7GPd8oKesXVW6ddUe5Z','BSkZwqxdSIioW6NdNSoOqSk4W68','W5ldK8oyW5BdGG','WRyPWPKGdW','WQxdRmoZcdnCzJdcRCkA','W6CwtW','v8ouW6jEW5G','W6JdN8o9','WPFdISoLv1yYwSoIW582','WRpcOmkwqmkpW4jfiG','WPRdHCoyvSodbw5ytWa','WP7dVSo7hW','iCo9W7tcVa','WPi3WO/cJa','WPhdQCkd','W47cTSoxnxDjWQ1VW5bxW69EBG','aCoeW5BcLSoY','yCocW4tcLCoXW7jiWPFdKG','4P2yD+IVVUAYHEAlJowlI8o0BW','WRGhW7H5WOldVSoAWRRcMZqAW78','WP0SBsWD','WO/dKmk8Aty'].concat((function(){return['WPCrWQqu','zmoWW4NdU3a','yCotW4lcLSoSW7Pp','cG1a','cKjwW5He','WP1Beb/cMW','e8k2WQRcGCkZuxy','d8oKW7S','WPWQWPxcNCkCWPpdMq','csax','4PU977MykEISSoAYNUwLPEI3Q3xcOW','WPZdRCkvW5bgWRRdMMdcKCokxNXKzmk5vmoWWPNdPciBh8k+EZJdSJrnWRuX','WRWmW7f7WOtdUSk1WQtcQYejW6Gk','WPZdJ8kMAWG','xqDjySo/','4P6T6k6O5yAa6iY05y2NWPKDWQ4','W4L/WRBdSSoo','pZHTWR4','W4pdGmo9pCkiWOC5yIStFSoHemkpW7qP','WQ3dNSkhrYe','WQFdVSk6uG','6i625y2W56+D5yIKW5tcICk5WQ7dNxFMIPFLIlZWRj6N','ACodW4jWW7lcLmkL','4PQJ77QQWORORABMSARLP7lOTz7cSSoj','WP0kWRqDomongCoLggH2W6K9W5D/nxqtgGOTkmobWR0aWOddRsTjrHjqWRJdGuhdQa9DWO8FW6PAWRu/WQBdQwBcRIFdLhBcV8o9WRL8xNldGNqtwu3cPSoWe8k9W6fHDSkdw8k4g0RcKCoNWPyfW5/dOWakWPvf','rmoJW4ddMuW','WP/dSSkbW4u','WPBdVCobfKW','W6H9WQBdOa','WP8hWRhcNCk3','kSkcWOBdJmoQW6DhWPtdHmoh','WPBcVSoUF8kaaX4','WO7cTCo5ACkhdrxdPdq','4P2iD+IVQoAXJUMwLoISTchOR5lMM4FMLzNdVLVcG2W','WORcLSkPWQbfWQ4b','WOv0pqpcIG','W4FdN8o1W4tdPLC','WPxdO8kfzcOkW6K','WO9nWQ0tW44','kI91CLSPESkntJK','W7RdGSkEwa','ESoLW53cPmodxg8','WO8+WQxdPG','WO7dQCkeW4HAWQRdUhVcNmoa','WOJdTCkpuY4','4PYcg+IVLoAZREMuU+IVSSkf6k6E5PMj5PsDbxldP8oI','WOZcRmonkmkL','ksXurrC','Bmo8WPJdPW','WPNdJSoHvrf4dmoWW78/CCoPjG'].concat((function(){return['WO8ooSoGbSkJ','BMC6W7ldPgxdUqddGCocd8oDqq','cd15Da','WO8KWQ7cKSkK','c8o/W6JcNW','tCoMW7ddMh4','W4NdGSkcr8oBoG','W5ldU8oSW7JdQa','g2LsW71h','WR3dSmoSe3jXyhRdTSoaW7tdP8kwiqvJx15wW6KADSkZWQexWQRdVcGbwMtdTmoYi8o9Amo4W4RdMXz8WQBdSWerwg4RWOpcLmoXp8o0W6niWR9FCJxcKCkTnCo8ouvXWQ1rW7hdGCojWQSpW7eWqvJdRSoxxsNcOHXTn8otW7nxed5nW6FdISovW6BcV2OKoKaoWR1yfSkFWO8XdWG','fmo9tmkeWRa','Amo4WOxdUCkTW67dMW','aqDtW6yYuCkn','Emk4W6rmDW','WOykWQezpSkeDCkLg3O','W7DOWRVdPa','vN9gWQT5jmoKnXDuW44','z8obW6BcOmo7EmoX','W4tdKCoEcuXvtq','WOddSmoLdG','W4GWWR/cQmk4WPldRG','WRWems0P','W7n7WPW1WPhdVCozW5bv','oCoTW6BcSmoFzCoZ','A8oaW4VdTu3cSqG','WR/dG8o4Amo5','6zEO6k6p6i+x5y6d56Yq5yUVquHjiqJdQ+wNJEI3SG','WR3dJZXZnW','mrDJWRyVfWxcOYVdUYOvWQNdO8k2sLhdQZ/cHCkYWP5CWQvJW5zTW6vlE0fRWROJDSk4iSoaW4OQW77dNxPTDgLyWORdIInrWPK2b8oGW7fhvmkby1FcIbBcOwxcUmowWQ9xwCo+WR0oAv7cR8oNW7qVWOpcMcyBy8orW7L9C8oncCoVDCojfCkufNGEW6lcG8k+W47dISkHW6K5FmkiWRi','WQ3dPCkQwXOnW6rxBCooWQvyeSotWR/cNZ8VWRdcUCkUh8oTW7FcJCkAWR7cNSkMDIqjadhdTmolW58KW4RcG8ofWOPJW7tdTSo5W70UzeLGw2FcLfpcQ8oMW5fiWPz+WOjWghjmo8k5WQddHZz8tYNdReSBW7tcOKlcHtJdGNBdOIFcKZn1fSkZW6VdVG','W78TudtdPa','WPn8jGRcMNFcQNhcJSonhGaGAaSeW70cACoLE1Hxqmkyu1hcOHtcPq','CCoHW7nvW7y','tq5wECoP','WOtdJhG','W6xdTCk7','6iYQ5y+c566w5yMSWRtdQ8o7W4HBp+AkKUwiJFcVNPG','W6RdPmk7Emk1WO0GFXLsamogECk0W4HwWRddUSk5W55BnSkTzLFcO8ojtmo9pbT3xf3cLI3dKuhdQsRdJ8o0bLr3mCoQESkXW7NdSbNdMvldTINdN1K8hxNdSCkkW5pdUCoIh0dcMgRdICkNWONcLw8KWQmOWRNdTH3cMWNcPbq','kCo7W4JdTSoTWRNcJwVdVLxcKgyEWQhcICo/ASkDWR02W4tdVfKPAIy3utr7WONcLCoTWOu/bG','WQtdRSoNd3K','trXOE8oF','pXv3W6GP','WO4PWPtcLmkP','nCkxWP7cQrRdTJddM8kRWR0kW5u','WPJdJmoLvbzZASojW7C9C8o8','WPqxWRddOmoM','6zE26kYI6iYo5y6D566Z5yQiguxdLZNcRWlLPQdOTju','W4NdQSkVoCoxu0ZdJtBdOs0pW7C'];}()));}()));}());_0x2aed=function(){return _0x49e9a6;};return _0x2aed();};async function getCookie(){const _0x2650ad=_0x4331c2,_0x1be30b={'hNYzy':_0x2650ad(0x142,'nMbW'),'aIBkG':_0x2650ad(0x18d,'o!dX'),'hOYlH':function(_0x2af2ea,_0x387ccc){return _0x2af2ea!=_0x387ccc;},'fbWlR':_0x2650ad(0x15e,'2pU%'),'PfgXi':_0x2650ad(0x16f,'cvig'),'pGPAa':'X-LF-UserToken','vbJEv':function(_0x6feef8,_0x516cac){return _0x6feef8&&_0x516cac;},'oWFyh':function(_0x3d0747,_0x546e46){return _0x3d0747!==_0x546e46;},'EYljE':'iopEH','CWYMD':_0x2650ad(0x1ac,'RVFk'),'tCSBh':_0x2650ad(0x183,'k8Mb')};if($request&&_0x1be30b[_0x2650ad(0x14a,'Vl07')]($request[_0x2650ad(0x169,'iVQh')],'OPTIONS')){const _0x54523c=$request['headers']['X-LF-DXRisk-Token'],_0x49f254=$request[_0x2650ad(0x181,'vE%H')][_0x1be30b[_0x2650ad(0x152,'S0Jl')]]||_0x2650ad(0x172,'S0Jl'),_0x2c5eb9=$request[_0x2650ad(0x14d,'Tdn2')][_0x1be30b['PfgXi']],_0xe92f02=$request['headers'][_0x1be30b[_0x2650ad(0x189,'Tdn2')]],_0x320859='424d85f4b1904db3816df909834c885c',_0x2b369e='c06753f1-3e68-437d-b592-b94656ea5517',_0x5afc05='2f9e3889-91d9-4684-8ff5-24d881438eaf';_0x1be30b[_0x2650ad(0x1c7,'$kPd')](_0x54523c,_0xe92f02)&&_0x2c5eb9?($['setjson']({'X-LF-DXRisk-Token':_0x54523c,'Content-Type':_0x1be30b['hNYzy'],'User-Agent':_0x49f254,'X-LF-UserToken':_0xe92f02,'Cookie':_0x2c5eb9,'authtoken':_0x320859},ckName),$[_0x2650ad(0x174,'GziP')]({'APPKEY':_0x2b369e,'wxkey':_0x5afc05},key),$[_0x2650ad(0x18b,'GF)e')]($[_0x2650ad(0x161,'VNQq')],'',_0x1be30b[_0x2650ad(0x144,'4x1)')])):_0x1be30b[_0x2650ad(0x1ce,'tCKx')](_0x1be30b[_0x2650ad(0x1a0,'cgxL')],_0x1be30b[_0x2650ad(0x1b6,'ox]y')])?$['msg']($['name'],'',_0x1be30b['tCSBh']):(_0x13d8d2['setjson']({'X-LF-DXRisk-Token':_0x5aa970,'Content-Type':_0x1be30b[_0x2650ad(0x1a5,'Cj3u')],'User-Agent':_0x5385ee,'X-LF-UserToken':_0x40fa88,'Cookie':_0x5eeb06,'authtoken':_0x263a99},_0x499982),_0x1f34fb['setjson']({'APPKEY':_0x38321d,'wxkey':_0x307eda},_0x4163eb),_0x354ac3['msg'](_0x4ab3f1[_0x2650ad(0x1ae,'Tdn2')],'',_0x1be30b[_0x2650ad(0x1b0,'o!dX')]));}}var version_ = 'jsjiami.com.v7';

function Env(e,t){class s{constructor(e){this.env=e}send(e,t="GET"){e="string"==typeof e?{url:e}:e;let s=this.get;"POST"===t&&(s=this.post);const i=new Promise(((t,i)=>{s.call(this,e,((e,s,o)=>{e?i(e):t(s)}))}));return e.timeout?((e,t=1e3)=>Promise.race([e,new Promise(((e,s)=>{setTimeout((()=>{s(new Error("请求超时"))}),t)}))]))(i,e.timeout):i}get(e){return this.send.call(this.env,e)}post(e){return this.send.call(this.env,e,"POST")}}return new class{constructor(e,t){this.logLevels={debug:0,info:1,warn:2,error:3},this.logLevelPrefixs={debug:"[DEBUG] ",info:"[INFO] ",warn:"[WARN] ",error:"[ERROR] "},this.logLevel="info",this.name=e,this.http=new s(this),this.data=null,this.dataFile="box.dat",this.logs=[],this.isMute=!1,this.isNeedRewrite=!1,this.logSeparator="\n",this.encoding="utf-8",this.startTime=(new Date).getTime(),Object.assign(this,t),this.log("",`🔔${this.name}, 开始!`)}getEnv(){return"undefined"!=typeof $environment&&$environment["surge-version"]?"Surge":"undefined"!=typeof $environment&&$environment["stash-version"]?"Stash":"undefined"!=typeof module&&module.exports?"Node.js":"undefined"!=typeof $task?"Quantumult X":"undefined"!=typeof $loon?"Loon":"undefined"!=typeof $rocket?"Shadowrocket":void 0}isNode(){return"Node.js"===this.getEnv()}isQuanX(){return"Quantumult X"===this.getEnv()}isSurge(){return"Surge"===this.getEnv()}isLoon(){return"Loon"===this.getEnv()}isShadowrocket(){return"Shadowrocket"===this.getEnv()}isStash(){return"Stash"===this.getEnv()}toObj(e,t=null){try{return JSON.parse(e)}catch{return t}}toStr(e,t=null,...s){try{return JSON.stringify(e,...s)}catch{return t}}getjson(e,t){let s=t;if(this.getdata(e))try{s=JSON.parse(this.getdata(e))}catch{}return s}setjson(e,t){try{return this.setdata(JSON.stringify(e),t)}catch{return!1}}getScript(e){return new Promise((t=>{this.get({url:e},((e,s,i)=>t(i)))}))}runScript(e,t){return new Promise((s=>{let i=this.getdata("@chavy_boxjs_userCfgs.httpapi");i=i?i.replace(/\n/g,"").trim():i;let o=this.getdata("@chavy_boxjs_userCfgs.httpapi_timeout");o=o?1*o:20,o=t&&t.timeout?t.timeout:o;const[r,a]=i.split("@"),n={url:`http://${a}/v1/scripting/evaluate`,body:{script_text:e,mock_type:"cron",timeout:o},headers:{"X-Key":r,Accept:"*/*"},policy:"DIRECT",timeout:o};this.post(n,((e,t,i)=>s(i)))})).catch((e=>this.logErr(e)))}loaddata(){if(!this.isNode())return{};{this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const e=this.path.resolve(this.dataFile),t=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(e),i=!s&&this.fs.existsSync(t);if(!s&&!i)return{};{const i=s?e:t;try{return JSON.parse(this.fs.readFileSync(i))}catch(e){return{}}}}}writedata(){if(this.isNode()){this.fs=this.fs?this.fs:require("fs"),this.path=this.path?this.path:require("path");const e=this.path.resolve(this.dataFile),t=this.path.resolve(process.cwd(),this.dataFile),s=this.fs.existsSync(e),i=!s&&this.fs.existsSync(t),o=JSON.stringify(this.data);s?this.fs.writeFileSync(e,o):i?this.fs.writeFileSync(t,o):this.fs.writeFileSync(e,o)}}lodash_get(e,t,s){const i=t.replace(/\[(\d+)\]/g,".$1").split(".");let o=e;for(const e of i)if(o=Object(o)[e],void 0===o)return s;return o}lodash_set(e,t,s){return Object(e)!==e||(Array.isArray(t)||(t=t.toString().match(/[^.[\]]+/g)||[]),t.slice(0,-1).reduce(((e,s,i)=>Object(e[s])===e[s]?e[s]:e[s]=Math.abs(t[i+1])>>0==+t[i+1]?[]:{}),e)[t[t.length-1]]=s),e}getdata(e){let t=this.getval(e);if(/^@/.test(e)){const[,s,i]=/^@(.*?)\.(.*?)$/.exec(e),o=s?this.getval(s):"";if(o)try{const e=JSON.parse(o);t=e?this.lodash_get(e,i,""):t}catch(e){t=""}}return t}setdata(e,t){let s=!1;if(/^@/.test(t)){const[,i,o]=/^@(.*?)\.(.*?)$/.exec(t),r=this.getval(i),a=i?"null"===r?null:r||"{}":"{}";try{const t=JSON.parse(a);this.lodash_set(t,o,e),s=this.setval(JSON.stringify(t),i)}catch(t){const r={};this.lodash_set(r,o,e),s=this.setval(JSON.stringify(r),i)}}else s=this.setval(e,t);return s}getval(e){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.read(e);case"Quantumult X":return $prefs.valueForKey(e);case"Node.js":return this.data=this.loaddata(),this.data[e];default:return this.data&&this.data[e]||null}}setval(e,t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":return $persistentStore.write(e,t);case"Quantumult X":return $prefs.setValueForKey(e,t);case"Node.js":return this.data=this.loaddata(),this.data[t]=e,this.writedata(),!0;default:return this.data&&this.data[t]||null}}initGotEnv(e){this.got=this.got?this.got:require("got").got,this.cktough=this.cktough?this.cktough:require("tough-cookie"),this.ckjar=this.ckjar?this.ckjar:new this.cktough.CookieJar,e&&(e.headers=e.headers?e.headers:{},e&&(e.headers=e.headers?e.headers:{},void 0===e.headers.cookie&&void 0===e.headers.Cookie&&void 0===e.cookieJar&&(e.cookieJar=this.ckjar)))}get(e,t=(()=>{})){switch(e.headers&&(delete e.headers["Content-Type"],delete e.headers["Content-Length"],delete e.headers["content-type"],delete e.headers["content-length"]),e.params&&(e.url+="?"+this.queryStr(e.params)),void 0===e.followRedirect||e.followRedirect||((this.isSurge()||this.isLoon())&&(e["auto-redirect"]=!1),this.isQuanX()&&(e.opts?e.opts.redirection=!1:e.opts={redirection:!1})),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(e.headers=e.headers||{},Object.assign(e.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient.get(e,((e,s,i)=>{!e&&s&&(s.body=i,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),t(e,s,i)}));break;case"Quantumult X":this.isNeedRewrite&&(e.opts=e.opts||{},Object.assign(e.opts,{hints:!1})),$task.fetch(e).then((e=>{const{statusCode:s,statusCode:i,headers:o,body:r,bodyBytes:a}=e;t(null,{status:s,statusCode:i,headers:o,body:r,bodyBytes:a},r,a)}),(e=>t(e&&e.error||"UndefinedError")));break;case"Node.js":let s=require("iconv-lite");this.initGotEnv(e),this.got(e).on("redirect",((e,t)=>{try{if(e.headers["set-cookie"]){const s=e.headers["set-cookie"].map(this.cktough.Cookie.parse).toString();s&&this.ckjar.setCookieSync(s,null),t.cookieJar=this.ckjar}}catch(e){this.logErr(e)}})).then((e=>{const{statusCode:i,statusCode:o,headers:r,rawBody:a}=e,n=s.decode(a,this.encoding);t(null,{status:i,statusCode:o,headers:r,rawBody:a,body:n},n)}),(e=>{const{message:i,response:o}=e;t(i,o,o&&s.decode(o.rawBody,this.encoding))}));break}}post(e,t=(()=>{})){const s=e.method?e.method.toLocaleLowerCase():"post";switch(e.body&&e.headers&&!e.headers["Content-Type"]&&!e.headers["content-type"]&&(e.headers["content-type"]="application/x-www-form-urlencoded"),e.headers&&(delete e.headers["Content-Length"],delete e.headers["content-length"]),void 0===e.followRedirect||e.followRedirect||((this.isSurge()||this.isLoon())&&(e["auto-redirect"]=!1),this.isQuanX()&&(e.opts?e.opts.redirection=!1:e.opts={redirection:!1})),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:this.isSurge()&&this.isNeedRewrite&&(e.headers=e.headers||{},Object.assign(e.headers,{"X-Surge-Skip-Scripting":!1})),$httpClient[s](e,((e,s,i)=>{!e&&s&&(s.body=i,s.statusCode=s.status?s.status:s.statusCode,s.status=s.statusCode),t(e,s,i)}));break;case"Quantumult X":e.method=s,this.isNeedRewrite&&(e.opts=e.opts||{},Object.assign(e.opts,{hints:!1})),$task.fetch(e).then((e=>{const{statusCode:s,statusCode:i,headers:o,body:r,bodyBytes:a}=e;t(null,{status:s,statusCode:i,headers:o,body:r,bodyBytes:a},r,a)}),(e=>t(e&&e.error||"UndefinedError")));break;case"Node.js":let i=require("iconv-lite");this.initGotEnv(e);const{url:o,...r}=e;this.got[s](o,r).then((e=>{const{statusCode:s,statusCode:o,headers:r,rawBody:a}=e,n=i.decode(a,this.encoding);t(null,{status:s,statusCode:o,headers:r,rawBody:a,body:n},n)}),(e=>{const{message:s,response:o}=e;t(s,o,o&&i.decode(o.rawBody,this.encoding))}));break}}time(e,t=null){const s=t?new Date(t):new Date;let i={"M+":s.getMonth()+1,"d+":s.getDate(),"H+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length)));for(let t in i)new RegExp("("+t+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?i[t]:("00"+i[t]).substr((""+i[t]).length)));return e}queryStr(e){let t="";for(const s in e){let i=e[s];null!=i&&""!==i&&("object"==typeof i&&(i=JSON.stringify(i)),t+=`${s}=${i}&`)}return t=t.substring(0,t.length-1),t}msg(t=e,s="",i="",o={}){const r=e=>{const{$open:t,$copy:s,$media:i,$mediaMime:o}=e;switch(typeof e){case void 0:return e;case"string":switch(this.getEnv()){case"Surge":case"Stash":default:return{url:e};case"Loon":case"Shadowrocket":return e;case"Quantumult X":return{"open-url":e};case"Node.js":return}case"object":switch(this.getEnv()){case"Surge":case"Stash":case"Shadowrocket":default:{const r={};let a=e.openUrl||e.url||e["open-url"]||t;a&&Object.assign(r,{action:"open-url",url:a});let n=e["update-pasteboard"]||e.updatePasteboard||s;n&&Object.assign(r,{action:"clipboard",text:n});let h=e.mediaUrl||e["media-url"]||i;if(h){let e,t;if(h.startsWith("http"));else if(h.startsWith("data:")){const[s]=h.split(";"),[,i]=h.split(",");e=i,t=s.replace("data:","")}else{e=h,t=(e=>{const t={JVBERi0:"application/pdf",R0lGODdh:"image/gif",R0lGODlh:"image/gif",iVBORw0KGgo:"image/png","/9j/":"image/jpg"};for(var s in t)if(0===e.indexOf(s))return t[s];return null})(h)}Object.assign(r,{"media-url":h,"media-base64":e,"media-base64-mime":o??t})}return Object.assign(r,{"auto-dismiss":e["auto-dismiss"],sound:e.sound}),r}case"Loon":{const s={};let o=e.openUrl||e.url||e["open-url"]||t;o&&Object.assign(s,{openUrl:o});let r=e.mediaUrl||e["media-url"]||i;return r&&Object.assign(s,{mediaUrl:r}),console.log(JSON.stringify(s)),s}case"Quantumult X":{const o={};let r=e["open-url"]||e.url||e.openUrl||t;r&&Object.assign(o,{"open-url":r});let a=e.mediaUrl||e["media-url"]||i;a&&Object.assign(o,{"media-url":a});let n=e["update-pasteboard"]||e.updatePasteboard||s;return n&&Object.assign(o,{"update-pasteboard":n}),console.log(JSON.stringify(o)),o}case"Node.js":return}default:return}};if(!this.isMute)switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":default:$notification.post(t,s,i,r(o));break;case"Quantumult X":$notify(t,s,i,r(o));break;case"Node.js":break}if(!this.isMuteLog){let e=["","==============📣系统通知📣=============="];e.push(t),s&&e.push(s),i&&e.push(i),console.log(e.join("\n")),this.logs=this.logs.concat(e)}}debug(...e){this.logLevels[this.logLevel]<=this.logLevels.debug&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.debug}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}info(...e){this.logLevels[this.logLevel]<=this.logLevels.info&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.info}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}warn(...e){this.logLevels[this.logLevel]<=this.logLevels.warn&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.warn}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}error(...e){this.logLevels[this.logLevel]<=this.logLevels.error&&(e.length>0&&(this.logs=[...this.logs,...e]),console.log(`${this.logLevelPrefixs.error}${e.map((e=>e??String(e))).join(this.logSeparator)}`))}log(...e){e.length>0&&(this.logs=[...this.logs,...e]),console.log(e.map((e=>e??String(e))).join(this.logSeparator))}logErr(e,t){switch(this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:this.log("",`❗️${this.name}, 错误!`,t,e);break;case"Node.js":this.log("",`❗️${this.name}, 错误!`,t,void 0!==e.message?e.message:e,e.stack);break}}wait(e){return new Promise((t=>setTimeout(t,e)))}done(e={}){const t=((new Date).getTime()-this.startTime)/1e3;switch(this.log("",`🔔${this.name}, 结束! 🕛 ${t} 秒`),this.log(),this.getEnv()){case"Surge":case"Loon":case"Stash":case"Shadowrocket":case"Quantumult X":default:$done(e);break;case"Node.js":process.exit(1)}}}(e,t)}